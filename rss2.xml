<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>尼采般地抒情</title>
    <link>https://www.wztlink1013.com/</link>
    
    <image>
      <url>https://www.wztlink1013.com/favicon.ico</url>
      <title>尼采般地抒情</title>
      <link>https://www.wztlink1013.com/</link>
    </image>
    
    <atom:link href="https://www.wztlink1013.com/rss2.xml" rel="self" type="application/rss+xml"/>
    
    <description>尼采般地抒情个人网站，本科CS，大学期间开始撰写技术博客、个人生活随笔，这个兴趣爱好会一直延续下去……坚信什么都不舍弃，什么也改变不了！</description>
    <pubDate>Wed, 05 Jul 2023 14:00:37 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>『我的团长我的团』</title>
      <link>https://www.wztlink1013.com/essay/wugt39mh6cgg3676/</link>
      <guid>https://www.wztlink1013.com/essay/wugt39mh6cgg3676/</guid>
      <pubDate>Wed, 05 Apr 2023 05:38:36 GMT</pubDate>
      
        
        
          
          
      <description>&lt;!doctype html&gt;&lt;div class=&quot;lake-content&quot; typography=&quot;classic&quot;&gt;&lt;p id=&quot;uc38dc866&quot; class=&quot;ne-p&quot; style=&quot;text-align: center&quot;&gt;&lt;img</description>
          
        
      
      
      
      <content:encoded><![CDATA[<!doctype html><div class="lake-content" typography="classic"><p id="uc38dc866" class="ne-p" style="text-align: center"><img src="https://cdn.nlark.com/yuque/0/2023/webp/1484158/1680703167469-355c8435-dec9-4430-819c-476f8994958d.webp" width="270" id="u416ba344" class="ne-image"></p><p id="u33f28100" class="ne-p"><span class="ne-text">前言：士兵突击的原班人马拍摄的一部电视剧，兰晓龙笔下的炮灰团和草原上的五班，将底层描绘的淋漓尽致，又将绝望中的希望演绎在文字或者影视中。</span></p><h3 id="fpTSn"><span class="ne-text">摘录</span></h3><p id="u7bafe72e" class="ne-p"><span class="ne-text">岂曰无衣，与子同袍。</span></p><p id="u2cb70538" class="ne-p"><span class="ne-text"></span></p><p id="u4c7c6da5" class="ne-p"><span class="ne-text">中国鬼死于听天由命和漫不经心。</span></p><p id="u175607de" class="ne-p"><span class="ne-text"></span></p><p id="u1f90b392" class="ne-p"><span class="ne-text">死都不怕，就怕安逸。</span></p><p id="u24fe66b2" class="ne-p"><span class="ne-text"></span></p><p id="u3425eb31" class="ne-p"><span class="ne-text">国难当头，忠字已经很掺水了，在孝字上就不能再打马虎眼了。</span></p><p id="u5dd9b714" class="ne-p"><span class="ne-text"></span></p><p id="u99525e99" class="ne-p"><span class="ne-text">人生在世，怎么可能像裁缝铺里做衣服，处处都按照你的身材。</span></p><p id="ubdbfaa19" class="ne-p"><span class="ne-text"></span></p><p id="u348f2c18" class="ne-p"><span class="ne-text">有个信着的东西，你是不知道活得有多舒服。</span></p><p id="ube9126c9" class="ne-p"><span class="ne-text"></span></p><p id="u65cb6657" class="ne-p"><span class="ne-text">覆巢之下，岂有完卵。</span></p><p id="u963aca0c" class="ne-p"><span class="ne-text"></span></p><p id="uceb12a81" class="ne-p"><span class="ne-text">你骗我们有了不该有的希望。</span></p><p id="ub3a2a576" class="ne-p"><span class="ne-text"></span></p><p id="ud1bd03f9" class="ne-p"><span class="ne-text">我是伤心而死的。</span></p><p id="uee3f72ec" class="ne-p"><span class="ne-text"></span></p><p id="u5d0787a7" class="ne-p"><span class="ne-text"></span></p></div>]]></content:encoded>
      
      
      <category domain="https://www.wztlink1013.com/categories/%E5%BD%B1%E8%A7%86/">影视</category>
      
      
      
      <comments>https://www.wztlink1013.com/essay/wugt39mh6cgg3676/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>2022年 | 平淡却又魔幻</title>
      <link>https://www.wztlink1013.com/essay/lwozgzgirrhne6ro/</link>
      <guid>https://www.wztlink1013.com/essay/lwozgzgirrhne6ro/</guid>
      <pubDate>Fri, 30 Dec 2022 16:48:16 GMT</pubDate>
      
        
        
          
          
      <description>&lt;!doctype html&gt;&lt;div class=&quot;lake-content&quot; typography=&quot;classic&quot;&gt;&lt;p id=&quot;u7c001e7f&quot; class=&quot;ne-p&quot;&gt;&lt;img</description>
          
        
      
      
      
      <content:encoded><![CDATA[<!doctype html><div class="lake-content" typography="classic"><p id="u7c001e7f" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2023/jpeg/1484158/1672578936177-3e40667b-6cc1-4140-865e-cf55bdcb2658.jpeg" width="3840" id="GE6Xs" class="ne-image"></p><p id="uf699b7c3" class="ne-p"><br></p><p id="ud04fa625" class="ne-p"><span class="ne-text">前言：2022年，平淡的生活中夹杂着一丝魔幻的经历。</span></p><h3 id="sq448"><span class="ne-text">最后的学生时代</span></h3><p id="u9f5f0f39" class="ne-p"><span class="ne-text">仿佛读了好久好久的书，久到我记忆中难忘的事都是夹杂在学业之中。</span></p><p id="ucc30dd02" class="ne-p"><span class="ne-text">去年的这个时候我结束了在外公司的实习之旅，转向学校，一切都像是被安排好的流程，校内实习、毕设、答辩、拍毕业照、毕业…相比起我的中学阶段，我的大学要平淡的多，可能是这易于伤感的年纪不再憧憬与彷徨。</span></p><h3 id="P02dA"><span class="ne-text">可那是兴趣爱好</span></h3><p id="u6f2cb3bc" class="ne-p"><span class="ne-text">我应该是一手好牌却打得不怎么样的一个学生。大三下我几乎就把学分修满，理论上我是有最多的时间去准备就业的那一批人，但是我错过秋招和春招，封校没有紧迫感是一方面，但是更多的是我的毕设，那是我的兴趣，我只想写好我所设计的代码，那种热爱的冲动不再让我去超过所有人竞争些什么，即便那是个好机会。</span></p><p id="ud41458a1" class="ne-p"><span class="ne-text">五月往后，连春招都过了，我才开始找工作，不过凭借技术老本也拿到一些offer，选择当中有更好的，但最后我还是选了一个和我毕设几乎一样的岗位。我想以后我可能会变得功利起来，但现在不是未来。比较讽刺的是，这一年人情景事都在变，唯独兴趣爱好一直在，从爱好到毕设再到工作，载体不同，但做的都一样。</span></p><h3 id="ZHY8Q"><span class="ne-text">厦门</span></h3><p id="ucead1e49" class="ne-p"><span class="ne-text">原本意向工作地点是深圳，因为一些原因，来到厦门工作了。在一个陌生的海滨城市也是一个不错的经历体验，上一次的海滨之行是在珠海。</span></p><h3 id="Yd3cg"><span class="ne-text">疫情下的颠沛流离</span></h3><p id="ua27c9de0" class="ne-p"><span class="ne-text">上半年学校解封之际伴随着成片的花海，我原以为那会是疫情这个故事的终章，年底，国家重新定义了新冠的所属类别为“乙类甲管”，政策变之后，朋友圈每天都会更新一批又一批的阳康转阴等字眼。我阳了的那一周，对象给我寄的药让我撑过那几天，不在身边却也胜似身边，虽然她很想过来，但出于担心还是没有让她过来。</span></p><p id="u9200df2d" class="ne-p"><span class="ne-text">其实那周，对象做的很多事情让我挺感动的…</span></p><h3 id="qrizm"><span class="ne-text">规则的成长</span></h3><p id="u7c422ca4" class="ne-p"><span class="ne-text">工作之后，看小说和追番没有在学校时候的那种氛围了，我觉得这可能就是成长带来的副作用吧，人们都以铺天盖地般地形式想要达成某种结果来取得某种成绩。技术上，不论是深度还是广度，都只是浅尝辄止，自己要做的、要总结的、要实践的还有很多很多，自己也要被迫地以最佳的状态在技术层面上提升一个层次。</span></p><p id="u470c3a4c" class="ne-p"><span class="ne-text">一千个人眼中有一千个哈姆雷特，而在我眼里，成长是虚无的，因为每个人总是以一种无形的规则成长，就像是竹林中的嫩竹子从一出生的小笋就笔直地向阳生长，不偏离之后的任何轨迹。</span></p><h3 id="az3a1"><span class="ne-text">2023</span></h3><p id="u40186f6b" class="ne-p"><span class="ne-text">对自己的2023年没有太多任务式的念想，唯独多读点书这一点多督促自己，在此对自己算是立下个flag吧，多读书多思考多记录。</span></p></div>]]></content:encoded>
      
      
      <category domain="https://www.wztlink1013.com/categories/%E9%9A%8F%E7%AC%94/">随笔</category>
      
      
      
      <comments>https://www.wztlink1013.com/essay/lwozgzgirrhne6ro/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>《你的夏天还好吗》小记</title>
      <link>https://www.wztlink1013.com/essay/wmsytg138tcz629a/</link>
      <guid>https://www.wztlink1013.com/essay/wmsytg138tcz629a/</guid>
      <pubDate>Wed, 07 Dec 2022 23:02:13 GMT</pubDate>
      
        
        
          
          
      <description>&lt;!doctype html&gt;&lt;div class=&quot;lake-content&quot; typography=&quot;classic&quot;&gt;&lt;p id=&quot;ua9751299&quot; class=&quot;ne-p&quot; style=&quot;text-align: center&quot;&gt;&lt;img</description>
          
        
      
      
      
      <content:encoded><![CDATA[<!doctype html><div class="lake-content" typography="classic"><p id="ua9751299" class="ne-p" style="text-align: center"><img src="https://cdn.nlark.com/yuque/0/2022/jpeg/1484158/1670483122786-7c51c1ab-5445-4adc-905b-4c5d407d25e0.jpeg" width="330" id="Igzgd" class="ne-image"></p><h2 id="O4mrv"><span class="ne-text">你的夏天还好吗？</span></h2><p id="u980df92f" class="ne-p"><span class="ne-text">青涩的喜欢和热烈的喜欢，或许在真心付出面前才能得出答案，你义无反顾去喜欢去爱去付出的人，可能在你意识到对方利用你的感情，那一瞬间让你突然想到多年前一个夏天护着你的那个人，普通且纯粹…以前有个问题：“一个你很喜欢的人和一个很喜欢你的人，你会选谁？”，成长可能就是一个人多多少少的经历而孕育出人潜意识选择的微妙变化。</span></p><h2 id="UGRKc"><span class="ne-text">虫子</span></h2><p id="uf08ebd89" class="ne-p"><span class="ne-text">一个男人对于一个女人有多爱，应该在女人怀有身孕的那个阶段，男人给予女人多少的照顾来衡量。</span></p><p id="u831af1b5" class="ne-p"><span class="ne-text">什么是照顾，可能就是半夜赶走妻子身边的蚊虫就是一种照顾…</span></p><h2 id="DgykL"><span class="ne-text">水中的歌利亚</span></h2><p id="ub455e1e9" class="ne-p"><span class="ne-text">不久前父亲的离去，再在一场大雨不断的天气下，母亲也糖尿休克了，一时间对于亲人的这般离去，作者只知道在洪水中把母亲的尸体绑在木板上作为小船拖去抢救，即便最后尸体也不知道飘向何处…作者最后在塔吊避雨，想起了父亲在工作时的焊接火花射到脸上，想起了父亲教作者游泳潜水，想起了将母亲缠绕在木板上的绿色胶带…</span></p><h2 id="CcIvf"><span class="ne-text">那里是夜，这里有歌</span></h2><p id="ud6ffdc42" class="ne-p"><span class="ne-text">龙大就像是『夏洛特烦恼』中的大傻春。</span></p><p id="u5a0352cf" class="ne-p"><span class="ne-text">“认识你很高兴”，我想这是明华对龙大寄托的另一种情感。</span></p><p id="ub0a131cf" class="ne-p"><span class="ne-text">这世界上总有一些简单纯粹的人活得那么用力。</span></p><h2 id="Uo58d"><span class="ne-text">一天的轴</span></h2><p id="u6ad2873d" class="ne-p"><span class="ne-text">机场是个很容易让人感伤的地方，无数来来往往的陌生面孔总会让你心里觉得平淡而又恍惚。琪玉女士只是个机场保洁工作的一名普通人，失去爱人，孩子也在退伍之际做出一些错事而入狱，想着儿子总想去国外进修…一天的轴或许就是念想里为了某个人总想去坚持做点什么的事。</span></p><p id="u3220ec89" class="ne-p"><span class="ne-text">机场和车站不一样，机场更多是让人感到感伤，而绿皮车和高铁给人以寄托。我还怀念每次回学校，下午四五点飞下机，夕阳洒满遥墙机场的每个角落，机场的边界是一些树，小森林一般，看着那些树，每次总让想起家乡的景色，安安静静的一个小城，安安静静的行人。求学的意义是什么呢？至今没有一个确切让我自己信服的借口，可能那也是我的轴罢了。</span></p><h2 id="X7XHC"><span class="ne-text">角质层</span></h2><p id="u229f9c29" class="ne-p"><span class="ne-text">受宠若惊般地小心翼翼，却也掩饰不了一个人的简单纯粹。</span></p><p id="u46db2972" class="ne-p"><span class="ne-text">可是谁又知道这样的小心翼翼，却是在一个在艰难环境下经历那个年纪本不该承受的经历换来的坚强。</span></p><h2 id="qOfeR"><span class="ne-text">尼克塔酒店</span></h2><p id="u96324f7f" class="ne-p"><span class="ne-text">一段旅行，从一开始就应该决定好同行的人，是否相处得来，否则很容易产生矛盾甚至中途散场，即便对方是曾经很要好的朋友或发小，随着时间的推移，人也是会变的。旅行和人生都是如此。</span></p><h2 id="hgsUN"><span class="ne-text">三十岁</span></h2><p id="ubb655d91" class="ne-p"><span class="ne-text">一个人的成长很多时候是这个世界上另一些生命的救赎，谁都应该努力地活着。</span></p></div>]]></content:encoded>
      
      
      <category domain="https://www.wztlink1013.com/categories/%E9%98%85%E8%AF%BB/">阅读</category>
      
      
      
      <comments>https://www.wztlink1013.com/essay/wmsytg138tcz629a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>一个梦——新学期</title>
      <link>https://www.wztlink1013.com/essay/shdnxh6ya6pgbh1n/</link>
      <guid>https://www.wztlink1013.com/essay/shdnxh6ya6pgbh1n/</guid>
      <pubDate>Wed, 23 Nov 2022 14:12:36 GMT</pubDate>
      
        
        
          
          
      <description>&lt;!doctype html&gt;&lt;div class=&quot;lake-content&quot; typography=&quot;classic&quot;&gt;&lt;p id=&quot;u3fe3baad&quot; class=&quot;ne-p&quot; style=&quot;text-align: center&quot;&gt;&lt;img</description>
          
        
      
      
      
      <content:encoded><![CDATA[<!doctype html><div class="lake-content" typography="classic"><p id="u3fe3baad" class="ne-p" style="text-align: center"><img src="https://cdn.nlark.com/yuque/0/2022/jpeg/1484158/1669244059061-5269cc7d-fa21-4467-a750-5aa43184f583.jpeg" width="600" id="ZLXlO" class="ne-image"></p><p id="uc8d73b3a" class="ne-p"><span class="ne-text">下学期开学了，位置是我初中的那个学校，教室是最初的靠近大门的高排宿舍那里，那里本来是一排宿舍，不知怎么改为教室了。</span></p><p id="u76d5ec95" class="ne-p"><span class="ne-text">新学期开学，我还是一如既往去的很晚，教室里面坐满了人，我看着第三排还是第四排边上有个空位，就坐了过去，第一堂课是数学，具体讲的我忘了，不过记得讲的是一种新型运算，打破传统运算的那种…</span></p><p id="ucb3b5036" class="ne-p"><span class="ne-text">我的同桌告诉我待会可能按照成绩分位置，我一脸懵，不知道有什么成绩…</span></p><p id="u1912f2dc" class="ne-p"><span class="ne-text">然后快下课的前十分钟，班主任进来了，她说报一下上次数学考试排名，我记得我排第五还是第六，分数是我高考数学成绩，同学把我的试卷递给我。老师说这次新班级数学超过1xx的有十个，讲完，我便醒了（冻醒）……</span></p><p id="u8a72d38f" class="ne-p"><span class="ne-text">后记:</span></p><p id="u727b7420" class="ne-p"><span class="ne-text">那个位置不是靠窗的，可我上课还是喜欢看着外面，看那个一排排自行车的地方。</span></p><p id="u62d08c65" class="ne-p"><span class="ne-text">新学期的第一堂课，一如既往般地身边所有同学都很聚精会神，但我却很出神……</span></p><p id="u6a799471" class="ne-p"><span class="ne-text">其实我一直都不喜欢新学期，特别是大学之前的小学初中，一切都太新了，那种氛围感有点让人窒息抑郁…直到大学，我几乎只坐最后一排靠窗，我喜欢在上课的时候看小说，尤其是所有人都在认真听课的时候，记得大三有一个学期中的两个礼拜的所有离散数学课，我全都用来看《平凡的世界》了……</span></p><p id="u4fc2e318" class="ne-p"><span class="ne-text">梦醒的那一刻，一大堆记忆涌入脑海:上大学了…大学毕业了…工作上班了…我还在睡觉…待会起来上班……</span></p></div>]]></content:encoded>
      
      
      <category domain="https://www.wztlink1013.com/categories/%E5%BC%82%E4%B8%96%E7%95%8C/">异世界</category>
      
      
      
      <comments>https://www.wztlink1013.com/essay/shdnxh6ya6pgbh1n/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>CommonJS模块转ESM模块方法</title>
      <link>https://www.wztlink1013.com/blog/fhxatr6exkaavb4k/</link>
      <guid>https://www.wztlink1013.com/blog/fhxatr6exkaavb4k/</guid>
      <pubDate>Wed, 16 Nov 2022 03:44:20 GMT</pubDate>
      
        
        
          
          
      <description>&lt;!doctype html&gt;&lt;div class=&quot;lake-content&quot; typography=&quot;classic&quot;&gt;&lt;p id=&quot;ua2542a3a&quot; class=&quot;ne-p&quot; style=&quot;text-align: center&quot;&gt;&lt;img</description>
          
        
      
      
      
      <content:encoded><![CDATA[<!doctype html><div class="lake-content" typography="classic"><p id="ua2542a3a" class="ne-p" style="text-align: center"><img src="https://cdn.nlark.com/yuque/0/2022/png/1484158/1668599149397-081cdc1f-3a12-445f-a1ee-077ecde12f33.png" width="240" id="ue9195258" class="ne-image"></p><p id="u22b00a16" class="ne-p"><span class="ne-text">前言：vite项目中，依赖包的加载都是基于esm模块加载的，有些依赖打包后不是esm而是CommonJS类型的，则需要由CommonJS转为esm类型。vite预构建可以默认将node_modules下的依赖包进行转换为esm类型并存放在node_modules文件夹下的.vite文件夹下，也可以自行添加路径来预构建（详见文档：</span><a href="https://cn.vitejs.dev/guide/dep-pre-bundling.html#customizing-the-behavior" data-href="https://cn.vitejs.dev/guide/dep-pre-bundling.html#customizing-the-behavior" target="_blank" class="ne-link"><span class="ne-text">https://cn.vitejs.dev/guide/dep-pre-bundling.html#customizing-the-behavior</span></a><span class="ne-text">）。</span></p><p id="ue3363f3f" class="ne-p"><span class="ne-text"></span></p><div data-type="info" class="ne-alert"><p id="ub42e1842" class="ne-p"><strong><span class="ne-text">前端模块化相关文章：</span></strong><a href="https://www.wztlink1013.com/blog/psazge/" data-href="https://www.wztlink1013.com/blog/psazge/" class="ne-link"><strong><span class="ne-text">前端代码模块及其工具化（Webpack,roolup.js）构建 | 尼采般地抒情</span></strong></a></p></div><p id="u4a983763" class="ne-p"><br></p><p id="ub9247581" class="ne-p"><span class="ne-text">对于一些老旧sdk，在vite项目中，利用pnpm link调试，就需要转包操作了。在此记录一下手动将CommonJS模块转为ESM模块的小demo。</span></p><pre><code class="json">&#123;  &amp;quot;name&amp;quot;: &amp;quot;cjs_to_esm&amp;quot;,  &amp;quot;version&amp;quot;: &amp;quot;1.0.0&amp;quot;,  &amp;quot;description&amp;quot;: &amp;quot;&amp;quot;,  &amp;quot;type&amp;quot;: &amp;quot;module&amp;quot;,  &amp;quot;scripts&amp;quot;: &#123;    &amp;quot;build&amp;quot;: &amp;quot;rollup -c&amp;quot;  &#125;,  &amp;quot;keywords&amp;quot;: [],  &amp;quot;author&amp;quot;: &amp;quot;&amp;quot;,  &amp;quot;license&amp;quot;: &amp;quot;ISC&amp;quot;,  &amp;quot;devDependencies&amp;quot;: &#123;    &amp;quot;@rollup/plugin-commonjs&amp;quot;: &amp;quot;^23.0.2&amp;quot;,    &amp;quot;rollup&amp;quot;: &amp;quot;^3.2.5&amp;quot;  &#125;&#125;</code></pre><pre><code class="javascript">import commonjs from &#39;@rollup/plugin-commonjs&#39;;export default &#123;  input: &#39;src/test_cjs.js&#39;,  output: &#123;    file: &#39;output/test_esm.js&#39;,    format: &#39;es&#39;  &#125;,  plugins: [commonjs()]&#125;;</code></pre></div>]]></content:encoded>
      
      
      <category domain="https://www.wztlink1013.com/categories/Web%E5%BC%80%E5%8F%91/">Web开发</category>
      
      <category domain="https://www.wztlink1013.com/categories/Web%E5%BC%80%E5%8F%91/Node-js/">Node.js</category>
      
      
      
      <comments>https://www.wztlink1013.com/blog/fhxatr6exkaavb4k/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>一个梦——一个老人</title>
      <link>https://www.wztlink1013.com/essay/gkc62n/</link>
      <guid>https://www.wztlink1013.com/essay/gkc62n/</guid>
      <pubDate>Sun, 30 Oct 2022 12:20:33 GMT</pubDate>
      
        
        
          
          
      <description>&lt;div</description>
          
        
      
      
      
      <content:encoded><![CDATA[<div class="yuque-hexo-lyrics-secret">这是加密文章！</div>]]></content:encoded>
      
      
      <category domain="https://www.wztlink1013.com/categories/%E5%BC%82%E4%B8%96%E7%95%8C/">异世界</category>
      
      
      
      <comments>https://www.wztlink1013.com/essay/gkc62n/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Vue异步接口请求的几种使用方式</title>
      <link>https://www.wztlink1013.com/blog/vdv6i5/</link>
      <guid>https://www.wztlink1013.com/blog/vdv6i5/</guid>
      <pubDate>Fri, 14 Oct 2022 23:56:22 GMT</pubDate>
      
        
        
          
          
      <description>&lt;!doctype html&gt;&lt;div class=&quot;lake-content&quot; typography=&quot;classic&quot;&gt;&lt;p id=&quot;u2321b18b&quot; class=&quot;ne-p&quot;&gt;&lt;img</description>
          
        
      
      
      
      <content:encoded><![CDATA[<!doctype html><div class="lake-content" typography="classic"><p id="u2321b18b" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2022/png/1484158/1665821781199-5e03f0f2-b6c3-405e-a5e9-6071e66be32d.png" width="1400" id="u884cd2d4" class="ne-image"></p><p id="u45cb7189" class="ne-p"><br></p><p id="u97cd96d5" class="ne-p"><span class="ne-text">前言：Vue请求接口多是异步操作数据，我们一般会用then、catch来进行链式获取接口数据，除此之外还可以使用Async、Await这个方式来执行异步代码，待接口数据请求完成，再进行下面的逻辑执行。但是上述情况一个是会陷入“回调地狱”，而且请求失败所获得的数据不好获取处理，这个时候使用Promise来封装返回的数据就很好用了，不仅如此，这种形式也有利于传递接口给SDK，具体代码如下：</span></p><p id="u8ecd33bf" class="ne-p"><span class="ne-text"></span></p><pre><code class="javascript">async getData(id) &#123;  ···  return new Promise((resolve, reject) =&amp;gt; &#123;    getInterfaceData(&#123; param: id &#125;)      .then((res) =&amp;gt; &#123;        ···        resolve(res.data);      &#125;)      .catch((err) =&amp;gt; &#123;        ···        reject(new Error(err));      &#125;);  &#125;);&#125;,const data = getData(&#39;xxx&#39;);</code></pre></div>]]></content:encoded>
      
      
      <category domain="https://www.wztlink1013.com/categories/Web%E5%BC%80%E5%8F%91/">Web开发</category>
      
      <category domain="https://www.wztlink1013.com/categories/Web%E5%BC%80%E5%8F%91/Vue/">Vue</category>
      
      
      
      <comments>https://www.wztlink1013.com/blog/vdv6i5/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Axios实现重连机制</title>
      <link>https://www.wztlink1013.com/blog/urrudl/</link>
      <guid>https://www.wztlink1013.com/blog/urrudl/</guid>
      <pubDate>Fri, 14 Oct 2022 23:29:38 GMT</pubDate>
      
        
        
          
          
      <description>&lt;!doctype html&gt;&lt;div class=&quot;lake-content&quot; typography=&quot;classic&quot;&gt;&lt;p id=&quot;u719a7e4d&quot; class=&quot;ne-p&quot;&gt;&lt;img</description>
          
        
      
      
      
      <content:encoded><![CDATA[<!doctype html><div class="lake-content" typography="classic"><p id="u719a7e4d" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2022/png/1484158/1665819024337-8997802d-d9c9-4398-aa69-f7be2c45d02b.png" width="1347.499946455163" id="u1a5e26ad" class="ne-image"></p><p id="ub28fc1f7" class="ne-p"><span class="ne-text"></span></p><p id="uab8a1db5" class="ne-p"><span class="ne-text">前言：Vue项目中利用Axios封装接口的请求和响应过程中，请求的接口可能会出现本地网络情况抑或是服务端相关环境错误，如果需要接口配置重连机制，如下逻辑可以实现：</span></p><p id="u7c9e092e" class="ne-p"><br></p><pre><code class="javascript">···service.interceptors.response.use(  (response) =&amp;gt; &#123;    tryCloseLoading();    return response &amp;amp;&amp;amp; response.data;  &#125;,  (err) =&amp;gt; &#123;    // 通用报错处理    if (err.response) &#123;      // 通用报错处理      ···      // 关闭加载中      tryCloseLoading();      // return Promise.reject(err.response.data);    &#125; else &#123;      const &#123; config &#125; = err;      if (!config || !config.retry) return Promise.reject(err);      config.retryCount = config.retryCount || 0;      // 检查是否已经达到重连总数      if (config.retryCount &amp;gt;= config.retry) &#123;        message.error(&#39;当前网络异常&#39;);        tryCloseLoading();        return Promise.reject(err);      &#125;      config.retryCount += 1;      // 自动计算每次重试的延时，重试次数越多，延时越大      const retryDelay = (1 / 2) * (Math.pow(2, config.retryCount) - 1) * 1000;      // 创建新的 Promise 来发起请求      const backoff = new Promise((resolve) =&amp;gt; &#123;        setTimeout(() =&amp;gt; &#123;          resolve();        &#125;, retryDelay);      &#125;);      return backoff.then(() =&amp;gt; &#123;        tryCloseLoading();        return service(config);      &#125;);    &#125;  &#125;,);···</code></pre></div>]]></content:encoded>
      
      
      <category domain="https://www.wztlink1013.com/categories/Web%E5%BC%80%E5%8F%91/">Web开发</category>
      
      <category domain="https://www.wztlink1013.com/categories/Web%E5%BC%80%E5%8F%91/Vue/">Vue</category>
      
      
      
      <comments>https://www.wztlink1013.com/blog/urrudl/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>同站点防盗链图片和百度统计Referer不一致的解决方案</title>
      <link>https://www.wztlink1013.com/blog/ugwagn/</link>
      <guid>https://www.wztlink1013.com/blog/ugwagn/</guid>
      <pubDate>Thu, 06 Oct 2022 22:19:11 GMT</pubDate>
      
        
        
          
          
      <description>&lt;!doctype html&gt;&lt;div class=&quot;lake-content&quot; typography=&quot;classic&quot;&gt;&lt;p id=&quot;uac5762ec&quot; class=&quot;ne-p&quot;&gt;&lt;img</description>
          
        
      
      
      
      <content:encoded><![CDATA[<!doctype html><div class="lake-content" typography="classic"><p id="uac5762ec" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2022/png/1484158/1665124978469-51dce474-28f7-4372-9549-d55a6fd48098.png" width="874.1666319304056" id="udf2cdd49" class="ne-image"></p><p id="ue8a744ec" class="ne-p"><span class="ne-text">前言：个人网站使用的语雀外链图片和百度统计两者之间的referrer不一致的解决方案</span></p><hr id="kUABX" class="ne-hr"><p id="u1cbd0778" class="ne-p"><span class="ne-text">问题描述：防盗链图片不在所指定的白名单内，是不被允许访问的，比如语雀图片不能在非自己网站上渲染使用。</span></p><p id="u91b79cc2" class="ne-p"><span class="ne-text"></span></p><p id="uccfeeba5" class="ne-p"><span class="ne-text">常规解决思路：通过设置页面</span><code class="ne-code"><span class="ne-text">meta</span></code><span class="ne-text">标签的</span><code class="ne-code"><span class="ne-text">referrer</span></code><span class="ne-text">属性值为</span><code class="ne-code"><span class="ne-text">no-referrer</span></code><span class="ne-text">可以进行访问（</span><a href="https://blog.csdn.net/qq_53225741/article/details/125239106" data-href="https://blog.csdn.net/qq_53225741/article/details/125239106" class="ne-link"><span class="ne-text">Referer和Referrer Policy以及图片防盗链</span></a><span class="ne-text">）</span></p><pre><code class="html">&amp;lt;meta name=&amp;quot;referrer&amp;quot; content=&amp;quot;no-referrer&amp;quot; /&amp;gt;</code></pre><p id="uf17ac2f5" class="ne-p"><span class="ne-text">设置上述referrer，可以在其他网站使用防盗链的图片，但是会存在一些副作用，比如对百度统计代码失效，因为百度统计需要携带请求网站的referr等信息才能进一步进行数据统计分析，所以这种解决办法属于取舍功能的方式。</span></p><p id="uaa9559de" class="ne-p"><br></p><p id="u41eb776c" class="ne-p"><span class="ne-text">最终解决思路：利用网页的代码执行顺序，动态对网站的referrer进行更改，设置网站初始referrer为</span><code class="ne-code"><span class="ne-text">no-referrer</span></code><span class="ne-text">，待网站所有外链防盗图片加载完成，再动态修改referrer为</span><code class="ne-code"><span class="ne-text">strict-origin-when-cross-origin</span></code><span class="ne-text">，再进行百度统计逻辑代码的执行。核心代码如下：</span></p><pre><code class="javascript">// 防盗链图片共存const getImgLoadEd = (callback) =&amp;gt; &#123;  let images = document.getElementById(&amp;quot;lyrics&amp;quot;).querySelectorAll(&amp;quot;img&amp;quot;);  const promises = Array.prototype.slice    .call(images)    .filter((img) =&amp;gt; /^(https:\/\/cdn.xxx.com\/yuque)/.test(img.src))    .map((node) =&amp;gt; &#123;      return new Promise((resolve, reject) =&amp;gt; &#123;        // 加一重保障        node.setAttribute(&amp;quot;referrerpolicy&amp;quot;, &amp;quot;no-referrer&amp;quot;);        let loadImg = new Image();        loadImg.src = node.src;        loadImg.onload = () =&amp;gt; &#123;          resolve(node);        &#125;;      &#125;);    &#125;);  Promise.all(promises)    .then((data) =&amp;gt; &#123;      if (callback) callback();    &#125;)    .catch((e) =&amp;gt; &#123;      console.log(&amp;quot;所拉取的文章图床访问失败!&amp;quot;);    &#125;);&#125;;const baidutongji = () =&amp;gt; &#123;  document    .querySelector(&#39;meta[name=&amp;quot;referrer&amp;quot;]&#39;)    .setAttribute(&amp;quot;content&amp;quot;, &amp;quot;strict-origin-when-cross-origin&amp;quot;);  var hm = document.createElement(&amp;quot;script&amp;quot;);  hm.src = &amp;quot;https://hm.baidu.com/hm.js?bcxxxxxxxxxxxx1&amp;quot;;  var s = document.getElementsByTagName(&amp;quot;script&amp;quot;)[0];  s.parentNode.insertBefore(hm, s);&#125;;</code></pre></div>]]></content:encoded>
      
      
      <category domain="https://www.wztlink1013.com/categories/%E5%85%B6%E4%BB%96/">其他</category>
      
      <category domain="https://www.wztlink1013.com/categories/%E5%85%B6%E4%BB%96/%E7%8E%A9%E8%BD%AC%E5%8D%9A%E5%AE%A2/">玩转博客</category>
      
      
      
      <comments>https://www.wztlink1013.com/blog/ugwagn/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>站点添加雷姆live2d+看板模型</title>
      <link>https://www.wztlink1013.com/blog/wrygmp/</link>
      <guid>https://www.wztlink1013.com/blog/wrygmp/</guid>
      <pubDate>Thu, 06 Oct 2022 20:43:55 GMT</pubDate>
      
        
        
          
          
      <description>&lt;!doctype html&gt;&lt;div class=&quot;lake-content&quot; typography=&quot;classic&quot;&gt;&lt;p id=&quot;ubf72f4a0&quot; class=&quot;ne-p&quot;&gt;&lt;img</description>
          
        
      
      
      
      <content:encoded><![CDATA[<!doctype html><div class="lake-content" typography="classic"><p id="ubf72f4a0" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2022/png/1484158/1665116739656-379177c2-ffa2-4cc4-b22c-38fb12c201e8.png" width="1599.1666031214952" id="u3f0332ae" class="ne-image"></p><p id="u2c3627c7" class="ne-p"><br></p><p id="u15698168" class="ne-p"><span class="ne-text">前言：为自己站点配置雷姆live2d，并在live2d模型的基础上附加添加看板功能。</span></p><h2 id="dTMUK"><span class="ne-text">安装hexo-helper-live2d</span></h2><ul class="ne-ul"><li id="ua238e076"><span class="ne-text">下载</span><code class="ne-code"><span class="ne-text">hexo-helper-live2d</span></code><span class="ne-text">（</span><a href="https://github.com/EYHN/hexo-helper-live2d" data-href="https://github.com/EYHN/hexo-helper-live2d" target="_blank" class="ne-link"><span class="ne-text">https://github.com/EYHN/hexo-helper-live2d</span></a><span class="ne-text">）</span></li></ul><pre><code class="bash">npm install --save hexo-helper-live2d</code></pre><h2 id="xTwII"><span class="ne-text">配置自定义蕾姆模型</span></h2><h3 id="LkS5r"><span class="ne-text">文件配置</span></h3><ul class="ne-ul"><li id="uba7ea8c6"><span class="ne-text">remu模型下载：</span><a href="https://onedrive.wztlink1013.com/zh-CN/live2d/" data-href="https://onedrive.wztlink1013.com/zh-CN/live2d/" target="_blank" class="ne-link"><span class="ne-text">https://onedrive.wztlink1013.com/zh-CN/live2d/</span></a><span class="ne-text"> 【密码：remu】</span></li><li id="u4c758308"><span class="ne-text">在hexo</span><strong><span class="ne-text">项目根目录</span></strong><span class="ne-text">新建</span><code class="ne-code"><span class="ne-text">live2d_models</span></code><span class="ne-text">文件夹，再将所下载的模型解压放入该文件夹</span></li></ul><p id="ub4f75940" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2022/png/1484158/1665114888992-4037e056-a783-4827-9d0f-426fbc3e0107.png" width="548.3333115445251" id="u4879bd54" class="ne-image"></p><h3 id="RMXIc"><span class="ne-text">_config.yml配置</span></h3><ul class="ne-ul"><li id="ue2750c2f"><span class="ne-text">根目录_config.yml添加如下配置</span></li><li id="u1a142b41"><span class="ne-text">API文档：</span><a href="https://l2dwidget.js.org/docs/class/src/index.js~L2Dwidget.html#instance-method-init" data-href="https://l2dwidget.js.org/docs/class/src/index.js~L2Dwidget.html#instance-method-init" target="_blank" class="ne-link"><span class="ne-text">https://l2dwidget.js.org/docs/class/src/index.js~L2Dwidget.html#instance-method-init</span></a></li></ul><pre><code class="yaml">## live2dlive2d:  enable: true # 是否开启live2d  scriptFrom: local # 脚本从本地引入  pluginRootPath: live2d/ # 插件在站点上的根目录(相对路径)  pluginJsPath: lib/ # 脚本文件相对与插件根目录路径  pluginModelPath: assets/ # 模型文件相对与插件根目录路径  tagMode: false # 标签模式, 是否仅替换 live2d tag标签而非插入到所有页面中  debug: false # 调试, 是否在控制台输出日志  model:    use: remu # 填写放进live2d_models文件夹中的模型文件夹名字    scale: 1 # canvas 模型与canvas的缩放  display:    width: 150 # 宽度    height: 300 # 高度    position: left # 显示位置    hOffset: 0 #水平偏移    vOffset: -12 #垂直偏移  mobile:    show: true # 手机端是否显示    scale: 1 # 移动设备上的缩放  react:    opacity: 1 # 透明度</code></pre><div data-type="info" class="ne-alert"><p id="u9c7aaaf6" class="ne-p"><span class="ne-text">PS：按需加载live2d标签</span></p><p id="u6dcae3e1" class="ne-p"><span class="ne-text">上述配置中</span><code class="ne-code"><span class="ne-text">tagMode: true</span></code><span class="ne-text">则代表需要在主题中单独给出需要显示的页面</span></p></div><h3 id="aCTih"><span class="ne-text">最终live2d效果</span></h3><p id="u79795e33" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2022/png/1484158/1665115637123-4e5c7429-8a8e-4ae9-b38b-64fc9779a01f.png" width="1599.9999364217147" id="uf21a5c73" class="ne-image"></p><h2 id="dgYzR"><span class="ne-text">配置三方插件模型</span></h2><p id="ua70cfc9f" class="ne-p"><span class="ne-text">上述步骤是下载remu源文件然后自定义的remu模型，也可以下载社区封装好npm插件的模型，本文做自定义模型的说明，故不做该部分详述。相关参考如下：</span></p><ul class="ne-ul"><li id="ufdb404b2"><a href="https://github.com/xiazeyu/live2d-widget-models" data-href="https://github.com/xiazeyu/live2d-widget-models" target="_blank" class="ne-link"><span class="ne-text">https://github.com/xiazeyu/live2d-widget-models</span></a></li><li id="u4b8b184e"><a href="https://huaji8.top/post/live2d-plugin-2.0/" data-href="https://huaji8.top/post/live2d-plugin-2.0/" class="ne-link"><span class="ne-text">https://huaji8.top/post/live2d-plugin-2.0/</span></a></li></ul><h2 id="ayEhu"><span class="ne-text">附：给live2d添加看板功能</span></h2><p id="u85e2afa1" class="ne-p"><span class="ne-text">上述所有步骤完成live2d的安装配置，在此基础上还可以给live2d添加看板功能，就如本文第一张图片那种效果</span></p><h3 id="MW7kI"><span class="ne-text">添加看板样式</span></h3><p id="uc900e14f" class="ne-p"><span class="ne-text">添加静态样式即可：</span></p><details class="lake-collapse"><summary id="u319b4002"><span class="ne-text">_live2d/remu.styl</span></summary><pre><code class="css">// 收缩之后的左下角的贴附样式#waifu-toggle &#123;  background-color: #3f51b5;  border-radius: 5px;  bottom: 66px;  color: #fff;  cursor: pointer;  font-size: 14px;  left: 5px;  margin-left: -90px;  padding: 5px 2px 5px 5px;  position: fixed;  transition: margin-left 1s;  width: 60px;  writing-mode: vertical-rl;&#125;#waifu-toggle.waifu-toggle-active &#123;  margin-left: -40px;&#125;#waifu-toggle.waifu-toggle-active:hover &#123;  margin-left: -30px;&#125;// 容纳雷姆的盒子#waifu &#123;  bottom: -1000px;  left: 0;  line-height: 0;  margin-bottom: -10px;  position: fixed;  transform: translateY(3px);  transition: transform .3s ease-in-out, bottom 3s ease-in-out;  z-index: 1;&#125;#waifu:hover &#123;  transform: translateY(0);&#125;// 文字提示框#waifu-tips &#123;  animation: shake 50s ease-in-out 5s infinite;  background-color: rgba(100,149,237, .5);  border: 1px solid rgba(30,144,255, .62);  border-radius: 12px;  box-shadow: 0 3px 15px 2px rgba(191, 158, 118, .2);  font-size: 14px;  line-height: 24px;  margin: -30px 20px;  min-height: 70px;  opacity: 0;  overflow: hidden;  padding: 5px 10px;  position: absolute;  text-overflow: ellipsis;  transition: opacity 1s;  width: 180px;  word-break: break-all;&#125;#waifu-tips.waifu-tips-active &#123;  opacity: 1;  transition: opacity .2s;&#125;#waifu-tips span color: rgba(0,0,255,.7); // 文字提示框中的重点字// 容纳雷姆的外加小盒子#waifu #live2d &#123;  cursor: grab;  height: 300px;  position: relative;  width: 200px;&#125;#waifu #live2d:active &#123;  cursor: grabbing;&#125;// 小按钮组件#waifu-tool &#123;  color: #0684bd;  opacity: 0.5;  position: absolute;  left: 5px    top: 70px;  transition: opacity 1s;&#125;#waifu:hover #waifu-tool &#123;  opacity: 1;&#125;// 小按钮的span样式#waifu-tool span &#123;   color: #0684bd;  cursor: pointer;  display: block;  line-height: 30px;  text-align: center;  transition: color .3s;&#125;#waifu-tool span:hover &#123;  color: #0684bd; /* #34495e */ &#125;@keyframes shake &#123;  2% &#123;    transform: translate(.5px, -1.5px) rotate(-.5deg);  &#125;  4% &#123;    transform: translate(.5px, 1.5px) rotate(1.5deg);  &#125;  6% &#123;    transform: translate(1.5px, 1.5px) rotate(1.5deg);  &#125;  8% &#123;    transform: translate(2.5px, 1.5px) rotate(.5deg);  &#125;  10% &#123;    transform: translate(.5px, 2.5px) rotate(.5deg);  &#125;  12% &#123;    transform: translate(1.5px, 1.5px) rotate(.5deg);  &#125;  14% &#123;    transform: translate(.5px, .5px) rotate(.5deg);  &#125;  16% &#123;    transform: translate(-1.5px, -.5px) rotate(1.5deg);  &#125;  18% &#123;    transform: translate(.5px, .5px) rotate(1.5deg);  &#125;  20% &#123;    transform: translate(2.5px, 2.5px) rotate(1.5deg);  &#125;  22% &#123;    transform: translate(.5px, -1.5px) rotate(1.5deg);  &#125;  24% &#123;    transform: translate(-1.5px, 1.5px) rotate(-.5deg);  &#125;  26% &#123;    transform: translate(1.5px, .5px) rotate(1.5deg);  &#125;  28% &#123;    transform: translate(-.5px, -.5px) rotate(-.5deg);  &#125;  30% &#123;    transform: translate(1.5px, -.5px) rotate(-.5deg);  &#125;  32% &#123;    transform: translate(2.5px, -1.5px) rotate(1.5deg);  &#125;  34% &#123;    transform: translate(2.5px, 2.5px) rotate(-.5deg);  &#125;  36% &#123;    transform: translate(.5px, -1.5px) rotate(.5deg);  &#125;  38% &#123;    transform: translate(2.5px, -.5px) rotate(-.5deg);  &#125;  40% &#123;    transform: translate(-.5px, 2.5px) rotate(.5deg);  &#125;  42% &#123;    transform: translate(-1.5px, 2.5px) rotate(.5deg);  &#125;  44% &#123;    transform: translate(-1.5px, 1.5px) rotate(.5deg);  &#125;  46% &#123;    transform: translate(1.5px, -.5px) rotate(-.5deg);  &#125;  48% &#123;    transform: translate(2.5px, -.5px) rotate(.5deg);  &#125;  50% &#123;    transform: translate(-1.5px, 1.5px) rotate(.5deg);  &#125;  52% &#123;    transform: translate(-.5px, 1.5px) rotate(.5deg);  &#125;  54% &#123;    transform: translate(-1.5px, 1.5px) rotate(.5deg);  &#125;  56% &#123;    transform: translate(.5px, 2.5px) rotate(1.5deg);  &#125;  58% &#123;    transform: translate(2.5px, 2.5px) rotate(.5deg);  &#125;  60% &#123;    transform: translate(2.5px, -1.5px) rotate(1.5deg);  &#125;  62% &#123;    transform: translate(-1.5px, .5px) rotate(1.5deg);  &#125;  64% &#123;    transform: translate(-1.5px, 1.5px) rotate(1.5deg);  &#125;  66% &#123;    transform: translate(.5px, 2.5px) rotate(1.5deg);  &#125;  68% &#123;    transform: translate(2.5px, -1.5px) rotate(1.5deg);  &#125;  70% &#123;    transform: translate(2.5px, 2.5px) rotate(.5deg);  &#125;  72% &#123;    transform: translate(-.5px, -1.5px) rotate(1.5deg);  &#125;  74% &#123;    transform: translate(-1.5px, 2.5px) rotate(1.5deg);  &#125;  76% &#123;    transform: translate(-1.5px, 2.5px) rotate(1.5deg);  &#125;  78% &#123;    transform: translate(-1.5px, 2.5px) rotate(.5deg);  &#125;  80% &#123;    transform: translate(-1.5px, .5px) rotate(-.5deg);  &#125;  82% &#123;    transform: translate(-1.5px, .5px) rotate(-.5deg);  &#125;  84% &#123;    transform: translate(-.5px, .5px) rotate(1.5deg);  &#125;  86% &#123;    transform: translate(2.5px, 1.5px) rotate(.5deg);  &#125;  88% &#123;    transform: translate(-1.5px, .5px) rotate(1.5deg);  &#125;  90% &#123;    transform: translate(-1.5px, -.5px) rotate(-.5deg);  &#125;  92% &#123;    transform: translate(-1.5px, -1.5px) rotate(1.5deg);  &#125;  94% &#123;    transform: translate(.5px, .5px) rotate(-.5deg);  &#125;  96% &#123;    transform: translate(2.5px, -.5px) rotate(-.5deg);  &#125;  98% &#123;    transform: translate(-1.5px, -1.5px) rotate(-.5deg);  &#125;  0%, 100% &#123;    transform: translate(0, 0) rotate(0);  &#125;&#125;</code></pre></details><h3 id="ZDamL"><span class="ne-text">添加看板逻辑代码</span></h3><details class="lake-collapse"><summary id="ub489a590"><span class="ne-text">./part/live2d.js</span></summary><pre><code class="javascript">function loadWidget(config) &#123;  let &#123; waifuPath, apiPath, cdnPath &#125; = config;  let useCDN = false, modelList;  if (typeof cdnPath === &amp;quot;string&amp;quot;) &#123;    useCDN = true;    if (!cdnPath.endsWith(&amp;quot;/&amp;quot;)) cdnPath += &amp;quot;/&amp;quot;;  &#125; else if (typeof apiPath === &amp;quot;string&amp;quot;) &#123;    if (!apiPath.endsWith(&amp;quot;/&amp;quot;)) apiPath += &amp;quot;/&amp;quot;;  &#125; else &#123;    console.error(&amp;quot;Invalid initWidget argument!&amp;quot;);    return;  &#125;  localStorage.removeItem(&amp;quot;waifu-display&amp;quot;);  sessionStorage.removeItem(&amp;quot;waifu-text&amp;quot;);  document.body.insertAdjacentHTML(&amp;quot;beforeend&amp;quot;, `&amp;lt;div id=&amp;quot;waifu&amp;quot;&amp;gt;                &amp;lt;div id=&amp;quot;waifu-tips&amp;quot;&amp;gt;&amp;lt;/div&amp;gt;                &amp;lt;canvas id=&amp;quot;live2d&amp;quot;&amp;gt;&amp;lt;/canvas&amp;gt;                &amp;lt;div id=&amp;quot;waifu-tool&amp;quot;&amp;gt;                    &amp;lt;span class=&amp;quot;fa fa-comments&amp;quot;&amp;gt;&amp;lt;/span&amp;gt;                    &amp;lt;span class=&amp;quot;fa fa-link&amp;quot;&amp;gt;&amp;lt;/span&amp;gt;                    &amp;lt;span class=&amp;quot;fa fa-compress&amp;quot;&amp;gt;&amp;lt;/span&amp;gt;                &amp;lt;/div&amp;gt;            &amp;lt;/div&amp;gt;`);  // https://stackoverflow.com/questions/24148403/trigger-css-transition-on-appended-element  setTimeout(() =&amp;gt; &#123;    document.getElementById(&amp;quot;waifu&amp;quot;).style.bottom = 0;  &#125;, 0);  function randomSelection(obj) &#123;    return Array.isArray(obj) ? obj[Math.floor(Math.random() * obj.length)] : obj;  &#125;  // 检测用户活动状态，并在空闲时显示消息  let userAction = false,    userActionTimer,    messageTimer,    messageArray = [&amp;quot;好久不见，日子过得好快呢……&amp;quot;, &amp;quot;嗨～欢迎访问该站点！&amp;quot;, &amp;quot;记得把小家加入 Adblock 白名单哦！&amp;quot;];  window.addEventListener(&amp;quot;mousemove&amp;quot;, () =&amp;gt; userAction = true);  window.addEventListener(&amp;quot;keydown&amp;quot;, () =&amp;gt; userAction = true);  setInterval(() =&amp;gt; &#123;    if (userAction) &#123;      userAction = false;      clearInterval(userActionTimer);      userActionTimer = null;    &#125; else if (!userActionTimer) &#123;      userActionTimer = setInterval(() =&amp;gt; &#123;        showMessage(randomSelection(messageArray), 6000, 9);      &#125;, 20000);    &#125;  &#125;, 1000);  (function registerEventListener() &#123;    // TODO: 第一个icon，说话    document.querySelector(&amp;quot;#waifu-tool .fa-comments&amp;quot;).addEventListener(&amp;quot;click&amp;quot;, showHitokoto);    // TODO: 第二个icon，貌似是什么游戏    // document.querySelector(&amp;quot;#waifu-tool .fa-paper-plane&amp;quot;).addEventListener(&amp;quot;click&amp;quot;, () =&amp;gt; &#123;    //     if (window.Asteroids) &#123;    //         if (!window.ASTEROIDSPLAYERS) window.ASTEROIDSPLAYERS = [];    //         window.ASTEROIDSPLAYERS.push(new Asteroids());    //     &#125; else &#123;    //         const script = document.createElement(&amp;quot;script&amp;quot;);    //         script.src = &amp;quot;https://cdn.jsdelivr.net/gh/stevenjoezhang/asteroids/asteroids.js&amp;quot;;    //         document.head.appendChild(script);    //     &#125;    // &#125;);    // TODO: 第三个icon，换人物    // document.querySelector(&amp;quot;#waifu-tool .fa-user-circle&amp;quot;).addEventListener(&amp;quot;click&amp;quot;, loadOtherModel);    // TODO: 第四个icon，应该是换装    // document.querySelector(&amp;quot;#waifu-tool .fa-street-view&amp;quot;).addEventListener(&amp;quot;click&amp;quot;, loadRandModel);    // TODO: 第五个icon，拍照    // document.querySelector(&amp;quot;#waifu-tool .fa-camera-retro&amp;quot;).addEventListener(&amp;quot;click&amp;quot;, () =&amp;gt; &#123;    //     showMessage(&amp;quot;照好了嘛，是不是很可爱呢？&amp;quot;, 6000, 9);    //     Live2D.captureName = &amp;quot;photo.png&amp;quot;;    //     Live2D.captureFrame = true;    // &#125;);    // TODO: 第六个icon，原项目地址    document.querySelector(&amp;quot;#waifu-tool .fa-link&amp;quot;).addEventListener(&amp;quot;click&amp;quot;, () =&amp;gt; &#123;      open(&amp;quot;https://www.wztlink1013.com/about/&amp;quot;);    &#125;);    // TODO: 第七个icon，隐藏看板娘    document.querySelector(&amp;quot;#waifu-tool .fa-compress&amp;quot;).addEventListener(&amp;quot;click&amp;quot;, () =&amp;gt; &#123;      localStorage.setItem(&amp;quot;waifu-display&amp;quot;, Date.now());      showMessage(&amp;quot;愿你有一天能与重要的人重逢。&amp;quot;, 2000, 11);      document.getElementById(&amp;quot;waifu&amp;quot;).style.bottom = &amp;quot;-500px&amp;quot;; // 隐藏大盒子      setTimeout(() =&amp;gt; &#123;        document.getElementById(&amp;quot;waifu&amp;quot;).style.display = &amp;quot;none&amp;quot;;        document.getElementById(&amp;quot;waifu-toggle&amp;quot;).classList.add(&amp;quot;waifu-toggle-active&amp;quot;);      &#125;, 3000);    &#125;);    window.addEventListener(&amp;quot;copy&amp;quot;, () =&amp;gt; &#123;      showMessage(&amp;quot;你都复制了些什么呀，转载要记得加上出处哦！&amp;quot;, 6000, 9);    &#125;);    window.addEventListener(&amp;quot;visibilitychange&amp;quot;, () =&amp;gt; &#123;      if (!document.hidden) showMessage(&amp;quot;哇，你终于回来了～&amp;quot;, 6000, 9);    &#125;);  &#125;)();  // 首页展示特定文字  (function welcomeMessage() &#123;    let text;    if (location.pathname === &amp;quot;/&amp;quot;) &#123; // 如果是主页      const now = new Date().getHours();      if (now &amp;gt; 5 &amp;amp;&amp;amp; now &amp;lt;= 7) text = &amp;quot;早上好！一日之计在于晨，美好的一天就要开始了。&amp;quot;;      else if (now &amp;gt; 7 &amp;amp;&amp;amp; now &amp;lt;= 11) text = &amp;quot;上午好！工作顺利嘛，不要久坐，多起来走动走动哦！&amp;quot;;      else if (now &amp;gt; 11 &amp;amp;&amp;amp; now &amp;lt;= 13) text = &amp;quot;中午了，工作了一个上午，现在是午餐时间！&amp;quot;;      else if (now &amp;gt; 13 &amp;amp;&amp;amp; now &amp;lt;= 17) text = &amp;quot;午后很容易犯困呢，今天的运动目标完成了吗？&amp;quot;;      else if (now &amp;gt; 17 &amp;amp;&amp;amp; now &amp;lt;= 19) text = &amp;quot;傍晚了！窗外夕阳的景色很美丽呢，最美不过夕阳红～&amp;quot;;      else if (now &amp;gt; 19 &amp;amp;&amp;amp; now &amp;lt;= 21) text = &amp;quot;晚上好，今天过得怎么样？&amp;quot;;      else if (now &amp;gt; 21 &amp;amp;&amp;amp; now &amp;lt;= 23) text = [&amp;quot;已经这么晚了呀，早点休息吧，晚安～&amp;quot;, &amp;quot;深夜时要爱护眼睛呀！&amp;quot;];      else text = &amp;quot;你是夜猫子呀？这么晚还不睡觉，明天起的来嘛？&amp;quot;;    &#125; else if (document.referrer !== &amp;quot;&amp;quot;) &#123;      const referrer = new URL(document.referrer),        domain = referrer.hostname.split(&amp;quot;.&amp;quot;)[1];      if (location.hostname === referrer.hostname) text = `欢迎阅读&amp;lt;span&amp;gt;「$&#123;document.title.split(&amp;quot; - &amp;quot;)[0]&#125;」&amp;lt;/span&amp;gt;`;      else if (domain === &amp;quot;baidu&amp;quot;) text = `Hello！来自 百度搜索 的朋友&amp;lt;br&amp;gt;你是搜索 &amp;lt;span&amp;gt;$&#123;referrer.search.split(&amp;quot;&amp;amp;wd=&amp;quot;)[1].split(&amp;quot;&amp;amp;&amp;quot;)[0]&#125;&amp;lt;/span&amp;gt; 找到的我吗？`;      else if (domain === &amp;quot;so&amp;quot;) text = `Hello！来自 360搜索 的朋友&amp;lt;br&amp;gt;你是搜索 &amp;lt;span&amp;gt;$&#123;referrer.search.split(&amp;quot;&amp;amp;q=&amp;quot;)[1].split(&amp;quot;&amp;amp;&amp;quot;)[0]&#125;&amp;lt;/span&amp;gt; 找到的我吗？`;      else if (domain === &amp;quot;google&amp;quot;) text = `Hello！来自 谷歌搜索 的朋友&amp;lt;br&amp;gt;欢迎阅读&amp;lt;span&amp;gt;「$&#123;document.title.split(&amp;quot; - &amp;quot;)[0]&#125;」&amp;lt;/span&amp;gt;`;      else text = `Hello！来自 &amp;lt;span&amp;gt;$&#123;referrer.hostname&#125;&amp;lt;/span&amp;gt; 的朋友`;    &#125; else &#123;      text = `欢迎阅读&amp;lt;span&amp;gt;「$&#123;document.title.split(&amp;quot; - &amp;quot;)[0]&#125;」&amp;lt;/span&amp;gt;`;    &#125;    showMessage(text, 7000, 8);  &#125;)();  // TODO: 服务于第一个icon  function showHitokoto() &#123;    // 增加 hitokoto.cn 的 API    fetch(&amp;quot;https://v1.hitokoto.cn&amp;quot;)      .then(response =&amp;gt; response.json())      .then(result =&amp;gt; &#123;        const text = `这句一言来自 &amp;lt;span&amp;gt;「$&#123;result.from&#125;」&amp;lt;/span&amp;gt;，是 &amp;lt;span&amp;gt;$&#123;result.creator&#125;&amp;lt;/span&amp;gt; 在 hitokoto.cn 投稿的。`;        showMessage(result.hitokoto, 6000, 9);        setTimeout(() =&amp;gt; &#123;          showMessage(text, 4000, 9);        &#125;, 6000);      &#125;);  &#125;  // 没有bug展示特定状态下的文字  function showMessage(text, timeout, priority) &#123;    if (!text || (sessionStorage.getItem(&amp;quot;waifu-text&amp;quot;) &amp;amp;&amp;amp; sessionStorage.getItem(&amp;quot;waifu-text&amp;quot;) &amp;gt; priority)) return;    if (messageTimer) &#123;      clearTimeout(messageTimer);      messageTimer = null;    &#125;    text = randomSelection(text);    sessionStorage.setItem(&amp;quot;waifu-text&amp;quot;, priority);    const tips = document.getElementById(&amp;quot;waifu-tips&amp;quot;);    tips.innerHTML = text;    tips.classList.add(&amp;quot;waifu-tips-active&amp;quot;);    messageTimer = setTimeout(() =&amp;gt; &#123;      sessionStorage.removeItem(&amp;quot;waifu-text&amp;quot;);      tips.classList.remove(&amp;quot;waifu-tips-active&amp;quot;);    &#125;, timeout);  &#125;&#125;function initWidget(config, apiPath) &#123;  if (typeof config === &amp;quot;string&amp;quot;) config = &#123; waifuPath: config, apiPath &#125;;  document.body.insertAdjacentHTML(&amp;quot;beforeend&amp;quot;, `&amp;lt;div id=&amp;quot;waifu-toggle&amp;quot;&amp;gt;                &amp;lt;span&amp;gt;雷姆&amp;lt;/span&amp;gt;            &amp;lt;/div&amp;gt;`);  const toggle = document.getElementById(&amp;quot;waifu-toggle&amp;quot;);  toggle.addEventListener(&amp;quot;click&amp;quot;, () =&amp;gt; &#123;    toggle.classList.remove(&amp;quot;waifu-toggle-active&amp;quot;);    if (toggle.getAttribute(&amp;quot;first-time&amp;quot;)) &#123;      loadWidget(config);      toggle.removeAttribute(&amp;quot;first-time&amp;quot;);    &#125; else &#123;      localStorage.removeItem(&amp;quot;waifu-display&amp;quot;);      document.getElementById(&amp;quot;waifu&amp;quot;).style.display = &amp;quot;&amp;quot;;      setTimeout(() =&amp;gt; &#123;        document.getElementById(&amp;quot;waifu&amp;quot;).style.bottom = 0;      &#125;, 0);    &#125;    // TODO: 一开始判断是否隐藏雷姆代码  &#125;);  if (localStorage.getItem(&amp;quot;waifu-display&amp;quot;) &amp;amp;&amp;amp; Date.now() - localStorage.getItem(&amp;quot;waifu-display&amp;quot;) &amp;lt;= 86400000) &#123;    toggle.setAttribute(&amp;quot;first-time&amp;quot;, true);    setTimeout(() =&amp;gt; &#123;      toggle.classList.add(&amp;quot;waifu-toggle-active&amp;quot;);    &#125;, 0);  &#125; else &#123;    loadWidget(config);  &#125;&#125;export &#123;  initWidget, //导出对象&#125;</code></pre></details><p id="u09d47608" class="ne-p"><span class="ne-text">在base.js中初始化看板逻辑代码</span></p><pre><code class="javascript">import &#123;initWidget&#125; from &#39;./part/live2d.js&#39;;// live2d 初始化initWidget(&#123;  waifuPath: &amp;quot;/data/remu.json&amp;quot;,  cdnPath: &amp;quot;https://github.com/fghrsh/live2d_api/tree/1.0.1/&amp;quot;&#125;);</code></pre><h3 id="kOl6b"><span class="ne-text">最终看板效果</span></h3><p id="u6ec1d33d" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2022/png/1484158/1665116671351-7c3e9921-cb79-4902-822f-a09a3ce422ae.png" width="1599.9999364217147" id="u50ba46fe" class="ne-image"></p><h2 id="op5Lz"><span class="ne-text">参考</span></h2><ul class="ne-ul"><li id="u96f1ffee"><span class="ne-text">live2d API文档：</span><a href="https://l2dwidget.js.org/docs/class/src/index.js~L2Dwidget.html#instance-method-init" data-href="https://l2dwidget.js.org/docs/class/src/index.js~L2Dwidget.html#instance-method-init" target="_blank" class="ne-link"><span class="ne-text">https://l2dwidget.js.org/docs/class/src/index.js~L2Dwidget.html#instance-method-init</span></a></li><li id="uadc38fc5"><span class="ne-text">封装为npm插件模型：</span><a href="https://huaji8.top/post/live2d-plugin-2.0/" data-href="https://huaji8.top/post/live2d-plugin-2.0/" target="_blank" class="ne-link"><span class="ne-text">https://huaji8.top/post/live2d-plugin-2.0/</span></a></li><li id="0b0eccc822d2e4f83803798ba3120030"><span class="ne-text">自定义扩展模型：</span><a href="https://github.com/luanshizhimei/live2d_models_collect" data-href="https://github.com/luanshizhimei/live2d_models_collect" target="_blank" class="ne-link"><span class="ne-text">https://github.com/luanshizhimei/live2d_models_collect</span></a></li><li id="u845fdd61"><span class="ne-text">vscode live2d扩展：</span><a href="https://github.com/ezshine/vscode-rainbow-fart-waifu" data-href="https://github.com/ezshine/vscode-rainbow-fart-waifu" target="_blank" class="ne-link"><span class="ne-text">https://github.com/ezshine/vscode-rainbow-fart-waifu</span></a></li><li id="u1b0da9ef"><a href="https://github.com/fghrsh/live2d_api/tree/1.0.1/" data-href="https://github.com/fghrsh/live2d_api/tree/1.0.1/" target="_blank" class="ne-link"><span class="ne-text">https://github.com/fghrsh/live2d_api/tree/1.0.1/</span></a></li></ul><ul class="ne-tl"><li id="u57f3d399"><strong><span class="ne-text" style="background-color: #FADB14">TODO: </span></strong><span class="ne-text">优化资源加载方式，模型的静态资源使用外链的形式较为合理，以及插件每次在开发模式下都会编译文件，都会带来开发环境以及生产环境上的不便</span></li></ul></div>]]></content:encoded>
      
      
      <category domain="https://www.wztlink1013.com/categories/%E5%85%B6%E4%BB%96/">其他</category>
      
      <category domain="https://www.wztlink1013.com/categories/%E5%85%B6%E4%BB%96/%E7%8E%A9%E8%BD%AC%E5%8D%9A%E5%AE%A2/">玩转博客</category>
      
      
      
      <comments>https://www.wztlink1013.com/blog/wrygmp/#disqus_thread</comments>
      
    </item>
    
  </channel>
</rss>
