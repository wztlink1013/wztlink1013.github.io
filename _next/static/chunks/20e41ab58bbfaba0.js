(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,65316,e=>{"use strict";var t=e.i(30655),a=e.i(51999),s=e.i(22071),i=e.i(19056);e.i(35776);var l=e.i(71645),r=e.i(12276),o=e.i(43476);function n({editor:e}){(0,a.useHookUpdate)(e);let[t,r]=(0,l.useState)(!1);return(0,o.jsxs)(a.Dialog,{onOpenChange:r,open:t,children:[(0,o.jsx)(a.DialogTrigger,{type:"button","aria-label":"Upload Image",className:(0,i.twMerge)((0,a.toggleVariants)()),disabled:!e.can().setImage({src:""})||!e.isEditable,children:(0,o.jsx)(s.Image,{className:"size-4"})}),(0,o.jsxs)(a.DialogContent,{onCloseAutoFocus:e=>e.preventDefault(),children:[(0,o.jsx)(a.DialogTitle,{children:"Upload Image"}),(0,o.jsx)(a.DialogDescription,{children:"Attach your own image to comment."}),(0,o.jsx)(c,{editor:e,onClose:()=>{r(!1),e.commands.focus()}})]})]})}function c({editor:e,onClose:a}){let n=(0,s.useStorage)(),[c,d]=(0,l.useState)(null),u=(0,s.useObjectURL)(c),g=(0,l.useId)(),m=(0,r.default)("fc-upload-image",(e,{arg:t})=>n.upload(t.file),{onSuccess(t){e.commands.setImage({src:t.url,alt:t.alt,width:t.width,height:t.height}),a()}});return(0,o.jsxs)("form",{className:"flex flex-col",onSubmit:e=>{e.preventDefault(),e.stopPropagation(),c&&m.trigger({file:c})},children:[(0,o.jsx)("input",{accept:"image/png, image/jpeg",hidden:!0,id:g,onChange:e=>{e.target.files&&e.target.files.length>0&&d(e.target.files.item(0))},type:"file",disabled:m.isMutating}),u?(0,o.jsxs)("label",{className:(0,i.twMerge)("relative overflow-hidden rounded-xl border border-fc-border bg-fc-muted",m.isMutating?"cursor-not-allowed":"cursor-pointer"),htmlFor:g,children:[m.isMutating?(0,o.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-2 text-center text-xs backdrop-blur-lg backdrop-brightness-50",children:[(0,o.jsx)(t.Spinner,{className:"size-8"}),"Uploading"]}):null,(0,o.jsx)("img",{alt:"preview",className:"mx-auto max-h-96",src:u})]}):(0,o.jsx)("label",{className:"cursor-pointer rounded-xl border border-fc-border bg-fc-background p-4 text-center text-sm font-medium text-fc-muted-foreground",htmlFor:g,children:"Upload Image"}),(0,o.jsx)("div",{className:"mt-4 flex gap-1",children:(0,o.jsx)("button",{className:(0,i.twMerge)((0,s.buttonVariants)()),disabled:m.isMutating,type:"submit",children:"Save"})})]})}e.s(["default",()=>n])}]);