<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>å°¼é‡‡èˆ¬åœ°æŠ’æƒ…</title>
  <icon>https://www.wztlink1013.com/favicon.ico</icon>
  <subtitle>ä»€ä¹ˆéƒ½ä¸èˆå¼ƒï¼Œä»€ä¹ˆä¹Ÿæ”¹å˜ä¸äº†</subtitle>
  <link href="https://www.wztlink1013.com/atom.xml" rel="self"/>
  
  <link href="https://www.wztlink1013.com/"/>
  <updated>2024-11-16T19:50:36.000Z</updated>
  <id>https://www.wztlink1013.com/</id>
  
  <author>
    <name>å°¼é‡‡èˆ¬åœ°æŠ’æƒ…</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Array.sortæ–¹æ³•å¯¹è±¡æ•°ç»„æŒ‰ç…§å¯¹è±¡å¤šä¸ªå±æ€§è‡ªå®šä¹‰æ’åº</title>
    <link href="https://www.wztlink1013.com/blog/zc9z0brbpges03gt/"/>
    <id>https://www.wztlink1013.com/blog/zc9z0brbpges03gt/</id>
    <published>2024-11-12T01:15:24.000Z</published>
    <updated>2024-11-16T19:50:36.000Z</updated>
    
    <content type="html"><![CDATA[<div class="lake-content" typography="classic"><pre data-language="javascript" id="ZdrYM" class="ne-codeblock language-javascript"><code>data.sort((a, b) =&gt; &#123;  // å±æ€§ä¼˜å…ˆçº§ä¾æ¬¡æ¯”è¾ƒ  for (const s of sortListData) &#123;    if (!s.sortField || !s.sortOrder) continue;    const aValue = a[s.sortField];    const bValue = b[s.sortField];    if (aValue == bValue) continue;    // å€¼ä¸ç›¸ç­‰æ—¶ ä½¿ç”¨miniå†…ç½®æ’åºè¿›è¡Œæ’åº    const sortFun = grid._dataSource._getSortFnByField(s.sortField, 'string', s.sortOrder === 'desc');    return sortFun(a, b);  &#125;  return 0;&#125;);</code></pre><ul class="ne-ul"><li id="u923b8825" data-lake-index-type="0"><span class="ne-text">grid._dataSource._getSortFnByFieldï¼šä¸€ä¸ªæŒ‡å®šæ’åºè§„åˆ™ï¼Œå¹¶ä¸”åªè¿”å›1å’Œ-1ï¼Œæ‰€ä»¥éœ€è¦ç¬¬äº”è¡Œå’Œç¬¬å…­è¡Œçš„åˆ¤æ–­ä»£ç </span></li></ul></div>]]></content>
    
    
      
      
        
        
    <summary type="html">

&lt;div class=&quot;lake-content&quot; typography=&quot;classic&quot;&gt;&lt;pre data-language=&quot;javascript&quot; id=&quot;ZdrYM&quot; class=&quot;ne-codeblock</summary>
        
      
    
    
    
    <category term="Webå¼€å‘" scheme="https://www.wztlink1013.com/categories/Web%E5%BC%80%E5%8F%91/"/>
    
    <category term="JavaScript" scheme="https://www.wztlink1013.com/categories/Web%E5%BC%80%E5%8F%91/JavaScript/"/>
    
    <category term="ECMAScript" scheme="https://www.wztlink1013.com/categories/Web%E5%BC%80%E5%8F%91/JavaScript/ECMAScript/"/>
    
    
  </entry>
  
  <entry>
    <title>SPAé¡¹ç›®é¦–å±ä¼˜åŒ–</title>
    <link href="https://www.wztlink1013.com/blog/xtipoqq45ui63kh6/"/>
    <id>https://www.wztlink1013.com/blog/xtipoqq45ui63kh6/</id>
    <published>2024-11-07T23:42:35.000Z</published>
    <updated>2024-11-16T19:50:36.000Z</updated>
    
    <content type="html"><![CDATA[<div class="lake-content" typography="classic"><ol class="ne-ol"><li id="ud70d8baa" data-lake-index-type="0"><span class="ne-text" style="font-size: 16px">äº§ç”ŸåŸå› <br>reactæ˜¯å•é¡µé¢åº”ç”¨ï¼Œhtmlé jsç”Ÿæˆï¼Œå¦‚æœé¦–å±éœ€è¦åŠ è½½å¾ˆå¤§çš„jsæ–‡ä»¶(app.js)ï¼Œæ‰€ä»¥å½“ç½‘ç»œä¸å¥½çš„æ—¶å€™ä¼šæœ‰ä¸€æ®µæ—¶é—´çš„ç™½å±ç°è±¡ã€‚</span></li><li id="u4746c1ee" data-lake-index-type="0"><span class="ne-text" style="font-size: 16px">è§£å†³æ–¹æ³•</span></li></ol><ul class="ne-list-wrap"><ul ne-level="1" class="ne-ul"><li id="u50ac17f4" data-lake-index-type="0"><span class="ne-text" style="font-size: 16px">ä¼˜åŒ–webpackå‡å°‘æ¨¡å—æ‰“åŒ…ä½“ç§¯ï¼ŒæŒ‰éœ€åŠ è½½ã€‚</span></li><li id="u27f4c811" data-lake-index-type="0"><span class="ne-text" style="font-size: 16px">ä½¿ç”¨ssræœåŠ¡ç«¯æ¸²æŸ“ï¼Œåœ¨æœåŠ¡ç«¯äº‹å…ˆæ‹¼è£…å¥½é¦–é¡µæ‰€éœ€çš„htmlã€å¯¹æœåŠ¡å™¨èµ„æºæ¶ˆè€—å¤§ã€‘</span></li><li id="udc74c026" data-lake-index-type="0"><span class="ne-text" style="font-size: 16px">é¦–é¡µåŠ loadingï¼ˆæ­£å¥½å¯ä»¥æ˜¯å¹¿å‘Šæ—¶é—´ï¼‰æˆ–éª¨æ¶å±</span></li><li id="uff8c7a14" data-lake-index-type="0"><strong><span class="ne-text" style="font-size: 16px; color: #DF2A3F">ä½¿ç”¨é¦–å±SSR+è·³è½¬SPAæ–¹å¼æ¥ä¼˜åŒ–ã€‚ã€åªæ˜¯åœ¨é¦–é¡µä½¿ç”¨ssrã€‘</span></strong></li><li id="u537fd6a2" data-lake-index-type="0"><span class="ne-text" style="font-size: 16px">ä½¿ç”¨CDNåŠ è½½èµ„æºã€‚</span><a href="https://www.jianshu.com/p/1dae6e1680ff" data-href="https://www.jianshu.com/p/1dae6e1680ff" target="_blank" class="ne-link"><span class="ne-text" style="font-size: 16px">cdnåŠ é€ŸåŸç†</span></a><a href="https://www.cnblogs.com/crazylqy/p/7110357.html" data-href="https://www.cnblogs.com/crazylqy/p/7110357.html" target="_blank" class="ne-link"><span class="ne-text" style="font-size: 16px">DNSè¿‡ç¨‹</span></a></li><li id="u2cd4671e" data-lake-index-type="0"><span class="ne-text" style="font-size: 16px">æœåŠ¡å™¨å¼€å¯gizpåŠ é€Ÿã€‚</span></li><li id="u3217f519" data-lake-index-type="0"><span class="ne-text" style="font-size: 16px; color: #DF2A3F">æ”¹å•é¡µåº”ç”¨ä¸ºå¤šé¡µåº”ç”¨ã€‚</span></li><li id="u4cebb8d9" data-lake-index-type="0"><span class="ne-text" style="font-size: 16px">å›¾ç‰‡å‹ç¼©å°å›¾æ ‡ç”¨é›ªç¢§å›¾ï¼Œä¼˜å…ˆä½¿ç”¨webpæ ¼å¼ã€‚å›¾ç‰‡æ‡’åŠ è½½ç­‰ç­‰</span></li><li id="u37083231" data-lake-index-type="0"><span class="ne-text" style="font-size: 16px">åˆç†ä½¿ç”¨ç¼“å­˜ã€‚</span></li><li id="uccd24921" data-lake-index-type="0"><span class="ne-text" style="font-size: 16px">ä¼˜åŒ–ä»£ç é€»è¾‘ï¼ŒæŠŠä¸»è¦çš„jså’Œæ¬¡è¦jsåˆ†å¼€æ¥ã€‚</span></li></ul></ul></div>]]></content>
    
    
      
      
        
        
    <summary type="html">

&lt;div class=&quot;lake-content&quot; typography=&quot;classic&quot;&gt;&lt;ol class=&quot;ne-ol&quot;&gt;&lt;li id=&quot;ud70d8baa&quot; data-lake-index-type=&quot;0&quot;&gt;&lt;span class=&quot;ne-text&quot;</summary>
        
      
    
    
    
    <category term="Webå¼€å‘" scheme="https://www.wztlink1013.com/categories/Web%E5%BC%80%E5%8F%91/"/>
    
    <category term="å‰ç«¯æ€§èƒ½ä¼˜åŒ–" scheme="https://www.wztlink1013.com/categories/Web%E5%BC%80%E5%8F%91/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
    
  </entry>
  
  <entry>
    <title>serveï¼šä¸€ä¸ªç®€å•çš„é™æ€æ–‡ä»¶æœåŠ¡å™¨</title>
    <link href="https://www.wztlink1013.com/blog/le2wy264p9sm8vem/"/>
    <id>https://www.wztlink1013.com/blog/le2wy264p9sm8vem/</id>
    <published>2024-11-03T21:52:22.000Z</published>
    <updated>2024-11-16T19:50:36.000Z</updated>
    
    <content type="html"><![CDATA[<div class="lake-content" typography="classic"><ul class="ne-ul"><li id="u5a657014" data-lake-index-type="0"><a href="https://www.npmjs.com/package/serve" data-href="https://www.npmjs.com/package/serve" target="_blank" class="ne-link"><span class="ne-text">https://www.npmjs.com/package/serve</span></a></li></ul><pre data-language="bash" id="S3Ooj" class="ne-codeblock language-bash"><code>npm install --global serve</code></pre><ul class="ne-ul"><li id="u09b4e296" data-lake-index-type="0"><span class="ne-text">åœ¨æ–‡ä»¶å¤¹ä¸‹è¾“å…¥å¯åŠ¨å‘½ä»¤</span></li></ul><pre data-language="bash" id="KOSP9" class="ne-codeblock language-bash"><code>serve</code></pre><p id="u24aaaf8b" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1730699721153-e2baf7c4-f014-46d9-89d5-0d4bab38a445.png" width="960" id="ua3bc2309" class="ne-image"></p></div>]]></content>
    
    
      
      
        
        
    <summary type="html">

&lt;div class=&quot;lake-content&quot; typography=&quot;classic&quot;&gt;&lt;ul class=&quot;ne-ul&quot;&gt;&lt;li id=&quot;u5a657014&quot; data-lake-index-type=&quot;0&quot;&gt;&lt;a</summary>
        
      
    
    
    
    <category term="Webå¼€å‘" scheme="https://www.wztlink1013.com/categories/Web%E5%BC%80%E5%8F%91/"/>
    
    <category term="Node.js" scheme="https://www.wztlink1013.com/categories/Web%E5%BC%80%E5%8F%91/Node-js/"/>
    
    
  </entry>
  
  <entry>
    <title>FATAL ERROR: Reached heap limit Allocation failed - JavaScript heap out of memory</title>
    <link href="https://www.wztlink1013.com/blog/wsm9wflpwozi8hdx/"/>
    <id>https://www.wztlink1013.com/blog/wsm9wflpwozi8hdx/</id>
    <published>2024-11-02T17:59:07.000Z</published>
    <updated>2024-11-16T19:50:36.000Z</updated>
    
    <content type="html"><![CDATA[<div class="lake-content" typography="classic"><p id="uea5afc15" class="ne-p"><span class="ne-text">GitHub Actions æ‰§è¡ŒNodeå‘½ä»¤æ‰“åŒ…ä¸€ä¸ªé¡¹ç›®ï¼ŒæŠ¥é”™</span><code class="ne-code"><span class="ne-text">FATAL ERROR: Reached heap limit Allocation failed - JavaScript heap out of memory</span></code></p><p id="u1030fef5" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1730599267347-28e41456-1148-4db4-8a48-b371a8c89e8b.png" width="1504.5454219353107" id="u34989fb4" class="ne-image"></p><p id="u7de9bd7c" class="ne-p"><span class="ne-text">åŸå› ï¼šGitHub Actions Nodejsè¿è¡Œæ—¶ç¯å¢ƒä½¿ç”¨å†…å­˜æ˜¯æœ‰å¤§å°é™åˆ¶çš„ï¼Œ64ä½ç³»ç»Ÿçº¦ä¸º1.4GBï¼Œ32ä½ç³»ç»Ÿçº¦ä¸º0.7GBï¼Œè¯¥æ¬¡æ„å»ºå†…å­˜ä½¿ç”¨è¶…å‡ºäº†é»˜è®¤å¤§å°</span></p><p id="uab764f01" class="ne-p"><span class="ne-text"></span></p><p id="uf9b586f7" class="ne-p"><span class="ne-text">è§£å†³ï¼š</span><code class="ne-code"><span class="ne-text">export NODE_OPTIONS="--max-old-space-size=4096"</span></code></p><p id="u57d72947" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1730599355754-28c9c22a-1bb2-41aa-97e3-cead4b74871c.png" width="713.6363481687124" id="uc86e10ca" class="ne-image"></p></div>]]></content>
    
    
      
      
        
        
    <summary type="html">

&lt;div class=&quot;lake-content&quot; typography=&quot;classic&quot;&gt;&lt;p id=&quot;uea5afc15&quot; class=&quot;ne-p&quot;&gt;&lt;span class=&quot;ne-text&quot;&gt;GitHub Actions</summary>
        
      
    
    
    
    <category term="Webå¼€å‘" scheme="https://www.wztlink1013.com/categories/Web%E5%BC%80%E5%8F%91/"/>
    
    <category term="Node.js" scheme="https://www.wztlink1013.com/categories/Web%E5%BC%80%E5%8F%91/Node-js/"/>
    
    
  </entry>
  
  <entry>
    <title>UTCæ ¼å¼æ—¶é—´åŠå…¶dayjsç›¸å…³å°è£…</title>
    <link href="https://www.wztlink1013.com/blog/izghbc3thbmzv6al/"/>
    <id>https://www.wztlink1013.com/blog/izghbc3thbmzv6al/</id>
    <published>2024-10-29T21:58:35.000Z</published>
    <updated>2024-11-16T19:50:36.000Z</updated>
    
    <content type="html"><![CDATA[<div class="lake-content" typography="classic"><ul class="ne-ul"><li id="ube69d6f8" data-lake-index-type="0"><code class="ne-code"><span class="ne-text">2024-09-03T16:00:00.000Z</span></code><span class="ne-text">è¿™ç§æ ¼å¼æ˜¯UTCæ ¼å¼</span></li><li id="ud0345811" data-lake-index-type="0"><span class="ne-text">åŒ—äº¬æ—¶é—´æ¯”UTCæ ¼å¼æ—¶é—´å¿«8å°æ—¶</span></li><li id="u27854b5f" data-lake-index-type="0"><span class="ne-text">å›½é™…åŒ–çš„Web APPéœ€è¦ç”¨æˆ·è®¾ç½®åœ°åŒºï¼Œä»¥æ­¤æ¥æ­£ç¡®æ˜¾ç¤ºè‡ªå·±åœ°åŒºçš„ä½ç½®æ—¶é—´</span></li></ul><h2 id="aNrMk"><span class="ne-text">ä½¿ç”¨dayjsåº“</span></h2><h3 id="Jo9Nn"><span class="ne-text">å›½é™…åŒ–</span></h3><ul class="ne-ul"><li id="u052574b3" data-lake-index-type="0"><span class="ne-text">é¦–å…ˆéœ€è¦å¼•å…¥é™æ€èµ„æºï¼š</span><a href="https://github.com/wztlink1013/lyrics/blob/5cd479b933dbfed4b4ca1ce682fa6219a8db5b94/apps/lyrics-client/src/locales/i18n.ts#L6" data-href="https://github.com/wztlink1013/lyrics/blob/5cd479b933dbfed4b4ca1ce682fa6219a8db5b94/apps/lyrics-client/src/locales/i18n.ts#L6" target="_blank" class="ne-link"><span class="ne-text">https://github.com/wztlink1013/lyrics/blob/5cd479b933dbfed4b4ca1ce682fa6219a8db5b94/apps/lyrics-client/src/locales/i18n.ts#L6</span></a></li><li id="u3fe86f5d" data-lake-index-type="0"><span class="ne-text">è·ŸéšWebåº”ç”¨è¿›è¡Œå›½é™…åŒ–åˆ‡æ¢ï¼š</span><a href="https://day.js.org/docs/zh-CN/i18n/loading-into-nodejs" data-href="https://day.js.org/docs/zh-CN/i18n/loading-into-nodejs" target="_blank" class="ne-link"><span class="ne-text">https://day.js.org/docs/zh-CN/i18n/loading-into-nodejs</span></a></li></ul><h3 id="fsQBw"><span class="ne-text">é»˜è®¤UTC+ä½¿ç”¨åœ°åŒºæ’ä»¶å±•ç¤º</span></h3><ul class="ne-ul"><li id="u17adbaa9" data-lake-index-type="0"><a href="https://github.com/wztlink1013/lyrics/blob/5cd479b933dbfed4b4ca1ce682fa6219a8db5b94/apps/lyrics-client/src/locales/i18n.ts#L18" data-href="https://github.com/wztlink1013/lyrics/blob/5cd479b933dbfed4b4ca1ce682fa6219a8db5b94/apps/lyrics-client/src/locales/i18n.ts#L18" target="_blank" class="ne-link"><span class="ne-text">https://github.com/wztlink1013/lyrics/blob/5cd479b933dbfed4b4ca1ce682fa6219a8db5b94/apps/lyrics-client/src/locales/i18n.ts#L18</span></a></li></ul><pre data-language="typescript" id="OUCCY" class="ne-codeblock language-typescript"><code>import utc from 'dayjs/plugin/utc';import timezone from 'dayjs/plugin/timezone';dayjs.extend(utc);dayjs.extend(timezone);</code></pre><p id="u5ec727f1" class="ne-p"><span class="ne-text">è¿™ä¸¤è¡Œä»£ç æ˜¯ä½¿ç”¨ </span><code class="ne-code"><span class="ne-text">dayjs</span></code><span class="ne-text"> è¿™ä¸ªæ—¥æœŸå¤„ç†åº“æ—¶çš„æ‰©å±•åŠŸèƒ½ã€‚</span></p><ol class="ne-ol"><li id="u89de3775" data-lake-index-type="0"><code class="ne-code"><span class="ne-text">dayjs.extend(utc);</span></code><span class="ne-text">ï¼š</span></li></ol><ul class="ne-list-wrap"><ul ne-level="1" class="ne-ul"><li id="u9e8139e8" data-lake-index-type="0"><span class="ne-text">è¿™ä¸€è¡Œä»£ç å¼•å…¥äº† </span><code class="ne-code"><span class="ne-text">dayjs</span></code><span class="ne-text"> çš„ </span><code class="ne-code"><span class="ne-text">utc</span></code><span class="ne-text"> æ’ä»¶ï¼Œä½¿å¾— </span><code class="ne-code"><span class="ne-text">dayjs</span></code><span class="ne-text"> èƒ½å¤Ÿæ”¯æŒ UTC æ—¶é—´çš„å¤„ç†ã€‚é€šè¿‡è¿™ä¸ªæ’ä»¶ï¼Œå¯ä»¥æ–¹ä¾¿åœ°è¿›è¡Œ UTC æ—¶é—´å’Œæœ¬åœ°æ—¶é—´ä¹‹é—´çš„è½¬æ¢ã€‚</span></li></ul></ul><ol start="2" class="ne-ol"><li id="u6229f247" data-lake-index-type="0"><code class="ne-code"><span class="ne-text">dayjs.extend(timezone);</span></code><span class="ne-text">ï¼š</span></li></ol><ul class="ne-list-wrap"><ul ne-level="1" class="ne-ul"><li id="u37ca31d1" data-lake-index-type="0"><span class="ne-text">è¿™ä¸€è¡Œä»£ç å¼•å…¥äº† </span><code class="ne-code"><span class="ne-text">dayjs</span></code><span class="ne-text"> çš„ </span><code class="ne-code"><span class="ne-text">timezone</span></code><span class="ne-text"> æ’ä»¶ï¼Œå®ƒå…è®¸åœ¨ä¸åŒçš„æ—¶åŒºä¹‹é—´è¿›è¡Œæ—¶é—´è½¬æ¢ã€‚è¿™ä¸ªæ’ä»¶å¯ä»¥æ ¹æ®æŒ‡å®šçš„æ—¶åŒºå¤„ç†æ—¶é—´ï¼Œä½¿å¾—æ˜¾ç¤ºå’Œè®¡ç®—æ›´åŠ çµæ´»ã€‚</span></li></ul></ul><p id="u98ade03b" class="ne-p"><span class="ne-text">æ€»çš„æ¥è¯´ï¼Œè¿™ä¸¤è¡Œä»£ç çš„ç›®çš„æ˜¯å¢å¼º </span><code class="ne-code"><span class="ne-text">dayjs</span></code><span class="ne-text"> åº“ï¼Œä½¿å…¶èƒ½å¤Ÿå¤„ç† UTC å’Œä¸åŒçš„æ—¶åŒºï¼Œä»è€Œæ›´å¥½åœ°æ”¯æŒå›½é™…åŒ–å’Œè·¨æ—¶åŒºçš„æ—¶é—´ç®¡ç†ã€‚</span></p><p id="u9fe7725e" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1730269588568-d36c14f7-2652-4496-8d3b-2625d3490e25.png" width="677" id="u0cc49a87" class="ne-image"></p><p id="u83b399f2" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1730269601607-37256249-4248-411d-b93d-c639c8300057.png" width="104" id="u8ebfb9eb" class="ne-image"></p><h3 id="kW45Q"><span class="ne-text">æ ¼å¼åŒ–UTCå­—ç¬¦ä¸²ä¸ºæŒ‡å®šåœ°åŒºæŒ‡å®šæ ¼å¼</span></h3><p id="u7339b7fe" class="ne-p"><span class="ne-text">å…¶ä¸­</span><code class="ne-code"><span class="ne-text">'Asia/Shanghai'</span></code><span class="ne-text">åº”è¯¥è®¾ç½®ä¸ºä¸€ä¸ªé…ç½®</span></p><ul class="ne-list-wrap"><ul ne-level="1" class="ne-ul"><li id="ua129c0d6" data-lake-index-type="0"><a href="https://github.com/wztlink1013/lyrics/blob/5cd479b933dbfed4b4ca1ce682fa6219a8db5b94/apps/lyrics-client/src/components/Doc/EditorView.tsx#L517" data-href="https://github.com/wztlink1013/lyrics/blob/5cd479b933dbfed4b4ca1ce682fa6219a8db5b94/apps/lyrics-client/src/components/Doc/EditorView.tsx#L517" target="_blank" class="ne-link"><span class="ne-text">https://github.com/wztlink1013/lyrics/blob/5cd479b933dbfed4b4ca1ce682fa6219a8db5b94/apps/lyrics-client/src/components/Doc/EditorView.tsx#L517</span></a></li></ul></ul><pre data-language="typescript" id="OspIH" class="ne-codeblock language-typescript"><code>dayjs  .utc(updatedAtStr)  .tz('Asia/Shanghai')  .format('YYYY-MM-DD HH:mm:ss')</code></pre><h3 id="YEHxa"><span class="ne-text">å°è£…</span></h3><pre data-language="typescript" id="Hd4HU" class="ne-codeblock language-typescript"><code>import dayjs from 'dayjs';import utc from 'dayjs/plugin/utc';import timezone from 'dayjs/plugin/timezone';import isSameOrAfter from 'dayjs/plugin/isSameOrAfter';import isSameOrBefore from 'dayjs/plugin/isSameOrBefore';import customParseFormat from 'dayjs/plugin/customParseFormat';import weekOfYear from 'dayjs/plugin/weekOfYear';// timezonedayjs.extend(utc);dayjs.extend(timezone);// first and lastdayjs.extend(isSameOrAfter);dayjs.extend(isSameOrBefore);dayjs.extend(customParseFormat);dayjs.extend(weekOfYear);const TIMEZONE = 'Asia/Shanghai';/** * get date string with UTC datasource and assign timezone * @param str UTC time string * @param template dayjs format string * @param option other params * @param option.timezone assign timezone * @returns format string */const getFormatTime = (  str: string,  template = '',  option?: &#123;    timezone?: string;  &#125;) =&gt; &#123;  return dayjs(str)    .utc()    .tz(option?.timezone || TIMEZONE)    .format(template);&#125;;enum TimeBoundaryType &#123;  MONTH = 'month',  WEEK = 'week',&#125;type TimeWeekStart = 1 | 2 | 3 | 4 | 5 | 6 | 7;/** * get date string's month boundary * @param str time string * @param isStart true -&gt; month first day; false -&gt; month last day; * @param option other params * @param option.showHMS show h m s * @param option.weekStart when boundaryType is week, week first day * @returns format string */const getTimeMonthBoundary = (  str: string,  isStart = true,  option?: &#123;    showHMS?: boolean;    boundaryType?: TimeBoundaryType;    weekStart?: TimeWeekStart;  &#125;) =&gt; &#123;  return `$&#123;dayjs(str)    [isStart ? 'startOf' : 'endOf'](option?.boundaryType || 'month')    .add(      option?.boundaryType === 'week' &amp;&amp; option?.weekStart        ? option.weekStart        : 0,      'day'    )    .format('YYYY-MM-DD')&#125;$&#123;    option?.showHMS ? (isStart ? ' 00:00:00' : ' 23:59:59') : ''  &#125;`;&#125;;</code></pre><pre data-language="typescript" id="ZQax6" class="ne-codeblock language-typescript"><code>const dateStr = '2024-09-30T00:22:25.218Z';const formatDateStr = getFormatTime(dateStr, 'YYYY-MM-DD HH:mm:ss');const mStart = getTimeMonthBoundary(formatDateStr, true, &#123;  showHMS: true,  boundaryType: TimeBoundaryType.WEEK,  weekStart: 1,&#125;);const mEnd = getTimeMonthBoundary(formatDateStr, false, &#123;  showHMS: true,  boundaryType: TimeBoundaryType.WEEK,  weekStart: 1,&#125;);console.info('[info]', &#123; dateStr, formatDateStr, mStart, mEnd &#125;);</code></pre><p id="u7bab4c62" class="ne-p" style="text-align: center"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1730273367448-9324b728-813a-429a-b931-701b8a5fa6bb.png" width="427" id="u8700ef09" class="ne-image"></p></div>]]></content>
    
    
      
      
        
        
    <summary type="html">

&lt;div class=&quot;lake-content&quot; typography=&quot;classic&quot;&gt;&lt;ul class=&quot;ne-ul&quot;&gt;&lt;li id=&quot;ube69d6f8&quot; data-lake-index-type=&quot;0&quot;&gt;&lt;code class=&quot;ne-code&quot;&gt;&lt;span</summary>
        
      
    
    
    
    <category term="Webå¼€å‘" scheme="https://www.wztlink1013.com/categories/Web%E5%BC%80%E5%8F%91/"/>
    
    <category term="å‰ç«¯ä¸šåŠ¡è§£å†³æ–¹æ¡ˆ" scheme="https://www.wztlink1013.com/categories/Web%E5%BC%80%E5%8F%91/%E5%89%8D%E7%AB%AF%E4%B8%9A%E5%8A%A1%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
    
    
  </entry>
  
  <entry>
    <title>Next Route</title>
    <link href="https://www.wztlink1013.com/blog/ere3ox6yqqqt46i4/"/>
    <id>https://www.wztlink1013.com/blog/ere3ox6yqqqt46i4/</id>
    <published>2024-10-21T23:39:26.000Z</published>
    <updated>2024-11-19T05:50:12.000Z</updated>
    
    <content type="html"><![CDATA[<div class="lake-content" typography="classic"><h2 id="M6Hgw"><span class="ne-text">ç‰¹æ®Šè·¯ç”±æ–‡ä»¶</span></h2><h3 id="DMzBp"><span class="ne-text">å¸ƒå±€ç»“æ„æœ‰å…³</span></h3><p id="u3640c967" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1729603955959-757c0f34-0131-4acf-8de9-b781df8374a1.png" width="819.0908913375921" id="u69de0a53" class="ne-image"></p><h3 id="bQsYr"><span class="ne-text">ç»„ä»¶æŒ‰éœ€åŠ è½½è€Œä¸æ˜¯é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢</span></h3><p id="u72bd6090" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1729604088141-ec001e1e-91d1-4f29-aa34-c8be393580e4.png" width="1159.0908839682907" id="u8098e449" class="ne-image"></p><h3 id="tInaa"><span class="ne-text">è¾¹ç•Œå¤„ç†</span></h3><p id="u4d8ceed0" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1729604165136-dc922fdc-f3ee-45f6-95fa-0180dbd9b743.png" width="579.0908965394519" id="u3139dc96" class="ne-image"></p><h3 id="v76G0"><span class="ne-text">é‡å®šå‘é…ç½®</span></h3><p id="u99878a82" class="ne-p"><a href="https://nextjs.org/docs/app/building-your-application/routing/redirecting" data-href="https://nextjs.org/docs/app/building-your-application/routing/redirecting" target="_blank" class="ne-link"><span class="ne-text">https://nextjs.org/docs/app/building-your-application/routing/redirecting</span></a></p><p id="ub4301e1f" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1729613573978-6fea88b5-8530-49a4-b2a8-8fd9be06d1ab.png" width="514.5454433929824" id="uf18f848e" class="ne-image"></p><h2 id="bOxo1"><span class="ne-text">è·¯ç”±</span></h2><p id="u12328168" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1729613630468-bcef25a1-46b9-4c3c-b442-cd20a682afea.png" width="453.6363538040605" id="u2cfa2681" class="ne-image"></p><ul class="ne-ul"><li id="uf68f17f1" data-lake-index-type="0"><span class="ne-text">page.tsxã€route.tsxç­‰ä¸€äº›å…¶ä»–æŒ‡å®šæ–‡ä»¶åçš„æ–‡ä»¶è·¯ç”±æ˜¯å®é™…è·¯ç”±ï¼Œå…¶ä»–çš„æ–‡ä»¶éƒ½å……å½“ä¸äº†è·¯ç”±ï¼ˆ</span><a href="https://nextjs.org/docs/app/building-your-application/routing/colocation#safe-colocation-by-default" data-href="https://nextjs.org/docs/app/building-your-application/routing/colocation#safe-colocation-by-default" target="_blank" class="ne-link"><span class="ne-text">https://nextjs.org/docs/app/building-your-application/routing/colocation#safe-colocation-by-default</span></a><span class="ne-text">ï¼‰</span></li><li id="u435abbb3" data-lake-index-type="0"><span class="ne-text">ä¸‹åˆ’çº¿å¼€å¤´çš„æ–‡ä»¶å¤¹è®¿é—®ä¸äº†</span></li></ul><h3 id="dabzk"><span class="ne-text">page.tsxå’Œroue.tsxåˆ†åˆ«æ„å»ºé¡µé¢å’Œæ•°æ®æº(APIæ¥å£)</span></h3><p id="u1561430e" class="ne-p"><br></p><h3 id="Ssjqj"><span class="ne-text">é¢„æ¸²æŸ“æ„å»º</span></h3><ul class="ne-ul"><li id="uff8186cd" data-lake-index-type="0"><span class="ne-text">å½“é˜…è¯»åŒç±»å‹æ–‡ä»¶æ—¶ï¼Œç±»ä¼¼äºå°†æ¥å£æ•°æ®ç¼“å­˜ä¸‹æ¥ï¼Œç„¶ååˆ‡æ¢è·¯ç”±ç›´æ¥æ›¿æ¢æ•°æ®å³å¯</span></li></ul><ul class="ne-list-wrap"><ul ne-level="1" class="ne-ul"><li id="u950d109f" data-lake-index-type="0"><a href="https://nextjs.org/docs/app/building-your-application/routing/dynamic-routes#generating-static-params" data-href="https://nextjs.org/docs/app/building-your-application/routing/dynamic-routes#generating-static-params" target="_blank" class="ne-link"><span class="ne-text">https://nextjs.org/docs/app/building-your-application/routing/dynamic-routes#generating-static-params</span></a></li></ul></ul><p id="u3246ca17" class="ne-p"><span class="ne-text">åœ¨ Next.js ä¸­ï¼Œç”Ÿæˆé™æ€å‚æ•°ï¼ˆGenerating Static Paramsï¼‰æ˜¯æŒ‡åœ¨ä½¿ç”¨åŠ¨æ€è·¯ç”±æ—¶ï¼Œä¸ºæ¯ä¸ªåŠ¨æ€è·¯å¾„ç”Ÿæˆé™æ€å‚æ•°ï¼Œä»¥ä¾¿åœ¨æ„å»ºæ—¶é¢„å…ˆæ¸²æŸ“è¿™äº›é¡µé¢ã€‚è¿™å¯ä»¥æå‡æ€§èƒ½ï¼Œå› ä¸ºé¢„æ¸²æŸ“çš„é¡µé¢å¯ä»¥ç›´æ¥æœåŠ¡äºç”¨æˆ·ï¼Œè€Œæ— éœ€åœ¨è¯·æ±‚æ—¶è¿›è¡ŒæœåŠ¡å™¨ç«¯æ¸²æŸ“ã€‚</span></p><p id="u91f84bf3" class="ne-p"><span class="ne-text" style="color: #DF2A3F">ä¸»è¦æ¦‚å¿µ</span></p><ol class="ne-ol"><li id="uefd63a53" data-lake-index-type="0"><strong><span class="ne-text">åŠ¨æ€è·¯ç”±</span></strong><span class="ne-text">ï¼š</span></li></ol><ul class="ne-list-wrap"><ul ne-level="1" class="ne-ul"><li id="u2c0dce17" data-lake-index-type="0"><span class="ne-text">é€šè¿‡æ–¹æ‹¬å·å®šä¹‰åŠ¨æ€è·¯ç”±ï¼Œä¾‹å¦‚ </span><code class="ne-code"><span class="ne-text">[id]</span></code><span class="ne-text">ï¼Œè¡¨ç¤ºè¿™ä¸ªè·¯ç”±æ˜¯åŠ¨æ€çš„ï¼Œå¯ä»¥æ¥æ”¶ä¸åŒçš„å‚æ•°ã€‚</span></li></ul></ul><ol start="2" class="ne-ol"><li id="uc2955fae" data-lake-index-type="0"><strong><span class="ne-text">ç”Ÿæˆé™æ€å‚æ•°</span></strong><span class="ne-text">:</span></li></ol><ul class="ne-list-wrap"><ul ne-level="1" class="ne-ul"><li id="u62b1f5de" data-lake-index-type="0"><span class="ne-text">ä½¿ç”¨ </span><code class="ne-code"><span class="ne-text">getStaticPaths</span></code><span class="ne-text"> æ–¹æ³•åœ¨æ„å»ºæ—¶è·å–æ‰€æœ‰å¯èƒ½çš„åŠ¨æ€å‚æ•°ã€‚è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«æ‰€æœ‰è¦é¢„æ¸²æŸ“çš„åŠ¨æ€è·¯å¾„ã€‚</span></li></ul></ul><ol start="3" class="ne-ol"><li id="u9b0218d7" data-lake-index-type="0"><strong><span class="ne-text">ç¤ºä¾‹</span></strong><span class="ne-text">:</span></li></ol><pre data-language="typescript" id="u46s8" class="ne-codeblock language-typescript"><code>export async function getStaticPaths() &#123;  const posts = await fetch('https://api.example.com/posts');  const paths = posts.map(post =&gt; (&#123; params: &#123; id: post.id &#125; &#125;));  return &#123; paths, fallback: false &#125;;&#125;</code></pre><ul class="ne-list-wrap"><ul ne-level="1" class="ne-ul"><li id="ubadb56fa" data-lake-index-type="0"><span class="ne-text">å‡è®¾ä½ æœ‰ä¸€ä¸ªæ–‡ç« é¡µé¢ï¼Œè·¯å¾„ä¸º </span><code class="ne-code"><span class="ne-text">/posts/[id]</span></code><span class="ne-text">ã€‚åœ¨ </span><code class="ne-code"><span class="ne-text">getStaticPaths</span></code><span class="ne-text"> ä¸­ï¼Œä½ å¯ä»¥å®šä¹‰æ‰€æœ‰è¦ç”Ÿæˆçš„æ–‡ç«  IDï¼š</span></li></ul></ul><ol start="4" class="ne-ol"><li id="ue4aaca11" data-lake-index-type="0"><strong><span class="ne-text">ä¼˜ç‚¹</span></strong><span class="ne-text">:</span></li></ol><ul class="ne-list-wrap"><ul ne-level="1" class="ne-ul"><li id="u43a9f782" data-lake-index-type="0"><span class="ne-text">é¢„æ¸²æŸ“çš„é¡µé¢å¯ä»¥åœ¨ç”¨æˆ·è¯·æ±‚æ—¶å¿«é€Ÿå“åº”ï¼Œå‡å°‘æœåŠ¡å™¨è´Ÿè½½ï¼Œæé«˜æ€§èƒ½ã€‚</span></li><li id="u388162f6" data-lake-index-type="0"><span class="ne-text">æœ‰åˆ©äº SEOï¼Œå› ä¸ºæœç´¢å¼•æ“å¯ä»¥æ›´å®¹æ˜“åœ°æŠ“å–é¢„æ¸²æŸ“çš„å†…å®¹ã€‚</span></li></ul></ul><p id="ue895591e" class="ne-p"><span class="ne-text" style="color: #DF2A3F">ç»“è®º</span></p><p id="u1d8436f6" class="ne-p"><span class="ne-text">ç”Ÿæˆé™æ€å‚æ•°æ˜¯ä¸€ç§ä¼˜åŒ–æŠ€æœ¯ï¼Œä½¿åŠ¨æ€è·¯ç”±åœ¨æ„å»ºæ—¶ç”Ÿæˆå¯é™æ€æœåŠ¡çš„é¡µé¢ï¼Œæå‡æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚è¿™åœ¨å¤„ç†å¤§é‡åŠ¨æ€å†…å®¹æ—¶å°¤å…¶é‡è¦ã€‚</span></p><h3 id="eR5wU"><span class="ne-text">å•ä¸­æ‹¬å·å’ŒåŒä¸­æ‹¬å·</span></h3><ul class="ne-ul"><li id="u299b6342" data-lake-index-type="0"><span class="ne-text">åŒºåˆ«äºæ²¡æœ‰è·¯å¾„å‚æ•°æ—¶æ˜¯å¦æ¸²æŸ“é¡µé¢</span></li></ul><p id="u918633e9" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1729613081751-d411b498-2a50-4678-9983-9f4fd999fd91.png" width="907.272707608121" id="u4e8e653c" class="ne-image"></p><h3 id="T2G2w"><span class="ne-text">å¹³è¡Œè·¯ç”±ï¼ˆ@å¼€å¤´çš„æ–‡ä»¶å¤¹ï¼‰</span></h3><ul class="ne-ul"><li id="u63ccf502" data-lake-index-type="0"><a href="https://nextjs.org/docs/app/building-your-application/routing/parallel-routes" data-href="https://nextjs.org/docs/app/building-your-application/routing/parallel-routes" target="_blank" class="ne-link"><span class="ne-text">https://nextjs.org/docs/app/building-your-application/routing/parallel-routes</span></a></li><li id="uacb519e2" data-lake-index-type="0"><a href="https://nextjs.net.cn/docs/app/building-your-application/routing/parallel-routes" data-href="https://nextjs.net.cn/docs/app/building-your-application/routing/parallel-routes" target="_blank" class="ne-link"><span class="ne-text">https://nextjs.net.cn/docs/app/building-your-application/routing/parallel-routes</span></a></li><li id="u559315cf" data-lake-index-type="0"><span class="ne-text">å¥½å¤„ï¼šå¯ä»¥æ¸²æŸ“å„è‡ªçš„çŠ¶æ€ï¼ˆåŠ è½½ä¸­æˆ–é”™è¯¯å¤„ç†ç­‰ï¼‰ï¼Œè¿˜å¯ä»¥é€šè¿‡è§’è‰²æ¥åˆ¤æ–­æ¸²æŸ“å“ªç±»è·¯ç”±ï¼š</span><a href="https://yuxuetr.com/wiki/nextjs/parallel-routes" data-href="https://yuxuetr.com/wiki/nextjs/parallel-routes" target="_blank" class="ne-link"><span class="ne-text">https://yuxuetr.com/wiki/nextjs/parallel-routes</span></a></li><li id="u885c44f3" data-lake-index-type="0"><span class="ne-text">å®ç°æ¡ä»¶è·¯ç”±</span></li><li id="u18de36e5" data-lake-index-type="0"><span class="ne-text">å®ç°æ¨¡æ€è·¯ç”±</span></li></ul><h3 id="GRMFW"><span class="ne-text">æ‹¦æˆªè·¯ç”±æ¨¡æ€ï¼ˆ(.)å†™æ³•ï¼‰</span></h3><p id="u42357724" class="ne-p"><a href="https://nextjs.org/docs/app/building-your-application/routing/intercepting-routes" data-href="https://nextjs.org/docs/app/building-your-application/routing/intercepting-routes" target="_blank" class="ne-link"><span class="ne-text">https://nextjs.org/docs/app/building-your-application/routing/intercepting-routes</span></a></p><h3 id="YoyqV"><span class="ne-text">TODO: å¤„ç†è¯·æ±‚ä¸å“åº”è¯·æ±‚</span></h3><h2 id="dhSa2"></h2><p id="u84f438a3" class="ne-p"><br></p><p id="u3ae9a8bf" class="ne-p"><br></p><p id="u32924e9e" class="ne-p"><br></p><p id="u1d3ce715" class="ne-p"><br></p><p id="u6d9e25ed" class="ne-p"><br></p></div>]]></content>
    
    
      
      
        
        
    <summary type="html">

&lt;div class=&quot;lake-content&quot; typography=&quot;classic&quot;&gt;&lt;h2 id=&quot;M6Hgw&quot;&gt;&lt;span class=&quot;ne-text&quot;&gt;ç‰¹æ®Šè·¯ç”±æ–‡ä»¶&lt;/span&gt;&lt;/h2&gt;&lt;h3 id=&quot;DMzBp&quot;&gt;&lt;span</summary>
        
      
    
    
    
    <category term="Webå¼€å‘" scheme="https://www.wztlink1013.com/categories/Web%E5%BC%80%E5%8F%91/"/>
    
    <category term="Next.js" scheme="https://www.wztlink1013.com/categories/Web%E5%BC%80%E5%8F%91/Next-js/"/>
    
    
  </entry>
  
  <entry>
    <title>[ChatGPT] Vueå’ŒReactçš„diffç®—æ³•</title>
    <link href="https://www.wztlink1013.com/blog/ug01qnk1txsegqfy/"/>
    <id>https://www.wztlink1013.com/blog/ug01qnk1txsegqfy/</id>
    <published>2024-10-13T23:07:37.000Z</published>
    <updated>2024-11-16T19:50:36.000Z</updated>
    
    <content type="html"><![CDATA[<div class="lake-content" typography="classic"><p id="u0dd4c899" class="ne-p"><span class="ne-text">Vue å’Œ React çš„ diff ç®—æ³•éƒ½æ˜¯ä¸ºäº†è§£å†³è™šæ‹Ÿ DOM æ›´æ–°çš„é—®é¢˜ï¼Œå®ƒä»¬éƒ½ä½¿ç”¨äº† </span><strong><span class="ne-text">Diffing</span></strong><span class="ne-text"> æŠ€æœ¯æ¥ä¼˜åŒ– DOM æ¸²æŸ“ã€‚è™½ç„¶ä¸¤è€…æœ‰ç›¸ä¼¼çš„æ€æƒ³ï¼Œä½†å®ç°ä¸Šå­˜åœ¨ä¸€äº›å·®å¼‚ã€‚</span></p><h3 id="DbnV2"><span class="ne-text">1. </span><strong><span class="ne-text">React çš„ Diff ç®—æ³•</span></strong></h3><p id="ua7dc5f42" class="ne-p"><span class="ne-text">React ä½¿ç”¨äº†ä¸€ç§ </span><strong><span class="ne-text">O(n)</span></strong><span class="ne-text"> å¤æ‚åº¦çš„ Diff ç®—æ³•ï¼Œè¿™è¢«ç§°ä¸º </span><strong><span class="ne-text">Fiber</span></strong><span class="ne-text">ã€‚è¯¥ç®—æ³•ä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š</span><strong><span class="ne-text">reconciliationï¼ˆè°ƒå’Œè¿‡ç¨‹ï¼‰</span></strong><span class="ne-text"> å’Œ </span><strong><span class="ne-text">renderingï¼ˆæ¸²æŸ“è¿‡ç¨‹ï¼‰</span></strong><span class="ne-text">ã€‚</span></p><h4 id="qG5fd"><span class="ne-text">æ ¸å¿ƒæ€æƒ³</span></h4><ul class="ne-ul"><li id="u8c9ae04b" data-lake-index-type="0"><strong><span class="ne-text">åˆ†å±‚æ¯”è¾ƒï¼ˆæ ‘åˆ†å±‚æ¯”è¾ƒï¼‰</span></strong><span class="ne-text">ï¼šReact ä¸ä¼šè¿›è¡Œæ•´ä¸ªè™šæ‹Ÿ DOM æ ‘çš„é€ä¸ªèŠ‚ç‚¹å¯¹æ¯”ï¼Œè€Œæ˜¯å°†æ ‘åˆ†ä¸ºä¸åŒå±‚ï¼Œé€å±‚è¿›è¡Œæ¯”è¾ƒã€‚è¿™å¤§å¹…é™ä½äº†æ—¶é—´å¤æ‚åº¦ã€‚</span></li><li id="ufafd5a35" data-lake-index-type="0"><strong><span class="ne-text">ç»„ä»¶ç±»å‹ä¸åŒï¼Œç›´æ¥æ›¿æ¢</span></strong><span class="ne-text">ï¼šå¦‚æœæ–°æ—§è™šæ‹Ÿ DOM çš„ç±»å‹ä¸åŒï¼ˆæ¯”å¦‚ </span><code class="ne-code"><span class="ne-text">&lt;div&gt;</span></code><span class="ne-text"> æ¢æˆäº† </span><code class="ne-code"><span class="ne-text">&lt;span&gt;</span></code><span class="ne-text">ï¼Œæˆ–è€…æ˜¯ä¸åŒçš„ç»„ä»¶ç±»å‹ï¼‰ï¼ŒReact ä¸ä¼šå»åšæ·±å…¥æ¯”è¾ƒï¼Œè€Œæ˜¯ç›´æ¥åˆ é™¤æ—§èŠ‚ç‚¹ï¼Œåˆ›å»ºæ–°èŠ‚ç‚¹ã€‚</span></li><li id="ua58c8422" data-lake-index-type="0"><strong><span class="ne-text">key ä¼˜åŒ–</span></strong><span class="ne-text">ï¼šReact ä½¿ç”¨ </span><code class="ne-code"><span class="ne-text">key</span></code><span class="ne-text"> å±æ€§æ¥æ ‡è¯†åˆ—è¡¨ä¸­çš„èŠ‚ç‚¹ã€‚å½“åŒçº§åˆ—è¡¨å…ƒç´ çš„ </span><code class="ne-code"><span class="ne-text">key</span></code><span class="ne-text"> å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒReact ä¼šå°è¯•ä¼˜åŒ–èŠ‚ç‚¹çš„é‡æ’ï¼Œè€Œä¸æ˜¯é€ä¸ªåˆ é™¤å’Œé‡å»ºã€‚æ²¡æœ‰ </span><code class="ne-code"><span class="ne-text">key</span></code><span class="ne-text"> çš„åˆ—è¡¨ä¼šå¼•å‘æ€§èƒ½é—®é¢˜ï¼Œå› ä¸º React ä¼šè¿›è¡Œä½ç½®çš„é€ä¸ªæ¯”å¯¹ã€‚</span></li></ul><h4 id="Hkruy"><span class="ne-text">æ›´æ–°æµç¨‹</span></h4><ol class="ne-ol"><li id="u874e1cb3" data-lake-index-type="0"><span class="ne-text">React ä¼šä»æ ¹èŠ‚ç‚¹å¼€å§‹æ¯”è¾ƒæ¯ä¸€å±‚çš„è™šæ‹Ÿ DOMã€‚</span></li><li id="u7ad0411d" data-lake-index-type="0"><span class="ne-text">å¦‚æœèŠ‚ç‚¹ç±»å‹ç›¸åŒï¼ˆå¦‚ </span><code class="ne-code"><span class="ne-text">&lt;div&gt;</span></code><span class="ne-text"> å¯¹æ¯” </span><code class="ne-code"><span class="ne-text">&lt;div&gt;</span></code><span class="ne-text">ï¼‰ï¼Œåˆ™å¯¹æ¯”å…¶å±æ€§å’Œå­èŠ‚ç‚¹ã€‚</span></li><li id="ua1bb18a3" data-lake-index-type="0"><span class="ne-text">å¦‚æœèŠ‚ç‚¹ç±»å‹ä¸åŒï¼Œåˆ™ç›´æ¥åˆ é™¤æ—§èŠ‚ç‚¹ï¼Œåˆ›å»ºæ–°èŠ‚ç‚¹ã€‚</span></li><li id="u9a7614aa" data-lake-index-type="0"><span class="ne-text">å¯¹äºåˆ—è¡¨ï¼ŒReact ä¼šä¼˜å…ˆæŸ¥æ‰¾ </span><code class="ne-code"><span class="ne-text">key</span></code><span class="ne-text"> å€¼ç›¸åŒçš„èŠ‚ç‚¹ï¼Œé¿å…ä¸å¿…è¦çš„åˆ é™¤å’Œåˆ›å»ºã€‚</span></li></ol><h4 id="NF2EK"><span class="ne-text">ä¼˜åŒ–ç­–ç•¥</span></h4><p id="u545535f7" class="ne-p"><span class="ne-text">React çš„ç®—æ³•è®¾è®¡æ€è·¯æ˜¯é€šè¿‡ </span><strong><span class="ne-text">æµ…å±‚å¯¹æ¯”</span></strong><span class="ne-text"> æ¥åŠ é€Ÿæ¸²æŸ“ï¼Œä¼˜å…ˆä¿è¯æ¸²æŸ“æ€§èƒ½ï¼Œè€Œä¸æ˜¯ç²¾ç¡®åœ°å¯¹æ¯ä¸ªèŠ‚ç‚¹è¿›è¡Œæ·±å±‚æ¬¡æ¯”å¯¹ã€‚</span></p><h3 id="aB5kz"><span class="ne-text">2. </span><strong><span class="ne-text">Vue çš„ Diff ç®—æ³•</span></strong></h3><p id="u97f1712a" class="ne-p"><span class="ne-text">Vue 2 å’Œ Vue 3 éƒ½ä½¿ç”¨äº† </span><strong><span class="ne-text">O(n)</span></strong><span class="ne-text"> çš„ Diff ç®—æ³•ï¼Œæ ¸å¿ƒåŸºäº </span><code class="ne-code"><span class="ne-text">snabbdom</span></code><span class="ne-text"> çš„å®ç°ï¼Œç‰¹åˆ«æ˜¯åœ¨ Vue 3 ä¸­ï¼Œdiff ç®—æ³•è¿›è¡Œäº†ä¼˜åŒ–ï¼Œè¿½æ±‚é«˜æ•ˆä¸”è½»é‡çš„æ›´æ–°è¿‡ç¨‹ã€‚</span></p><h4 id="RcSjF"><span class="ne-text">æ ¸å¿ƒæ€æƒ³</span></h4><ul class="ne-ul"><li id="u7f06da5b" data-lake-index-type="0"><strong><span class="ne-text">åŒç«¯æ¯”è¾ƒ</span></strong><span class="ne-text">ï¼šVue é‡‡ç”¨äº† </span><strong><span class="ne-text">åŒç«¯æ¯”è¾ƒ</span></strong><span class="ne-text"> ç­–ç•¥ï¼Œå³åˆ†åˆ«ä»æ–°æ—§è™šæ‹Ÿ DOM çš„ä¸¤ç«¯è¿›è¡Œå¯¹æ¯”ï¼Œç›´åˆ°é‡åˆ°ä¸åŒçš„èŠ‚ç‚¹ã€‚è¿™æ ·å¯ä»¥å¿«é€Ÿç¡®å®šç›¸åŒçš„èŠ‚ç‚¹ï¼Œå‡å°‘ä¸­é—´èŠ‚ç‚¹çš„æ¯”å¯¹ã€‚</span></li><li id="uffcec6d8" data-lake-index-type="0"><strong><span class="ne-text">patch å‡½æ•°</span></strong><span class="ne-text">ï¼šVue ä½¿ç”¨ </span><code class="ne-code"><span class="ne-text">patch</span></code><span class="ne-text"> å‡½æ•°é€’å½’åœ°æ¯”è¾ƒæ–°æ—§è™šæ‹Ÿ DOM æ ‘ï¼Œé€šè¿‡ </span><strong><span class="ne-text">æœ€å°åŒ–ä¿®æ”¹</span></strong><span class="ne-text"> çš„æ–¹å¼æ›´æ–°çœŸå® DOMã€‚</span></li><li id="u383b6ea7" data-lake-index-type="0"><strong><span class="ne-text">é™æ€èŠ‚ç‚¹ä¼˜åŒ–</span></strong><span class="ne-text">ï¼šVue ä¼šåœ¨æ¨¡æ¿ç¼–è¯‘æ—¶å¯¹é™æ€èŠ‚ç‚¹è¿›è¡Œæ ‡è®°ï¼Œè¿™æ ·åœ¨æ›´æ–°æ—¶å¯ä»¥è·³è¿‡å¯¹é™æ€èŠ‚ç‚¹çš„æ¯”å¯¹ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚</span></li><li id="u7b3fa3ac" data-lake-index-type="0"><strong><span class="ne-text">key ä¼˜åŒ–</span></strong><span class="ne-text">ï¼šå’Œ React ç±»ä¼¼ï¼ŒVue ä¹Ÿä¼šä½¿ç”¨ </span><code class="ne-code"><span class="ne-text">key</span></code><span class="ne-text"> æ¥ä¼˜åŒ–åˆ—è¡¨çš„èŠ‚ç‚¹æ›´æ–°ï¼Œç¡®ä¿èŠ‚ç‚¹é‡ç”¨å’Œä½ç½®å˜åŒ–çš„é«˜æ•ˆå¤„ç†ã€‚</span></li></ul><h4 id="QG5uG"><span class="ne-text">æ›´æ–°æµç¨‹</span></h4><ol class="ne-ol"><li id="u56a7e6b6" data-lake-index-type="0"><span class="ne-text">Vue ä¼šä»æ ¹èŠ‚ç‚¹å¼€å§‹å¯¹æ¯”æ–°æ—§è™šæ‹Ÿ DOMã€‚</span></li><li id="u4e3b5fd8" data-lake-index-type="0"><span class="ne-text">å¯¹æ¯”èŠ‚ç‚¹ç±»å‹å’Œå±æ€§ï¼š</span></li></ol><ul class="ne-list-wrap"><ul ne-level="1" class="ne-ul"><li id="uc1efe140" data-lake-index-type="0"><span class="ne-text">å¦‚æœèŠ‚ç‚¹ç±»å‹ä¸åŒï¼Œç›´æ¥æ›¿æ¢ã€‚</span></li><li id="u903a3fc9" data-lake-index-type="0"><span class="ne-text">å¦‚æœèŠ‚ç‚¹ç±»å‹ç›¸åŒï¼Œåˆ™ç»§ç»­æ¯”è¾ƒå±æ€§å’Œå­èŠ‚ç‚¹ã€‚</span></li></ul></ul><ol start="3" class="ne-ol"><li id="u00bb598e" data-lake-index-type="0"><span class="ne-text">å¦‚æœæ˜¯åˆ—è¡¨ï¼ŒVue ä¼šåŸºäºåŒç«¯æ¯”è¾ƒç®—æ³•å¯¹åˆ—è¡¨è¿›è¡Œæœ€å°åŒ–çš„æ›´æ–°æ“ä½œã€‚</span></li><li id="u2a7de034" data-lake-index-type="0"><span class="ne-text">å¯¹äºé™æ€å†…å®¹çš„ä¼˜åŒ–ï¼ŒVue ä¼šè·³è¿‡ä¸å¿…è¦çš„æ›´æ–°ã€‚</span></li></ol><h4 id="pV0fu"><span class="ne-text">Vue 3 çš„ä¼˜åŒ–</span></h4><ul class="ne-ul"><li id="u55a9c8e5" data-lake-index-type="0"><strong><span class="ne-text">ç¼–è¯‘é˜¶æ®µä¼˜åŒ–</span></strong><span class="ne-text">ï¼šVue 3 åœ¨æ¨¡æ¿ç¼–è¯‘é˜¶æ®µä¼šæ ‡è®°å“ªäº›éƒ¨åˆ†æ˜¯é™æ€çš„ï¼Œè¿™æ ·åœ¨æ›´æ–°æ—¶ï¼ŒVue å¯ä»¥ç›´æ¥è·³è¿‡è¿™äº›é™æ€éƒ¨åˆ†ï¼Œè¿›ä¸€æ­¥æå‡æ€§èƒ½ã€‚</span></li><li id="uf013a7c8" data-lake-index-type="0"><strong><span class="ne-text">æ›´è½»é‡çš„ç»“æ„</span></strong><span class="ne-text">ï¼šVue 3 å¼•å…¥äº† Proxy å’Œæ›´ç®€æ´çš„å“åº”å¼ç³»ç»Ÿï¼Œä½¿å¾—çŠ¶æ€æ›´æ–°è¿‡ç¨‹æ›´é«˜æ•ˆï¼Œå’Œ Diff ç®—æ³•é…åˆå¾—æ›´å¥½ã€‚</span></li></ul><h3 id="E0ZLx"><span class="ne-text">3. </span><strong><span class="ne-text">å¯¹æ¯”æ€»ç»“</span></strong></h3><table id="Hkfm6" class="ne-table" style="width: 750px"><tbody><tr style="height: 33px"><td width="250"><p id="ue2ab7066" class="ne-p"><span class="ne-text">ç‰¹æ€§</span></p></td><td width="250"><p id="u7d334a08" class="ne-p"><span class="ne-text">React</span></p></td><td width="250"><p id="ue0e6ae01" class="ne-p"><span class="ne-text">Vue</span></p></td></tr><tr style="height: 33px"><td width="250"><p id="u6ff22eb2" class="ne-p"><span class="ne-text">Diff æ ¸å¿ƒç®—æ³•</span></p></td><td width="250"><p id="u30e7d9ea" class="ne-p"><span class="ne-text">O(n) çš„ Fiber æ¶æ„ï¼ŒæŒ‰å±‚æ¬¡æ¯”è¾ƒ</span></p></td><td width="250"><p id="ud8bfd42d" class="ne-p"><span class="ne-text">O(n) çš„åŒç«¯æ¯”è¾ƒï¼Œä½¿ç”¨ snabbdom çš„ patch</span></p></td></tr><tr style="height: 33px"><td width="250"><p id="u1098601a" class="ne-p"><span class="ne-text">key ä¼˜åŒ–</span></p></td><td width="250"><p id="u621b2214" class="ne-p"><span class="ne-text">é€šè¿‡ key ä¼˜åŒ–åˆ—è¡¨æ›´æ–°</span></p></td><td width="250"><p id="ua36ba29c" class="ne-p"><span class="ne-text">åŒæ ·ä½¿ç”¨ key æ¥ä¼˜åŒ–åˆ—è¡¨çš„èŠ‚ç‚¹é‡ç”¨</span></p></td></tr><tr style="height: 33px"><td width="250"><p id="u7bfe3f84" class="ne-p"><span class="ne-text">é™æ€èŠ‚ç‚¹ä¼˜åŒ–</span></p></td><td width="250"><p id="u176358ba" class="ne-p"><span class="ne-text">é€šè¿‡ diff å¯¹æ¯”é€å±‚æ›´æ–°</span></p></td><td width="250"><p id="uce236f49" class="ne-p"><span class="ne-text">ç¼–è¯‘æ—¶æ ‡è®°é™æ€èŠ‚ç‚¹ï¼Œè·³è¿‡ä¸å¿…è¦çš„æ›´æ–°</span></p></td></tr><tr style="height: 33px"><td width="250"><p id="u043a7ecb" class="ne-p"><span class="ne-text">æ›´æ–°ç­–ç•¥</span></p></td><td width="250"><p id="u010ce4f5" class="ne-p"><span class="ne-text">åˆ†å±‚æ¯”è¾ƒï¼Œä¸åŒç±»å‹èŠ‚ç‚¹ç›´æ¥æ›¿æ¢</span></p></td><td width="250"><p id="u5f50c839" class="ne-p"><span class="ne-text">åŒç«¯æ¯”è¾ƒï¼ŒåŠ¨æ€è·³è¿‡ä¸å¿…è¦çš„æ›´æ–°</span></p></td></tr><tr style="height: 33px"><td width="250"><p id="u02a2a9e7" class="ne-p"><span class="ne-text">æ€§èƒ½ä¾§é‡ç‚¹</span></p></td><td width="250"><p id="ua1cc5abd" class="ne-p"><span class="ne-text">æµ…å±‚å¿«é€Ÿå¯¹æ¯”ï¼Œæå‡æ€§èƒ½</span></p></td><td width="250"><p id="ufe6abedc" class="ne-p"><span class="ne-text">é€šè¿‡æœ€å°åŒ–ä¿®æ”¹å’Œé™æ€èŠ‚ç‚¹ä¼˜åŒ–æå‡æ€§èƒ½</span></p></td></tr></tbody></table><p id="u24a568df" class="ne-p"><span class="ne-text">æ€»ç»“æ¥çœ‹ï¼ŒReact å’Œ Vue éƒ½åœ¨ Diff ç®—æ³•ä¸­é‡‡ç”¨äº† O(n) çš„å¤æ‚åº¦ä¼˜åŒ–ï¼Œä¸è¿‡ React æ›´å…³æ³¨é€šè¿‡ Fiber åˆ†å±‚è¿›è¡Œè°ƒå’Œå’Œæ¸²æŸ“ï¼Œè€Œ Vue åˆ™é€šè¿‡åŒç«¯æ¯”è¾ƒå’Œé™æ€èŠ‚ç‚¹ä¼˜åŒ–æ¥æé«˜æ¸²æŸ“æ•ˆç‡ã€‚ä¸¤è€…éƒ½åœ¨ä¸æ–­ä¼˜åŒ–è™šæ‹Ÿ DOM çš„æ›´æ–°è¿‡ç¨‹ï¼Œä»¥ç¡®ä¿åœ¨å¤æ‚åº”ç”¨ä¸­çš„æ€§èƒ½è¡¨ç°ã€‚</span></p></div>]]></content>
    
    
      
      
        
        
    <summary type="html">

&lt;div class=&quot;lake-content&quot; typography=&quot;classic&quot;&gt;&lt;p id=&quot;u0dd4c899&quot; class=&quot;ne-p&quot;&gt;&lt;span class=&quot;ne-text&quot;&gt;Vue å’Œ React çš„ diff ç®—æ³•éƒ½æ˜¯ä¸ºäº†è§£å†³è™šæ‹Ÿ DOM</summary>
        
      
    
    
    
    <category term="Webå¼€å‘" scheme="https://www.wztlink1013.com/categories/Web%E5%BC%80%E5%8F%91/"/>
    
    <category term="Vue" scheme="https://www.wztlink1013.com/categories/Web%E5%BC%80%E5%8F%91/Vue/"/>
    
    
  </entry>
  
  <entry>
    <title>Reactå‡½æ•°ç»„ä»¶åŠå…¶ç›¸å…³hooks</title>
    <link href="https://www.wztlink1013.com/blog/heq3u9id8tz3izdu/"/>
    <id>https://www.wztlink1013.com/blog/heq3u9id8tz3izdu/</id>
    <published>2024-10-07T19:53:12.000Z</published>
    <updated>2024-11-19T07:25:00.000Z</updated>
    
    <content type="html"><![CDATA[<div class="lake-content" typography="classic"><blockquote data-type="info" class="ne-alert" style="background-color: rgba(192, 221, 252, 0.5); border: 1px solid transparent; margin: 4px 0px; padding: 10px; border-radius: 4px;"><p id="u09f32c06" class="ne-p"><span class="ne-text">å®˜æ–¹æ–‡æ¡£ï¼š</span><a href="https://react.docschina.org/" data-href="https://react.docschina.org/" class="ne-link"><span class="ne-text">React å®˜æ–¹ä¸­æ–‡æ–‡æ¡£</span></a></p></blockquote><h2 id="tG6gs"><span class="ne-text">ğŸ“Œ</span><span class="ne-text">å˜é‡ç›¸å…³</span></h2><h3 id="oCcis"><span class="ne-text">useState</span></h3><p id="u6d0a5e75" class="ne-p"><span class="ne-text">æ™®é€šå®šä¹‰çš„å˜é‡æ¯æ¬¡ç»„ä»¶æ¸²æŸ“éƒ½æ˜¯æ‰€å®šä¹‰çš„å€¼ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦åœ¨æ¯æ¬¡re-renderéƒ½è®°ä½ä¸€ä¸ªçŠ¶æ€çš„æœ€æ–°å€¼ï¼Œé‚£å°±éœ€è¦ä½¿ç”¨useState hook</span></p><pre data-language="tsx" id="wHRGw" class="ne-codeblock language-tsx"><code>import &#123; useState &#125; from 'React'const A = () =&gt; &#123;  const [a, setA] = useState('a')  return &lt;div&gt;a value: &#123;a&#125;&lt;/div&gt;&#125;</code></pre><p id="u5c324387" class="ne-p"><span class="ne-text">å’Œç±»ç»„ä»¶çš„å·®å¼‚</span></p><ol class="ne-ol"><li id="u157ea2c5" data-lake-index-type="0"><span class="ne-text">æ”¹å˜å€¼çš„æ—¶å€™ä¸ä¼šmergeï¼Œè€Œæ˜¯è¦†ç›–</span></li><li id="ue3b27c3a" data-lake-index-type="0"><span class="ne-text">åˆå§‹å€¼å¯ä»¥æ˜¯å›è°ƒå‡½æ•°ï¼Œä½†ä¸èƒ½æ˜¯å‡½æ•°å¦åˆ™æ¯æ¬¡æ”¹å˜éƒ½ä¼šé‡æ–°æ‰§è¡Œä¸€éè¯¥å‡½æ•°ï¼Œå½±å“æ€§èƒ½</span></li></ol><pre data-language="tsx" id="OAx4j" class="ne-codeblock language-tsx"><code>import &#123; Button &#125; from 'antd';export default () =&gt; &#123;  const [count, setCount] = useState(    [1, 2, 3].reduce((curr, prev) =&gt; &#123;      // eslint-disable-next-line no-param-reassign      curr += prev;      console.info('&gt;&gt;&gt; init run &gt;&gt;&gt;');      return curr;    &#125;, 0),  );  const addCount = () =&gt; &#123;    setCount(count + 1);    setCount(count + 1);    setCount(count + 1);  &#125;;  return (    &lt;div className="p-14"&gt;      &lt;Button onClick=&#123;addCount&#125;&gt;count: &#123;count&#125;&lt;/Button&gt;    &lt;/div&gt;  );&#125;;</code></pre><p id="u0b9fc139" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1722953034766-4c5c7561-a6fb-4398-bdde-348a9afd35bc.png" width="322.72726573234763" id="u5597c488" class="ne-image"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1722953054284-46fa8f0f-97d2-4850-93b0-74fcbad206a2.png" width="173.6363598728969" id="u5d110e01" class="ne-image"></p><ol start="3" class="ne-ol"><li id="ubf97f0c2" data-lake-index-type="0"><span class="ne-text">åŒæ ·å­˜åœ¨æ‰¹å¤„ç†</span></li></ol><p id="uea8f40f7" class="ne-p"><span class="ne-text" style="color: #DF2A3F">ã€useStateè¿”å›çš„setå‡½æ•°å¹¶ä¸ä¼šç«‹åˆ»æ›´æ–°çŠ¶æ€å€¼ï¼Œè€Œæ˜¯ä¼šæ‰¹é‡æ›´æ–°ï¼Œæ‰€ä»¥åœ¨setå‡½æ•°æ‰§è¡Œåï¼ŒçŠ¶æ€å¯èƒ½è¿˜æ˜¯åŸå§‹å€¼ï¼Œéœ€è¦ç­‰åˆ°ä¸‹æ¬¡renderå€¼æ‰ä¼šæ›´æ–°ï¼ŒaddAç»“æœè¿˜æ˜¯+1ã€‘</span></p><pre data-language="tsx" id="NvrAB" class="ne-codeblock language-tsx"><code>import &#123; Button &#125; from 'antd';export default () =&gt; &#123;  const [count, setCount] = useState(0);  const addCount = () =&gt; &#123;    setCount(count + 1);    setCount(count + 1);    setCount(count + 1);  &#125;;  return (    &lt;div className="p-14"&gt;      &lt;Button onClick=&#123;addCount&#125;&gt;count: &#123;count&#125;&lt;/Button&gt;    &lt;/div&gt;  );&#125;;</code></pre><p id="ua30641ec" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/gif/1484158/1722952555120-5cf64dda-d4b5-4d93-89cb-fb970a40b91a.gif" width="502" id="u459444e4" class="ne-image"></p><ol start="4" class="ne-ol"><li id="u832252b4" data-lake-index-type="0"><span class="ne-text" style="color: #DF2A3F">ä¼ å…¥çš„æ˜¯å€¼ï¼Œæ¸²æŸ“å‰ä¼šå­˜åœ¨è¦†ç›–æƒ…å†µï¼Œå¦‚æœä¼ å…¥çš„æ˜¯å‡½æ•°ï¼Œåˆ™ä¼šä¿ç•™ä¸Šä¸€æ¬¡çš„çŠ¶æ€å€¼è®¡ç®—</span></li></ol><pre data-language="tsx" id="IEUTD" class="ne-codeblock language-tsx"><code>import &#123; Button &#125; from 'antd';export default () =&gt; &#123;  const [count, setCount] = useState(0);  const addCount = () =&gt; &#123;    setCount(count =&gt; count + 1);    setCount(count =&gt; count + 1);    setCount(count =&gt; count + 1);  &#125;;  return (    &lt;div className="p-14"&gt;      &lt;Button onClick=&#123;addCount&#125;&gt;count: &#123;count&#125;&lt;/Button&gt;    &lt;/div&gt;  );&#125;;</code></pre><p id="u1bb563d3" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/gif/1484158/1722953158493-00240227-da21-4d58-b84f-29005d53a940.gif" width="502" id="u453f8617" class="ne-image"></p><h3 id="FkFb5"><span class="ne-text">useRefå’ŒforwardRef</span></h3><p id="u9b795523" class="ne-p"><span class="ne-text">æ–‡æ¡£ï¼š</span><a href="https://zh-hans.react.dev/learn/escape-hatches" data-href="https://zh-hans.react.dev/learn/escape-hatches" class="ne-link"><span class="ne-text">è„±å›´æœºåˆ¶ â€“ React ä¸­æ–‡æ–‡æ¡£</span></a></p><h4 id="U3X7l"><span class="ne-text">æ¨¡æ‹Ÿç”Ÿå‘½å‘¨æœŸ/ç¼“å­˜å˜é‡</span></h4><p id="u7d672ec7" class="ne-p"><span class="ne-text">åˆ©ç”¨useRefåˆ›å»ºçš„æ™®é€šå˜é‡ï¼Œå¯ä»¥å…·å¤‡â€œ</span><strong><span class="ne-text">è®°å¿†</span></strong><span class="ne-text">â€åŠŸèƒ½ï¼Œç±»ä¼¼äºç±»çš„å®ä¾‹å±æ€§ã€‚åˆ©ç”¨è¿™ä¸€ç‚¹å¯ä»¥è®¾ç½®ä¸€ä¸ªflagæ¥å®ç°ç»„ä»¶</span><span class="ne-text" style="color: #DF2A3F">ä»…æ›´æ–°æ—¶è§¦å‘çš„ä»£ç æ‰§è¡Œæ—¶æœºï¼ˆæ‰€å®šä¹‰çš„å˜é‡ä¸UIæ— å…³ï¼‰</span></p><pre data-language="tsx" id="DDbbD" class="ne-codeblock language-tsx"><code>import &#123; Button &#125; from 'antd';export default () =&gt; &#123;  const [count, setCount] = useState(0);  const flag = useRef(false);  useEffect(() =&gt; &#123;    if (flag.current) &#123;      console.info('&gt;&gt;&gt; only update &gt;&gt;&gt;');    &#125;  &#125;, [count]);  const addCount = () =&gt; &#123;    setCount(count =&gt; count + 1);    setCount(count =&gt; count + 1);    setCount(count =&gt; count + 1);    flag.current = true;  &#125;;  return (    &lt;div className="p-14 text-right"&gt;      &lt;Button onClick=&#123;addCount&#125;&gt;count: &#123;count&#125;&lt;/Button&gt;    &lt;/div&gt;  );&#125;;</code></pre><p id="u8159526a" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/gif/1484158/1722953544781-cbbe70d4-990d-4eef-8baf-dab93a0d6c82.gif" width="606" id="sRmeX" class="ne-image"></p><h4 id="qeIFW"><span class="ne-text">ä½œç”¨åœ¨DOMä¸Š</span></h4><p id="ua4b76358" class="ne-p"><span class="ne-text">ä¸”ä¸ºuseRefå‡½æ•°ï¼Œåˆ™ä¸ºå¸¦æœ‰é”®ä¸ºcurrentå€¼ä¸ºDOMæœ¬èº«çš„å¯¹è±¡</span></p><div class="ne-quote"><p id="u8bdc72f1" class="ne-p"><span class="ne-text">ä¹Ÿå¯ä»¥ä½œç”¨åœ¨DOMä¸Šçš„ä¸€ä¸ªå‡½æ•°</span></p></div><pre data-language="tsx" id="B7fJl" class="ne-codeblock language-tsx"><code>import &#123; Button &#125; from 'antd';export default () =&gt; &#123;  const btn = useRef(null);  return (    &lt;div className="p-14 text-right"&gt;      &lt;Button        onClick=&#123;() =&gt; &#123;          console.log(btn);        &#125;&#125;      &gt;        &lt;button ref=&#123;btn&#125;&gt;+++&lt;/button&gt;      &lt;/Button&gt;    &lt;/div&gt;  );&#125;;</code></pre><p id="u9bc2f0f3" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/gif/1484158/1722953901046-07727d18-605a-439f-8013-c3e9a145206a.gif" width="606" id="ud5fcd269" class="ne-image"></p><h4 id="NsV5T"><span class="ne-text">ä½œç”¨åœ¨ç»„ä»¶ä¸Š</span></h4><p id="u7d6cdc8c" class="ne-p"><span class="ne-text">useRefä¸å¯ä»¥ä½œç”¨åœ¨ç»„ä»¶ä¸Šï¼Œä½†æ˜¯å­ç»„ä»¶æœ‰React.forwardRefï¼ˆç»„ä»¶è½¬å‘ï¼‰å¯ä»¥</span></p><div class="ne-quote"><p id="u74205b6f" class="ne-p"><a href="https://zh-hans.react.dev/learn/manipulating-the-dom-with-refs#accessing-another-components-dom-nodes" data-href="https://zh-hans.react.dev/learn/manipulating-the-dom-with-refs#accessing-another-components-dom-nodes" class="ne-link"><span class="ne-text">ä½¿ç”¨ ref æ“ä½œ DOM â€“ React ä¸­æ–‡æ–‡æ¡£</span></a></p></div><pre data-language="tsx" id="ACuZT" class="ne-codeblock language-tsx"><code>import &#123; useRef &#125; from 'React'const Son = React.forwardRef((props, ref) =&gt; &#123;  return &lt;div&gt;&lt;input type="text" ref=&#123;ref&#125; /&gt;&lt;/div&gt;&#125;)const A = () =&gt; &#123;  const obj = useRef()  // obj =&gt; &#123; current: inputDOM &#125;  return &lt;Son ref=&#123;obj&#125; /&gt;&#125;</code></pre><h4 id="fze30"><span class="ne-text">useImperativeHandle</span></h4><blockquote data-type="info" class="ne-alert" style="background-color: rgba(192, 221, 252, 0.5); border: 1px solid transparent; margin: 4px 0px; padding: 10px; border-radius: 4px;"><p id="u95428e1b" class="ne-p"><span class="ne-text">ä¼ é€’å¤šä¸ªrefå¯ä»¥ä½¿ç”¨useImperativeHandle</span></p></blockquote><p id="u8a9a358e" class="ne-p"><strong><span class="ne-text">çˆ¶ç»„ä»¶ï¼š</span></strong></p><p id="ub86ad3f5" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1728359332696-d91f61e4-679d-49a4-ae46-d2091cc590af.png" width="315" id="ub9408f4c" class="ne-image"></p><p id="uf7663504" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1728359286923-4942332f-562b-4536-b122-9241e0f88457.png" width="809" id="ue1dcb0e5" class="ne-image"></p><p id="u054e7213" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1728359313668-6b32e40e-29ea-4c90-9693-bc7c084d4e90.png" width="448" id="u747e696b" class="ne-image"></p><p id="u790cdb3d" class="ne-p"><strong><span class="ne-text">å­ç»„ä»¶ï¼š</span></strong></p><p id="ubfd2e2bc" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1728359321316-f443c580-71f2-4b85-ab41-2a610173ab61.png" width="447" id="u263334cf" class="ne-image"></p><h2 id="a8K2t"><span class="ne-text">ğŸ’¥</span><span class="ne-text">å‰¯ä½œç”¨ç›¸å…³</span></h2><h3 id="Vitaw"><span class="ne-text">useEffect</span></h3><p id="uc0c75b9d" class="ne-p"><span class="ne-text">æ¸²æŸ“å®Œæˆå†æ‰§è¡Œ</span></p><ol class="ne-ol"><li id="u28b6342c" data-lake-index-type="0"><span class="ne-text">æ¨¡æ‹Ÿå„ä¸ªç”Ÿå‘½å‘¨æœŸçš„æ‰§è¡Œæ—¶æœº</span></li></ol><pre data-language="tsx" id="kODBQ" class="ne-codeblock language-tsx"><code>import &#123; Button &#125; from 'antd';export default () =&gt; &#123;  const [count, setCount] = useState(0);  useEffect(() =&gt; &#123;    console.log('&gt;&gt;&gt; mount or update &gt;&gt;&gt;');    return () =&gt; &#123;      console.log('&gt;&gt;&gt; unmount or before update &gt;&gt;&gt;');    &#125;;  &#125;, [count]);  const addCount = () =&gt; &#123;    setCount(count =&gt; count + 1);    setCount(count =&gt; count + 1);    setCount(count =&gt; count + 1);  &#125;;  return (    &lt;div className="p-14 text-right"&gt;      &lt;Button onClick=&#123;addCount&#125;&gt;count: &#123;count&#125;&lt;/Button&gt;    &lt;/div&gt;  );&#125;;</code></pre><p id="u3521ec46" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/gif/1484158/1722954439473-5fa2ff19-ec35-423c-a971-9770fa0c3630.gif" width="606" id="u2299f624" class="ne-image"></p><ol start="2" class="ne-ol"><li id="u8886765a" data-lake-index-type="0"><span class="ne-text">å…³äºç¬¬äºŒä¸ªæ•°ç»„å‚æ•°</span></li></ol><ol class="ne-list-wrap"><ol ne-level="1" class="ne-ol"><li id="u29eccab1" data-lake-index-type="0"><span class="ne-text">å¦‚æœä¸è®¾ç½®ï¼Œé‚£ä¹ˆåœ¨updateæ—¶æœŸéƒ½ä¼šæ‰§è¡Œ</span></li><li id="uaa101652" data-lake-index-type="0"><span class="ne-text">å¦‚æœè®¾ç½®ç©ºæ•°ç»„ï¼ˆä¸”å›è°ƒå‡½æ•°ä¸­æ²¡æœ‰å“åº”å¼å˜é‡ï¼‰ï¼Œåˆ™åªåœ¨mountæ—¶æœŸæ‰§è¡Œä¸€æ¬¡</span></li><li id="u54d7662f" data-lake-index-type="0"><span class="ne-text">å¦‚æœuseEffectå›è°ƒå‡½æ•°ä¸­å­˜åœ¨å“åº”å¼å˜é‡ï¼Œé‚£ä¹ˆç¬¬äºŒä¸ªå‚æ•°æ•°ç»„ä¸­åº”å½“æœ‰è¯¥å“åº”å¼å˜é‡</span></li></ol></ol><h3 id="tIaOs"><span class="ne-text">useLayoutEffect</span></h3><ul class="ne-ul"><li id="uced42dc0" data-lake-index-type="0"><span class="ne-text">useEffectï¼šæ¸²æŸ“å¹¶ç»˜åˆ¶åˆ°å±å¹•ä¹‹åæ‰§è¡Œï¼Œå¼‚æ­¥</span></li><li id="uec771d52" data-lake-index-type="0"><span class="ne-text">useLayoutEffectï¼š</span><span class="ne-text" style="color: #DF2A3F">æ¸²æŸ“ä¹‹åï¼Œä½†ç»˜åˆ¶åˆ°å±å¹•ä¹‹å‰æ‰§è¡Œï¼ŒåŒæ­¥</span></li><li id="u35d81fb4" data-lake-index-type="0"><span class="ne-text" style="color: #DF2A3F">ä¸€èˆ¬å¦‚æœå›è°ƒå‡½æ•°ä¸­æœ‰DOMçš„ç›¸å…³æ“ä½œå¹¶ä¸”ä¼šæ”¹å˜æ ·å¼ï¼Œç”¨åè€…ï¼Œé¿å…DOMæ¸²æŸ“é—ªå±/ç™½å±ï¼Œä½†å‰è€…æ€§èƒ½æ–¹é¢æ›´å¥½</span></li></ul><h1 id="civf8"><span class="ne-text">âœ¨</span><span class="ne-text">æ¸²æŸ“ä¼˜åŒ–</span></h1><p id="u55cea460" class="ne-p"><span class="ne-text">é¦–å…ˆæ˜ç¡®reactç»„ä»¶é‡æ¸²æŸ“çš„è§¦å‘æ¡ä»¶ï¼š</span></p><ol class="ne-ol"><li id="u6632789a" data-lake-index-type="0"><span class="ne-text">propsæˆ–è€…stateå‘ç”Ÿæ”¹å˜è§¦å‘ç»„ä»¶é‡æ¸²æŸ“</span></li><li id="udd834e06" data-lake-index-type="0"><span class="ne-text">çˆ¶ç»„ä»¶çš„é‡æ¸²æŸ“è§¦å‘å­ç»„ä»¶çš„é‡æ¸²æŸ“</span></li></ol><p id="u81cee48c" class="ne-p"><span class="ne-text">å‚è€ƒï¼š</span></p><ul class="ne-ul"><li id="u4f49a05e" data-lake-index-type="0"><a href="https://fe.azhubaby.com/React/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html" data-href="https://fe.azhubaby.com/React/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html" class="ne-link"><span class="ne-text">äº”å¹´å‰ç«¯ä¸‰å¹´é¢è¯• - Johnny çš„å‰ç«¯çŸ¥è¯†åœ°å›¾</span></a></li><li id="u30beddec" data-lake-index-type="0"><a href="https://juejin.cn/post/6935584878071119885" data-href="https://juejin.cn/post/6935584878071119885" class="ne-link"><span class="ne-text">React æ€§èƒ½ä¼˜åŒ– | åŒ…æ‹¬åŸç†ã€æŠ€å·§ã€Demoã€å·¥å…·ä½¿ç”¨</span></a></li></ul><h2 id="y0AhM"><span class="ne-text">1 [éæ¸²æŸ“å±‚é¢] ç»„ä»¶ç»“æ„è®¾è®¡</span></h2><h3 id="OOZwL"><span class="ne-text">åˆ†ç¦»ç»„ä»¶å’ŒçŠ¶æ€</span></h3><ul class="ne-ul"><li id="u24265b51" data-lake-index-type="0"><strong><span class="ne-text">æ‹†åˆ†ç»„ä»¶</span></strong><span class="ne-text">ï¼šå°†å¤§ç»„ä»¶æ‹†åˆ†æˆå¤šä¸ªå°ç»„ä»¶ï¼Œæ¯ä¸ªå°ç»„ä»¶åªå…³æ³¨è‡ªå·±éœ€è¦çš„çŠ¶æ€ã€‚è¿™å¯ä»¥å‡å°‘çŠ¶æ€å˜åŒ–æ—¶å½±å“çš„èŒƒå›´ï¼Œé¿å…æ•´ä¸ªå¤§ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚</span></li><li id="ub346b3e2" data-lake-index-type="0"><strong><span class="ne-text">æå‡çŠ¶æ€</span></strong><span class="ne-text">ï¼šå¦‚æœå¤šä¸ªç»„ä»¶å…±äº«åŒä¸€ä»½çŠ¶æ€ï¼Œå¯ä»¥è€ƒè™‘å°†çŠ¶æ€æå‡åˆ°å®ƒä»¬çš„å…±åŒç¥–å…ˆç»„ä»¶ï¼Œç„¶åé€šè¿‡ props ä¼ é€’çŠ¶æ€ã€‚</span></li></ul><h3 id="fzXsa"><span class="ne-text">ä½¿ç”¨æ¡ä»¶æ¸²æŸ“</span></h3><p id="u362a592d" class="ne-p"><code class="ne-code"><span class="ne-text">&#123;msg &amp;&amp; (&lt;Child msg=&#123;msg&#125; onClick=&#123;onChildClick&#125; /&gt;)&#125;</span></code></p><h3 id="u9hP9"><span class="ne-text">ä½¿ç”¨ Fragment å‡å°‘ä¸å¿…è¦çš„ DOM èŠ‚ç‚¹</span></h3><h3 id="BdJyp"><span class="ne-text">lazyï¼ˆAPIï¼‰Suspenseï¼ˆAPIï¼‰</span></h3><p id="u97d3662a" class="ne-p"><span class="ne-text">å½“æ¨¡å—åŒ–å¼•å…¥ï¼ˆimportï¼‰ç»„ä»¶ï¼Œä½†åœ¨å®é™…ä»£ç ä¸­æœªä½¿ç”¨åˆ°ï¼Œä»£ç å†…éƒ¨é€»è¾‘ä»ä¼šæ‰§è¡Œï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥åˆ©ç”¨lazyä½¿ç»„ä»¶å¼‚æ­¥åŒ–åŠ è½½ï¼Œä»è€Œè¾¾åˆ°æ€§èƒ½ä¼˜åŒ–æ•ˆæœ</span></p><pre data-language="tsx" id="SPcmc" class="ne-codeblock language-tsx"><code>import &#123; lazy &#125; from 'react';const AuthRoute = lazy(() =&gt; import('./AuthRoute'));const ErrorPage = lazy(() =&gt; import('@/components/ErrorBoundary'));const NotFound = lazy(() =&gt; import('@/pages/404'));</code></pre><p id="u58cf40e3" class="ne-p"><span class="ne-text">Suspenseåˆ™ä½œä¸ºä¸­é—´è¿‡æ¸¡æ€</span></p><h3 id="LaG9J"><span class="ne-text">å¼€å‘è€…å·¥å…·åˆ†æ</span></h3><h4 id="o1klT"><span class="ne-text">Profileræ ‡ç­¾</span></h4><ul class="ne-ul"><li id="u096a476a" data-lake-index-type="0"><span class="ne-text">ä½¿ç”¨ React å¼€å‘è€…å·¥å…·çš„ â€œProfilerâ€ æ ‡ç­¾æ¥åˆ†æç»„ä»¶çš„æ¸²æŸ“æ¬¡æ•°å’Œæ€§èƒ½ç“¶é¢ˆï¼Œè¿›è€Œä¼˜åŒ–ä»£ç ã€‚</span></li></ul><pre data-language="typescript" id="JHXqX" class="ne-codeblock language-typescript"><code>const onRenderCallback = (  id: string,  phase: string,  actualDuration: number,  baseDuration: number,  startTime: number,  commitTime: number,) =&gt; &#123;  console.log(&#123; id, phase, actualDuration, baseDuration, startTime, commitTime &#125;);&#125;;</code></pre><pre data-language="tsx" id="UaeTD" class="ne-codeblock language-tsx"><code>&lt;Profiler id="App" onRender=&#123;onRenderCallback&#125;&gt;  &lt;div style=&#123;&#123;  marginTop: '200px',  textAlign: 'right'&#125;&#125;&gt;    &lt;button onClick=&#123;onAppClick&#125;&gt;      count is &#123;count&#125;    &lt;/button&gt;    &#123;msg &amp;&amp; (  &lt;Suspense fallback=&#123;&lt;div&gt;Loading...&lt;/div&gt;&#125;&gt;    &lt;Child msg=&#123;msg&#125; onClick=&#123;onChildClick&#125; /&gt;  &lt;/Suspense&gt;)&#125;  &lt;/div&gt;&lt;/Profiler&gt;</code></pre><h2 id="j8Zrq"><span class="ne-text">2 [renderé˜¶æ®µ] è·³è¿‡ä¸å¿…è¦çš„ç»„ä»¶æ›´æ–°</span></h2><h3 id="mP7zV"><span class="ne-text">memoä¼˜åŒ–å­ç»„ä»¶</span></h3><p id="u37eebeeb" class="ne-p"><span class="ne-text">æœªä½¿ç”¨memoçš„æ¸²æŸ“, å½“çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œå³ä½¿å­ç»„ä»¶æœªå‘ç”Ÿå˜åŒ–, å­ç»„ä»¶ä¹Ÿä¼šé‡æ–°æ¸²æŸ“</span></p><pre data-language="tsx" id="Uol8q" class="ne-codeblock language-tsx"><code>import &#123; Button &#125; from 'antd';const Child = () =&gt; &#123;  console.log('&gt;&gt;&gt; child component render &gt;&gt;&gt;');  return &lt;div&gt;child component&lt;/div&gt;;&#125;;export default () =&gt; &#123;  const [count, setCount] = useState(0);  const addCount = () =&gt; &#123;    setCount(count =&gt; count + 1);    setCount(count =&gt; count + 1);    setCount(count =&gt; count + 1);  &#125;;  return (    &lt;div className="p-14 text-right"&gt;      &lt;Button onClick=&#123;addCount&#125;&gt;count: &#123;count&#125;&lt;/Button&gt;      &lt;Child /&gt;    &lt;/div&gt;  );&#125;;</code></pre><p id="u6e4b1ff5" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/gif/1484158/1722955261333-678efd2a-dc1d-453f-b284-c449cdefaa3c.gif" width="606" id="u1aeb3c6d" class="ne-image"></p><p id="u8f7f8983" class="ne-p"><span class="ne-text">memoç±»ä¼¼ç±»ç»„ä»¶ä¸­çš„</span><code class="ne-code"><span class="ne-text">PureComponent</span></code><span class="ne-text">æ€§èƒ½ä¼˜åŒ–ç»„ä»¶</span></p><ol class="ne-ol"><li id="u69dda7d6" data-lake-index-type="0"><span class="ne-text" style="color: #DF2A3F">å¯¹ä¼ å…¥çš„ props è¿›è¡Œæµ…æ¯”è¾ƒï¼Œå¦‚æœ props æ²¡æœ‰å˜åŒ–ï¼Œåˆ™ä¸ä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶</span></li><li id="u993d2be2" data-lake-index-type="0"><span class="ne-text">å‡½æ•°ç»„ä»¶ä¸­å½“å“åº”å˜é‡çš„å€¼æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œä¸ä¼šé‡æ–°æ¸²æŸ“ï¼Œå’Œç±»ç»„ä»¶ä¸ä¸€æ ·</span></li><li id="u110c7560" data-lake-index-type="0"><span class="ne-text">å½“ç»„ä»¶çš„å€¼å‘ç”Ÿæ”¹å˜æ‰è¿›è¡Œrenderï¼Œåä¹‹ä¸è¿›è¡Œrender</span></li></ol><pre data-language="tsx" id="QmU14" class="ne-codeblock language-tsx"><code>import &#123; Button &#125; from 'antd';const Child = memo((props: any) =&gt; &#123;  console.log('&gt;&gt;&gt; child component render &gt;&gt;&gt;');  return &lt;div&gt;child component &#123;props.child&#125;&lt;/div&gt;;&#125;);export default () =&gt; &#123;  const [count, setCount] = useState(0);  const [child, setChild] = useState(0);  const addCount = () =&gt; &#123;    setCount(count =&gt; count + 1);    setCount(count =&gt; count + 1);    setCount(count =&gt; count + 1);  &#125;;  return (    &lt;div className="p-14 text-right"&gt;      &lt;Button onClick=&#123;addCount&#125;&gt;not change: &#123;count&#125;&lt;/Button&gt;      &lt;Button        onClick=&#123;() =&gt; &#123;          setChild(child =&gt; child + 1);        &#125;&#125;      &gt;        change: &#123;child&#125;      &lt;/Button&gt;      &lt;Child child=&#123;child&#125; /&gt;    &lt;/div&gt;  );&#125;;</code></pre><p id="uadfcf1b0" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/gif/1484158/1722955626527-53f742ae-2a86-4f79-b54c-15b7511f4eb7.gif" width="606" id="u1fbd8dee" class="ne-image"></p><h3 id="j6mrP"><span class="ne-text">é¿å…åŒ¿åå‡½æ•°å’Œå¯¹è±¡çš„é‡æ–°åˆ›å»º</span></h3><pre data-language="tsx" id="evZDX" class="ne-codeblock language-tsx"><code>import React, &#123; useState &#125; from 'react'const Child = React.memo((props?: &#123;  msg?: string  onClick?: () =&gt; void&#125;) =&gt; &#123;  console.info('[child render]')  return (    &lt;div&gt;      &#123;props?.msg || 'child default msg value'&#125;    &lt;/div&gt;  )&#125;)function App() &#123;  console.info('[App render]')  const [count, setCount] = useState(0);  const [msg, setMsg] = useState('hello');  return (      &lt;div style=&#123;&#123;        marginTop: '200px',        textAlign: 'right'      &#125;&#125;&gt;        &lt;button onClick=&#123;() =&gt; setCount((count) =&gt; count + 1)&#125;&gt;          count is &#123;count&#125;        &lt;/button&gt;        &lt;Child msg=&#123;msg&#125; onClick=&#123;() =&gt; console.log('test lambda function rerender too.')&#125; /&gt;      &lt;/div&gt;  )&#125;export default App</code></pre><p id="ua34a7728" class="ne-p"><span class="ne-text">æ¯”å¦‚è¿™ç§æƒ…å†µå³ä¾¿Childç»„ä»¶ç”¨äº†memoï¼Œä½†æ˜¯æ¯æ¬¡Appé‡æ–°æ¸²æŸ“ï¼ŒChildä¹Ÿä¼šè·Ÿç€é‡æ–°æ¸²æŸ“ã€‚å› ä¸ºåŒ¿åå‡½æ•°çš„å¼•ç”¨å‘ç”Ÿäº†å˜åŒ–</span></p><pre data-language="plain" id="DMc9t" class="ne-codeblock language-plain"><code>[App render][child render]</code></pre><h4 id="KdxTg"><span class="ne-text">ä¸ºä»€ä¹ˆè¦é¿å…åŒ¿åå‡½æ•°å’Œå¯¹è±¡ï¼Ÿ</span></h4><p id="u0886cb58" class="ne-p"><span class="ne-text">æ¯æ¬¡ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œ</span><span class="ne-text" style="text-decoration: underline">JavaScript ä¼šé‡æ–°åˆ›å»ºè¿™äº›åŒ¿åå‡½æ•°å’Œå¯¹è±¡</span><span class="ne-text">ã€‚è¿™äº›æ–°åˆ›å»ºçš„å‡½æ•°å’Œå¯¹è±¡åœ¨å†…å­˜ä¸­æ˜¯ä¸åŒçš„ï¼Œå³ä½¿å®ƒä»¬çš„å†…å®¹ç›¸åŒã€‚è¿™ä¼šå¯¼è‡´ä»¥ä¸‹é—®é¢˜ï¼š</span></p><ol class="ne-ol"><li id="u15bbe06f" data-lake-index-type="0"><strong><span class="ne-text">å¯¼è‡´å­ç»„ä»¶ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“</span></strong><span class="ne-text">ï¼š å½“å­ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„åŒ¿åå‡½æ•°æˆ–å¯¹è±¡ä½œä¸º props æ—¶ï¼Œå³ä½¿è¿™äº› props çš„å†…å®¹æ²¡æœ‰å˜åŒ–ï¼ŒReact ä»ç„¶è®¤ä¸ºè¿™äº› props å‘ç”Ÿäº†å˜åŒ–ï¼Œå› ä¸ºå®ƒä»¬æ˜¯æ–°çš„å¼•ç”¨ï¼Œè¿›è€Œå¯¼è‡´å­ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚</span></li><li id="u375b5b37" data-lake-index-type="0"><strong><span class="ne-text">æ€§èƒ½é—®é¢˜</span></strong><span class="ne-text">ï¼š é¢‘ç¹åˆ›å»ºæ–°çš„å‡½æ•°å’Œå¯¹è±¡ä¼šå¢åŠ å†…å­˜ä½¿ç”¨å’Œåƒåœ¾å›æ”¶çš„è´Ÿæ‹…ï¼Œå°¤å…¶æ˜¯åœ¨ç»„ä»¶é¢‘ç¹æ›´æ–°çš„æƒ…å†µä¸‹ï¼Œè¿™ä¼šå¯¹æ€§èƒ½äº§ç”Ÿè´Ÿé¢å½±å“ã€‚</span></li></ol><h3 id="Nmukg"><span class="ne-text">useMemoå’ŒuseCallback</span></h3><p id="u146035fb" class="ne-p"><span class="ne-text">Reactå‡½æ•°å¼ç»„ä»¶åœ¨é‡æ–°æ¸²æŸ“æ—¶å€™ï¼Œä»£ç æ‰§è¡Œä¼šå°†å‡½æ•°ä½“é‡æ–°æ‰§è¡Œï¼Œå³ä¾¿ç»“æœä¸æ˜¯é‡æ–°æ›´æ–°DOMã€‚å¦‚æœå‡½æ•°ä½“çš„ä»£ç é€»è¾‘å¤æ‚ä¼šå¸¦æ¥ä¸å°çš„æ€§èƒ½æŸè€—ï¼Œå¦‚æœèƒ½å¤Ÿå¯¹è¿™è¿‡ç¨‹ä¸­çš„éƒ¨åˆ†â€œé‡â€è¿›è¡Œâ€œè®°å¿†â€ï¼Œåˆ™ä¼šè¾ƒå¤§æå‡æ€§èƒ½ã€‚</span></p><p id="u89b5266b" class="ne-p"><span class="ne-text">å“åº”å¼å˜é‡å†…éƒ¨ä¼šè‡ªåŠ¨è¿›è¡Œè®°å¿†ï¼Œä½†æ˜¯å¦‚æœæ˜¯éå“åº”å¼å˜é‡ï¼Œæ¯”å¦‚ä¸€ä¸ªå¯¹è±¡æˆ–æ˜¯ä¸€ä¸ªå‡½æ•°ä¼ å…¥ç»„ä»¶ï¼Œè¿™å…¶å®ä¹Ÿæ˜¯æ”¹å˜äº†çš„ï¼ŒåŸå› æ˜¯å¯¹è±¡çš„å¼•ç”¨æ”¹å˜ï¼Œä¾ç„¶ä¼šå¼•èµ·DOMçš„é‡æ–°æ¸²æŸ“ï¼Œè€Œåˆ©ç”¨useMemoæˆ–æ˜¯useCallbackåˆ›å»ºçš„å¯¹è±¡ï¼ˆå¯¹è±¡ã€æ•°ç»„ã€å‡½æ•°ï¼‰åˆ™ä¼šä¿ç•™è®°å¿†åŠŸèƒ½ã€‚</span></p><h4 id="IzAwu"><span class="ne-text" style="color: #DF2A3F">useCallback</span></h4><p id="uaccf8151" class="ne-p"><span class="ne-text">useCallback ç¼“å­˜å‡½æ•°</span></p><p id="u9f6987fa" class="ne-p"><span class="ne-text">æœªä½¿ç”¨å‰</span></p><pre data-language="tsx" id="uA0FL" class="ne-codeblock language-tsx"><code>import &#123; Button &#125; from 'antd';const Child = memo((props: any) =&gt; &#123;  console.log('&gt;&gt;&gt; child component render &gt;&gt;&gt;');  return &lt;div&gt;child component &#123;props.child&#125;&lt;/div&gt;;&#125;);export default () =&gt; &#123;  const [count, setCount] = useState(0);  const [child, setChild] = useState(0);  const addCount = () =&gt; &#123;    setCount(count =&gt; count + 1);    setCount(count =&gt; count + 1);    setCount(count =&gt; count + 1);  &#125;;  const changeChild = () =&gt; &#123;    setChild(child =&gt; child + 1);  &#125;;  return (    &lt;div className="p-14 text-right"&gt;      &lt;Button onClick=&#123;addCount&#125;&gt;parent count: &#123;count&#125;&lt;/Button&gt;      &lt;Child child=&#123;child&#125; click=&#123;changeChild&#125; /&gt;    &lt;/div&gt;  );&#125;;</code></pre><p id="ud6102f84" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/gif/1484158/1722957686616-b1556796-d66a-4c53-874f-35d0fb3231ed.gif" width="606" id="ub823e853" class="ne-image"></p><p id="u86342f12" class="ne-p"><span class="ne-text">ä½¿ç”¨å</span></p><pre data-language="tsx" id="MD10Y" class="ne-codeblock language-tsx"><code>import &#123; Button &#125; from 'antd';const Child = memo((props: any) =&gt; &#123;  console.log('&gt;&gt;&gt; child component render &gt;&gt;&gt;');  return &lt;div&gt;child component &#123;props.child&#125;&lt;/div&gt;;&#125;);export default () =&gt; &#123;  const [count, setCount] = useState(0);  const [child, setChild] = useState(0);  const addCount = () =&gt; &#123;    setCount(count =&gt; count + 1);    setCount(count =&gt; count + 1);    setCount(count =&gt; count + 1);  &#125;;  const changeChild = useCallback(() =&gt; &#123;    setChild(child =&gt; child + 1);  &#125;, []);  return (    &lt;div className="p-14 text-right"&gt;      &lt;Button onClick=&#123;addCount&#125;&gt;parent count: &#123;count&#125;&lt;/Button&gt;      &lt;Child child=&#123;child&#125; click=&#123;changeChild&#125; /&gt;    &lt;/div&gt;  );&#125;;</code></pre><p id="u88a27b39" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/gif/1484158/1722957793630-76dbba53-8e2e-47bc-be4e-e6b43747c67f.gif" width="606" id="u416d0989" class="ne-image"></p><h4 id="p7jw0"><span class="ne-text" style="color: #DF2A3F">useMemo</span></h4><p id="u6522a270" class="ne-p"><span class="ne-text">useMemo ç¼“å­˜ï¼ˆå¤æ‚ï¼‰å€¼</span></p><p id="ua8e6cbf9" class="ne-p"><span class="ne-text">ä¼ å…¥ä¸€ä¸ªå¿…é¡»å¸¦æœ‰è¿”å›å€¼çš„å‡½æ•°</span></p><pre data-language="tsx" id="vxFRC" class="ne-codeblock language-tsx"><code>import &#123; Button &#125; from 'antd';const Child = memo((props: any) =&gt; &#123;  const sum = useMemo(    () =&gt;      [1, 2, 3, 4, 5, 6, 7, 8, 9, 10].reduce((acc, cur) =&gt; &#123;        // eslint-disable-next-line no-param-reassign        acc += cur;        console.info('&gt;&gt;&gt; calculate sum &gt;&gt;&gt;');        return acc;      &#125;, 0),    [],  );  console.log('&gt;&gt;&gt; child component render &gt;&gt;&gt;', sum);  return &lt;div&gt;child component &#123;props.child&#125;&lt;/div&gt;;&#125;);export default () =&gt; &#123;  const [count, setCount] = useState(0);  const [child, setChild] = useState(0);  const addCount = () =&gt; &#123;    setCount(count =&gt; count + 1);    setCount(count =&gt; count + 1);    setCount(count =&gt; count + 1);  &#125;;  return (    &lt;div className="p-14 text-right"&gt;      &lt;Button onClick=&#123;addCount&#125;&gt;not change: &#123;count&#125;&lt;/Button&gt;      &lt;Button        onClick=&#123;() =&gt; &#123;          setChild(child =&gt; child + 1);        &#125;&#125;      &gt;        change: &#123;child&#125;      &lt;/Button&gt;      &lt;Child child=&#123;child&#125; /&gt;    &lt;/div&gt;  );&#125;;</code></pre><p id="u12e02f70" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/gif/1484158/1722957265079-bfac1074-653e-45de-b1d1-515e844a8fa3.gif" width="606" id="uc653f80f" class="ne-image"></p><p id="u759c1e0d" class="ne-p"><span class="ne-text">å¦‚æœä¸ä½¿ç”¨useMemoï¼Œé‚£ä¹ˆæ¯æ¬¡childæ¸²æŸ“éƒ½ä¼šæ‰§è¡Œä¸€ésumçš„è®¡ç®—å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯å¤šäº†åæ¬¡calculate sumæ‰“å°</span></p><ol class="ne-ol"><li id="u18b45d54" data-lake-index-type="0"><span class="ne-text">ä¸¤è€…çš„ç¬¬äºŒä¸ªå‚æ•°éƒ½æ˜¯ä¾èµ–æ•°ç»„ï¼ŒåŒuseEffect</span></li></ol><pre data-language="tsx" id="HiqQ8" class="ne-codeblock language-tsx"><code>import &#123; useCallback, useMemo &#125; from 'React'const A = () =&gt; &#123;  // 1. every render -&gt; run  const fun = () =&gt; &#123;&#125;  // 2. useCallback (ignore const error...)  const fun = useCallback(() =&gt; &#123;&#125;, [])  // 3. useMemo (ignore const error...)  const fun = useMemo(() =&gt; () =&gt; &#123;&#125;, [])  const a = useMemo(() =&gt; [1, 2, 3], [])    return &lt;div onClick=&#123;fun&#125; a=&#123;a&#125;&gt;&lt;/div&gt;&#125;</code></pre><h2 id="QPxQG"><span class="ne-text">3 [commité˜¶æ®µ] å‡å°‘æäº¤è€—æ—¶</span></h2><h3 id="lF7Xw"><span class="ne-text">æ‰¹é‡çŠ¶æ€æ›´æ–°</span></h3><p id="u1ad1a4d7" class="ne-p"><span class="ne-text">æ‰¹é‡æ›´æ–°æ˜¯æŒ‡ React å°†å¤šæ¬¡ state æ›´æ–°è¿›è¡Œåˆå¹¶å¤„ç†ï¼Œæœ€ç»ˆåªè¿›è¡Œä¸€æ¬¡æ¸²æŸ“ï¼Œä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚</span></p><p id="u808cbbe9" class="ne-p"><span class="ne-text">ä¾‹å¦‚ï¼Œå¦‚æœåœ¨åŒä¸€ä¸ªç‚¹å‡»äº‹ä»¶ä¸­æœ‰ä¸¤ä¸ªçŠ¶æ€æ›´æ–°ï¼ŒReact æ€»æ˜¯ä¼šæŠŠå®ƒä»¬æ‰¹é‡å¤„ç†æˆä¸€ä¸ªé‡æ–°æ¸²æŸ“ã€‚</span></p><p id="ubea297dc" class="ne-p"><span class="ne-text" style="text-decoration: underline">ä» React 18 çš„ createRoot å¼€å§‹ï¼Œä¸è®ºåœ¨å“ªé‡Œï¼Œ æ‰€æœ‰æ›´æ–°éƒ½å°†è‡ªåŠ¨è¿›è¡Œæ‰¹é‡æ›´æ–°ã€‚</span></p><p id="u0c808730" class="ne-p"><span class="ne-text">è¿™æ„å‘³ç€ setTimeoutã€promisesã€åŸç”Ÿäº‹ä»¶å¤„ç†å‡½æ•°æˆ–å…¶ä»–ä»»ä½•äº‹ä»¶çš„æ‰¹é‡æ›´æ–°éƒ½å°†ä¸ React äº‹ä»¶ä¸€æ ·ï¼Œä»¥ç›¸åŒçš„æ–¹å¼è¿›è¡Œæ‰¹é‡æ›´æ–°ã€‚</span></p><p id="uec0fa77e" class="ne-p"><span class="ne-text">æ¯”å¦‚ä¸‹é¢è¿™ä¸ªç»„ä»¶ï¼Œåœ¨React 18ä¹‹å‰ä¼šæ¸²æŸ“ä¸¤æ¬¡ï¼Œä½†æ˜¯React 18å¯ä»¥è‡ªåŠ¨æ‰¹å¤„ç†</span></p><pre data-language="tsx" id="nYvKn" class="ne-codeblock language-tsx"><code>function App() &#123;  console.info('[App render]')  const [count, setCount] = useState(0);  const [msg, setMsg] = useState('hello');  const onChildClick = useCallback(() =&gt; &#123;    console.log('test lambda function rerender too.')  &#125;, [])  const onAppClick = () =&gt; &#123;    fetch(`https://api.github.com/repos/vuejs/core/commits?per_page=3&amp;sha=main`)    .then(res =&gt; res.json())    .then(data =&gt; &#123;      console.info('&gt;&gt;&gt; fetch data &gt;&gt;&gt;', data)      setCount((count) =&gt; count + 1)      setMsg('hello world')    &#125;)  &#125;  return (      &lt;div style=&#123;&#123;        marginTop: '200px',        textAlign: 'right'      &#125;&#125;&gt;        &lt;button onClick=&#123;onAppClick&#125;&gt;          count is &#123;count&#125;        &lt;/button&gt;        &#123;msg &amp;&amp; (&lt;Child msg=&#123;msg&#125; onClick=&#123;onChildClick&#125; /&gt;)&#125;      &lt;/div&gt;  )&#125;</code></pre><p id="u9183faf6" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/gif/1484158/1724210023557-19c1854b-9368-476e-8932-c1c163e4131b.gif" width="601" id="ud36afdbe" class="ne-image"></p><p id="u8d014e2b" class="ne-p"><span class="ne-text">å¦‚æœæƒ³å–æ¶ˆæ‰¹å¤„ç†</span></p><pre data-language="tsx" id="mwpjO" class="ne-codeblock language-tsx"><code>function App() &#123;  console.info('[App render]')  const [count, setCount] = useState(0);  const [msg, setMsg] = useState('hello');  const onChildClick = useCallback(() =&gt; &#123;    console.log('test lambda function rerender too.')  &#125;, [])  const onAppClick = () =&gt; &#123;    fetch(`https://api.github.com/repos/vuejs/core/commits?per_page=3&amp;sha=main`)    .then(res =&gt; res.json())    .then(data =&gt; &#123;      console.info('&gt;&gt;&gt; fetch data &gt;&gt;&gt;', data)      flushSync(() =&gt; &#123;        setCount((count) =&gt; count + 1)      &#125;);      flushSync(() =&gt; &#123;        setMsg('hello world')      &#125;);    &#125;)  &#125;  return (      &lt;div style=&#123;&#123;        marginTop: '200px',        textAlign: 'right'      &#125;&#125;&gt;        &lt;button onClick=&#123;onAppClick&#125;&gt;          count is &#123;count&#125;        &lt;/button&gt;        &#123;msg &amp;&amp; (&lt;Child msg=&#123;msg&#125; onClick=&#123;onChildClick&#125; /&gt;)&#125;      &lt;/div&gt;  )&#125;</code></pre><p id="u3fea0a7e" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/gif/1484158/1724210142265-f1d60b88-97ee-4dcd-91d9-47115ab86615.gif" width="601" id="u16daebe5" class="ne-image"></p><p id="uc949ada4" class="ne-p"><span class="ne-text">å¯ä»¥çœ‹åˆ°å¤šæ‰§è¡Œäº†ä¸€æ¬¡</span><code class="ne-code"><span class="ne-text">[App render]</span></code></p><p id="ubdf78d0c" class="ne-p"><a href="https://juejin.cn/post/6982433531792195621" data-href="https://juejin.cn/post/6982433531792195621" target="_blank" class="ne-link"><span class="ne-text">https://juejin.cn/post/6982433531792195621</span></a></p><h3 id="jMG4f"><span class="ne-text">é¿å…ä¸å¿…è¦çš„ Context é‡æ–°æ¸²æŸ“</span></h3><ul class="ne-ul"><li id="ufdd1ae4f" data-lake-index-type="0"><span class="ne-text">Context æ˜¯éå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œä½†ä¸æ…ä½¿ç”¨å¯èƒ½å¯¼è‡´ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ã€‚å°† Context æä¾›è€…å°½é‡æ‹†åˆ†æˆå¤šä¸ªå°çš„ä¸Šä¸‹æ–‡ï¼Œæˆ–è€…åœ¨å¿…è¦æ—¶ä½¿ç”¨ </span><code class="ne-code"><span class="ne-text">useMemo</span></code><span class="ne-text"> ç¼“å­˜ Context å€¼ã€‚</span></li></ul><pre data-language="tsx" id="hyKWK" class="ne-codeblock language-tsx"><code>const value = useMemo(() =&gt; (&#123; state, dispatch &#125;), [state, dispatch]);return (  &lt;MyContext.Provider value=&#123;value&#125;&gt;    &#123;children&#125;  &lt;/MyContext.Provider&gt;);</code></pre><p id="ua33b3b17" class="ne-p"><br></p><h1 id="aqLAy"><span class="ne-text">ğŸˆ</span><span class="ne-text">å…¶ä»–Hooks</span></h1><h3 id="sJ7E2"><span class="ne-text">useContextå’ŒcreateContextï¼ˆAPIï¼‰</span></h3><p id="u0ab2b1cf" class="ne-p"><span class="ne-text">è·¨ç»„ä»¶é€šä¿¡</span></p><pre data-language="tsx" id="WFHKk" class="ne-codeblock language-tsx"><code>import &#123; useContext, createContext &#125; from 'React'// not Provider value -&gt; render default valueconst C = createContext('default value...')const GSon = () =&gt; &#123;  const value = useContext(C)  // value -&gt; something...  return &lt;div&gt;GSon template...&lt;/div&gt;&#125;const Son = () =&gt; &#123;  return &lt;GSon /&gt;&#125;const A = () =&gt; &#123;  return (    &lt;C.Provider value='something...'&gt;    &lt;Son ref=&#123;obj&#125; /&gt;    &lt;/C.Provider&gt;  )&#125;</code></pre><h3 id="ejO8u"><span class="ne-text">useReducer</span></h3><p id="u76ab5b03" class="ne-p"><span class="ne-text">ç®¡ç†å¤šä¸ªæœ‰å…³è”çš„å“åº”å¼å˜é‡</span></p><pre data-language="tsx" id="DGPnc" class="ne-codeblock language-tsx"><code>import &#123; useReducer &#125; from 'Reactconst loginState = &#123; isLogin: true, isLogout: false &#125;const loginReducer = (state, action) =&gt; &#123;  switch(action.type) &#123;    case 'login':      return &#123; isLogin: true, isLogout: false &#125;    case 'logout':      return &#123; isLogin: false, isLogout: true &#125;    default:      return new Error()  &#125;&#125;const A = () =&gt; &#123;  const [state, LoginDispatch] = useReducer(loginReducer, loginState)  const clickEvent = () =&gt; &#123;    loginDispatch(&#123; type: state.isLogin ? 'logout' : 'login' &#125;)   &#125;  return (    &lt;button onClick=&#123;clickEvent&#125;&gt;&#123;state.isLogin ? 'login', 'logout'&#125;&lt;/button&gt;  )&#125;</code></pre><h3 id="KY90y"><span class="ne-text">å¹¶å‘æ¨¡å¼</span></h3><ol class="ne-ol"><li id="uf47bf115" data-lake-index-type="0"><span class="ne-text">React18ä¹‹å‰ï¼Œæ¸²æŸ“æ˜¯ä¸€ä¸ªå•ä¸€çš„ã€ä¸é—´æ–­çš„ã€åŒæ­¥çš„äº‹åŠ¡ï¼Œä¸€æ—¦æ¸²æŸ“å¼€å§‹ï¼Œå°±ä¸èƒ½è¢«ä¸­æ–­</span></li><li id="ufee7a81a" data-lake-index-type="0"><span class="ne-text">React18å¼•å…¥å¹¶å‘æ¨¡å¼ï¼Œå®ƒå…è®¸ä½ å°†æ›´æ–°ä½œä¸ºä¸€ä¸ªtransitionsï¼Œè¿™ä¼šå‘Šè¯‰Reactä»–ä»¬å¯ä»¥è¢«ä¸­æ–­æ‰§è¡Œã€‚è¿™æ ·å¯ä»¥æŠŠç´§æ€¥çš„ä»»åŠ¡å…ˆæ›´æ–°ä½ ï¼Œä¸ç´§æ€¥çš„ä»»åŠ¡åæ›´æ–°</span></li></ol><h3 id="JrEY1"><span class="ne-text">startTransitionï¼ˆAPIï¼‰</span></h3><pre data-language="tsx" id="mCdB8" class="ne-codeblock language-tsx"><code>import &#123; startTransition &#125; from 'React'const A = () =&gt; &#123;  ...  const fun = () =&gt; &#123;    // ç´§æ€¥ä»»åŠ¡    setA('')    // ä¸ç´§æ€¥ä»»åŠ¡ï¼ˆå°†å†…éƒ¨çš„ä»»ä½•éç´§æ€¥çŠ¶æ€æ›´æ–°æ ‡è®°ä¸º Transitionï¼‰    startTransition(() =&gt; setB(''))  &#125;  return &lt;div&gt;&lt;/div&gt;&#125;</code></pre><h3 id="J0AC9"><span class="ne-text">useTransitionå’ŒuseDeferredValue</span></h3><ol class="ne-ol"><li id="ubb651c66" data-lake-index-type="0"><span class="ne-text">useTransitionè¿”å›ä¸€ä¸ªçŠ¶æ€å€¼è¡¨ç¤ºè¿‡æ¸¡ä»»åŠ¡çš„ç­‰å¾…çŠ¶æ€ï¼Œä»¥åŠä¸€ä¸ªå¯åŠ¨è¯¥è¿‡æ¸¡ä»»åŠ¡çš„å‡½æ•°</span></li></ol><pre data-language="tsx" id="BihZN" class="ne-codeblock language-tsx"><code>import &#123; useTransition &#125; from 'React'const A = () =&gt; &#123;  ...  const [pending, startTransition] = useTransition()  const fun = () =&gt; &#123;    // ç´§æ€¥ä»»åŠ¡    setA('')    // ä¸ç´§æ€¥ä»»åŠ¡ï¼ˆå°†å†…éƒ¨çš„ä»»ä½•éç´§æ€¥çŠ¶æ€æ›´æ–°æ ‡è®°ä¸º Transitionï¼‰    startTransition(() =&gt; setB(''))  &#125;  return &lt;div&gt;&lt;/div&gt;&#125;</code></pre><ol start="2" class="ne-ol"><li id="u279291ea" data-lake-index-type="0"><span class="ne-text">useDeferredValueæ¥å—ä¸€ä¸ªå€¼ï¼Œå¹¶è¿”å›è¯¥å€¼çš„æ–°å‰¯æœ¬ï¼Œè¯¥å‰¯æœ¬å°†æ¨è¿Ÿåˆ°æ›´ç´§æ€¥åœ°æ›´æ–°ä¹‹å</span></li></ol><pre data-language="tsx" id="wpppu" class="ne-codeblock language-tsx"><code>import &#123; useDeferredValue, useState &#125; from 'React'const A = () =&gt; &#123;  const [a, setA] = useState('')  // aD =&gt; ä¸ç´§æ€¥æ—¶å€™çš„å€¼ï¼ˆåŒaï¼‰ï¼Œä¹Ÿå°±æ˜¯å»¶è¿Ÿä¹‹åçš„å€¼  const aD = useDeferredValue(a)  ...  return &lt;div&gt;&lt;/div&gt;&#125;</code></pre><h3 id="e3VEY"><span class="ne-text">è‡ªå®šä¹‰hook</span></h3><ol class="ne-ol"><li id="ue75e76dd" data-lake-index-type="0"><span class="ne-text">å‘½åé€šå¸¸ä½¿ç”¨useå¼€å¤´</span></li><li id="u2bce0e3e" data-lake-index-type="0"><span class="ne-text">egï¼š</span></li></ol><pre data-language="tsx" id="bzPAC" class="ne-codeblock language-tsx"><code>import &#123; useState, useEffect &#125; from 'React'const useMouseXY = () =&gt; &#123;  const [x, setX] = usestate(0)  const [y, setY] = usestate(0)  useEffect(() =&gt; &#123;    function move(e) &#123;      setX(e.pageX)      setY(e.pageY)    &#125;    document.addEventListener('mousemove', move)    return () =&gt; document.removeEventListener('mousemove', move)  &#125;, [])    return &#123; x, y &#125;&#125;// use const &#123; x, y &#125; = useMouseXY()</code></pre><h3 id="l7U2I"><span class="ne-text">Suspense</span></h3><p id="ueed27788" class="ne-p"><span class="ne-text">ç»„ä»¶åŠ è½½ä¸­æˆ–æ˜¯åˆ‡æ¢è¿‡ç¨‹ä¸­çš„â€œä¸­é—´æ€â€</span></p><pre data-language="tsx" id="A9bB5" class="ne-codeblock language-tsx"><code>import &#123; Suspense, useState &#125; from 'react';import &#123; RouterProvider &#125; from 'react-router-dom';import router from '@/router/index';import Loading from '@/components/Loading';function MyApp() &#123;  const [show, setShow] = useState(true)  const clickEvent = () =&gt; setShow(!show)  return (    &lt;&gt;      &lt;button onClick=&#123;clickEvent&#125;&gt;btn&lt;/button&gt;      &lt;Suspense fallback=&#123;&lt;Loading /&gt;&#125;&gt;        &#123;show ? &lt;RouterProvider router=&#123;router&#125; /&gt; : &lt;&gt;other template&lt;/&gt;&#125;      &lt;/Suspense&gt;    &lt;/&gt;  );&#125;export default MyApp;</code></pre><p id="ud8c681f0" class="ne-p"><span class="ne-text">ç»“åˆstartTransitionä½¿ç”¨ï¼š</span></p><p id="uad00f696" class="ne-p"><span class="ne-text">å¦‚æœéœ€è¦åˆ‡æ¢è¿‡ç¨‹ä¸­ä¸å±•ç¤ºloadingçš„åŠ è½½æ€ï¼Œåˆ™å°†ä¸Šè¿°ä»£ç ä¸­çš„åˆ‡æ¢é€»è¾‘è½¬ä¸ºå¹¶å‘å¼‚æ­¥å³å¯</span></p><pre data-language="tsx" id="CrYvA" class="ne-codeblock language-tsx"><code>const clickEvent = () =&gt; startTransition(() =&gt; setShow(!show))</code></pre><h3 id="D6zkm"><span class="ne-text">é”™è¯¯è¾¹ç•Œæ•è·</span></h3><p id="uce23988c" class="ne-p"><span class="ne-text">å¦‚æœç¼–å†™çš„ç»„ä»¶å†…éƒ¨æŠ¥é”™ï¼Œé‚£ä¹ˆreactæ¸²æŸ“ä¼šæ¸…é™¤æ ¹èŠ‚ç‚¹DOMï¼ŒReactå®˜æ–¹æ–‡æ¡£æš‚æ—¶åªæœ‰ç±»ç»„ä»¶ç¼–å†™çš„ç¤ºä¾‹ä»£ç ã€‚å…¶æ ¸å¿ƒé€»è¾‘åœ¨ç±»ç»„ä»¶ä¸Šæ”¯æŒå…³é”®çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•getDerivedStateFromError()å’ŒcomponentDidCatch()ï¼Œæ— æ³•å°†é”™è¯¯è¾¹ç•Œç¼–å†™ä¸ºå‡½æ•°å¼ç»„ä»¶ï¼ŒåŒæ—¶ä»¥ä¸‹å‡ ç§é”™è¯¯æƒ…å†µï¼Œä¹Ÿæ•è·ä¸åˆ°ï¼š</span></p><ol class="ne-ol"><li id="u153d38e4" data-lake-index-type="0"><span class="ne-text">å¼‚æ­¥ä»£ç </span></li><li id="u5764c7ba" data-lake-index-type="0"><span class="ne-text">äº‹ä»¶å¤„ç†å‡½æ•°</span></li><li id="ubdf3f9b1" data-lake-index-type="0"><span class="ne-text">æœåŠ¡å™¨ç»„ä»¶</span></li><li id="uae94c9a5" data-lake-index-type="0"><span class="ne-text">Error Boundaryè‡ªèº«</span></li></ol><p id="u01d1627d" class="ne-p"><span class="ne-text">å…·ä½“çš„å®Œæ•´å°è£… TODO: </span></p><h1 id="MuBiq"><span class="ne-text">ğŸˆ</span><span class="ne-text">ReactDOM</span></h1><h3 id="SHFHy"><span class="ne-text">createPortal</span></h3><ol class="ne-ol"><li id="u729bc8ae" data-lake-index-type="0"><span class="ne-text">å¯ä»¥æŒ‡å®šèŠ‚ç‚¹æŒ‚è½½åˆ°æŒ‡å®šç›®æ ‡DOMèŠ‚ç‚¹</span></li></ol><pre data-language="tsx" id="TbQEn" class="ne-codeblock language-tsx"><code>// templateconst A = () =&gt; ReactDOM.createPortal(&lt;div&gt;info&lt;/div&gt;, document.body)</code></pre><ol start="2" class="ne-ol"><li id="u21e16b5d" data-lake-index-type="0"><span class="ne-text">å¯¹äºä¸€äº›å…¨å±€ç»„ä»¶ï¼ˆmessageï¼‰ï¼ŒDOMçš„æŒ‚åœ¨å¯èƒ½ä¸åœ¨rootæ ¹èŠ‚ç‚¹å†…ï¼Œè‡ªå®šä¹‰æŒ‚åœ¨æŒ‡å®šDOMèŠ‚ç‚¹ï¼Œé™¤äº†ä¸Šè¿°createPortalæ–¹å¼ï¼Œè¿˜æœ‰reactçš„createRootæ–¹å¼</span></li></ol><h3 id="JcFgv"><span class="ne-text">flushSync</span></h3><pre data-language="tsx" id="b1wUu" class="ne-codeblock language-tsx"><code>import &#123; useState &#125; from 'React'import &#123; flushSync &#125; from 'ReactDDOM'const A = () =&gt; &#123;  const [a, setA] = useState(1)  const [b, setB] = useState('b')  const addA = () =&gt; &#123;    setA(a + 1)    setA(a + 1)    setA(a + 1)  &#125;  flushSync(() =&gt; &#123;    setA(a + 1)  &#125;)  flushSync(() =&gt; &#123;    setB('bb')  &#125;)  return &lt;div onClick=&#123;addA&#125;&gt;a value: &#123;a&#125;&lt;/div&gt;&#125;</code></pre><h1 id="Z7LG9"><span class="ne-text">ğŸˆ</span><span class="ne-text">Others</span></h1><h3 id="OSkL5"><span class="ne-text">hooks</span></h3><ol class="ne-ol"><li id="u788f32a8" data-lake-index-type="0"><span class="ne-text" style="background-color: #FCE75A">use</span><span class="ne-text">ï¼šreact18ä¸­çš„å¤„ç†å¼‚æ­¥èµ„æºçš„ä¸€ç§æ–¹å¼ï¼Œå¯è§£æPromiseç­‰ï¼Œä½¿ç”¨å‰æä¸ºæœåŠ¡ç«¯æ¸²æŸ“æˆ–è€…å¼€å¯å¼‚æ­¥çš„å®¢æˆ·ç«¯</span></li><li id="u36a4991a" data-lake-index-type="0"><span class="ne-text">useDebugValue</span></li><li id="u9105ac7b" data-lake-index-type="0"><span class="ne-text">useIdï¼šç”Ÿæˆå”¯ä¸€idï¼Œæ¯”å¦‚ä¸€ä¸ªé¡µé¢éœ€è¦è°ƒç”¨ä¸¤ä¸ªç›¸åŒç»„ä»¶ï¼Œå¹¶ä¸”éœ€è¦ç»™å„è‡ªç»„ä»¶ä¸€ä¸ªå”¯ä¸€idï¼ŒuseIdå°±å¾ˆé€‚ç”¨</span></li><li id="u598cfe0c" data-lake-index-type="0"><span class="ne-text">useImperativeHandle</span></li><li id="u92b53f9f" data-lake-index-type="0"><span class="ne-text">useInsertionEffectï¼šé€‚ç”¨äºCSS-in-JSç›¸å…³åœºæ™¯</span></li><li id="ufc9310f0" data-lake-index-type="0"><span class="ne-text" style="background-color: #FBDE28">useOptimistic</span><span class="ne-text">ï¼šè¿‡æ¸¡æ€ï¼Œæœ‰ç‚¹ç±»ä¼¼Vueä¸­çš„Suspense</span></li><li id="u52d3cf14" data-lake-index-type="0"><span class="ne-text">useSyncExternalStore</span></li></ol><h3 id="lMQGb"><span class="ne-text">ç»„ä»¶</span></h3><ol class="ne-ol"><li id="ue6803775" data-lake-index-type="0"><span class="ne-text">&lt;Profiler&gt;ï¼šæµ‹é‡ç»„ä»¶æ¸²æŸ“æ€§èƒ½</span></li><li id="u7fb3e3ac" data-lake-index-type="0" style="text-align: left"><span class="ne-text">&lt;StrictMode&gt;ï¼šä¸¥æ ¼æ¨¡å¼ï¼Œå¸¸ç”¨äºå¼€å‘ç¯å¢ƒå†å¼€å‘è¿‡ç¨‹ä¸­å°±å‘ç°é”™è¯¯ï¼Œä½†æ˜¯ä¼šå¤šæ‰§è¡Œç»„ä»¶æ¸²æŸ“ä¸€æ¬¡</span></li></ol></div>]]></content>
    
    
      
      
        
        
    <summary type="html">

&lt;div class=&quot;lake-content&quot; typography=&quot;classic&quot;&gt;&lt;blockquote data-type=&quot;info&quot; class=&quot;ne-alert&quot; style=&quot;background-color: rgba(192, 221, 252,</summary>
        
      
    
    
    
    <category term="Webå¼€å‘" scheme="https://www.wztlink1013.com/categories/Web%E5%BC%80%E5%8F%91/"/>
    
    <category term="React" scheme="https://www.wztlink1013.com/categories/Web%E5%BC%80%E5%8F%91/React/"/>
    
    
  </entry>
  
  <entry>
    <title>MongoDBå¼€å¯äº‹åŠ¡</title>
    <link href="https://www.wztlink1013.com/blog/uq766nlmm1cuh7kk/"/>
    <id>https://www.wztlink1013.com/blog/uq766nlmm1cuh7kk/</id>
    <published>2024-08-27T09:16:42.000Z</published>
    <updated>2024-11-16T19:50:36.000Z</updated>
    
    <content type="html"><![CDATA[<div class="lake-content" typography="classic"><p id="u25867f14" class="ne-p"><span class="ne-text">å‰ç½®æ¡ä»¶ï¼šä¸‹è½½MongoDBï¼š</span><a href="https://www.mongodb.com/try/download/community-kubernetes-operator" data-href="https://www.mongodb.com/try/download/community-kubernetes-operator" target="_blank" class="ne-link"><span class="ne-text">https://www.mongodb.com/try/download/community-kubernetes-operator</span></a></p><p id="u424b79f4" class="ne-p" style="text-align: center"><strong><span class="ne-text" style="color: #DF2A3F">---------- å¼€å¯äº‹åŠ¡ ----------</span></strong></p><p id="u41886116" class="ne-p"><span class="ne-text">æ”¹é…ç½®æ–‡ä»¶</span></p><p id="u235b9d0c" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1724779029642-5d8867f7-34f0-489d-8880-be7746dc89e0.png" width="701.8181666066827" id="u8b73b5a6" class="ne-image"></p><p id="uacbbd41d" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1724779047217-5fa3b080-4dd0-4277-b25f-8cc956e30c7c.png" width="705.4545301642303" id="uf06c519d" class="ne-image"></p><p id="uedb9d6be" class="ne-p"><span class="ne-text">é‡æ–°å¯åŠ¨mongodbæœåŠ¡</span></p><p id="u9f901c03" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1724779249047-8b4cfe26-d714-470f-9b73-2ac077569edf.png" width="768.181801531926" id="u9c7be902" class="ne-image"></p><p id="u56361093" class="ne-p"><span class="ne-text">æ–°ç‰ˆmondodbæ²¡æœ‰å¯æ‰§è¡Œçš„bashï¼Œæ‰€ä»¥éœ€è¦ä¸‹ä¸€ä¸ªmongoshï¼ˆ</span><a href="https://www.mongodb.com/try/download/shell" data-href="https://www.mongodb.com/try/download/shell" target="_blank" class="ne-link"><span class="ne-text">https://www.mongodb.com/try/download/shell</span></a><span class="ne-text">ï¼‰</span></p><p id="uccb99e42" class="ne-p"><span class="ne-text">cmdä¸­è¾“å…¥mongosh</span></p><p id="u0f49920f" class="ne-p"><span class="ne-text">ç„¶åè¾“å…¥rs.initiate()</span></p><p id="u971ec363" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1724779149651-a2a94509-bd4f-4a24-a68f-86cd5381a84c.png" width="1011.8181598876138" id="RgwTV" class="ne-image"></p><p id="u85dfe517" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1724779201995-71147800-146f-44d9-a120-1e2f1c25a98a.png" width="1011.8181598876138" id="u5023dbad" class="ne-image"></p><p id="u79fbc486" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1724779216195-61505658-b65c-4fec-98f1-fab1fac79f19.png" width="1011.8181598876138" id="ua2dbe8cb" class="ne-image"><span class="ne-text">æœ‰è¿™ä¸ªè¯´æ˜è®¾ç½®æ­£ç¡®</span></p></div>]]></content>
    
    
      
      
        
        
    <summary type="html">

&lt;div class=&quot;lake-content&quot; typography=&quot;classic&quot;&gt;&lt;p id=&quot;u25867f14&quot; class=&quot;ne-p&quot;&gt;&lt;span class=&quot;ne-text&quot;&gt;å‰ç½®æ¡ä»¶ï¼šä¸‹è½½MongoDBï¼š&lt;/span&gt;&lt;a</summary>
        
      
    
    
    
    <category term="Webå¼€å‘" scheme="https://www.wztlink1013.com/categories/Web%E5%BC%80%E5%8F%91/"/>
    
    <category term="DataBase" scheme="https://www.wztlink1013.com/categories/Web%E5%BC%80%E5%8F%91/DataBase/"/>
    
    
  </entry>
  
  <entry>
    <title>Vue3æºç debuggerï¼šå“åº”å¼å˜é‡å€¼å˜åŒ–æ‰§è¡Œæµç¨‹</title>
    <link href="https://www.wztlink1013.com/blog/khg4u3f89ozvkuta/"/>
    <id>https://www.wztlink1013.com/blog/khg4u3f89ozvkuta/</id>
    <published>2024-08-22T22:19:37.000Z</published>
    <updated>2024-11-16T19:50:36.000Z</updated>
    
    <content type="html"><![CDATA[<div class="lake-content" typography="classic"><h2 id="ZInLD"><span class="ne-text">å“åº”å¼å˜é‡èµ‹å€¼</span></h2><p id="u0dd506fb" class="ne-p"><span class="ne-text">å“åº”å¼å˜é‡commitsé¦–æ¬¡èµ‹å€¼æ¥å£æ‰€è¿”å›çš„æ•°æ®</span></p><p id="ub497ee64" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1724654176733-c4bf03bc-1cda-44c9-bd2e-a06c0455b152.png" width="690" id="u077bd02b" class="ne-image"></p><p id="u1d2e6444" class="ne-p"><br></p><p id="ue05c8c2f" class="ne-p"><span class="ne-text">è¿›å…¥è§¦å‘Proxyçš„setæ‹¦æˆªã€åœ¨createAppçš„å®ä¾‹åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œå°±å·²ç»å°†dataé€‰é¡¹å“åº”åŒ–ï¼Œå¯ä»¥å‚è€ƒä¹‹å‰çš„æ–‡ç« ã€‘</span></p><p id="ua0b47a01" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1724394084509-5821f367-a7ec-4083-952d-f9946487f725.png" width="1656" id="EBhF6" class="ne-image"></p><p id="uaa02f888" class="ne-p"><span class="ne-text"></span></p><p id="ud9e1c7d6" class="ne-p"><span class="ne-text">æœ€ç»ˆè¿›å…¥triggerå‡½æ•°</span></p><p id="u84bb2451" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1724394327576-b64a6b93-64a6-44cd-9213-917e0fcb7182.png" width="1661" id="ubc198d8a" class="ne-image"></p><ul class="ne-ul"><li id="u298edc8a" data-lake-index-type="0"><span class="ne-text">174è¡Œï¼šè§¦å‘å‰¯ä½œç”¨</span></li><li id="u9de3109a" data-lake-index-type="0"><span class="ne-text">177è¡Œï¼šåˆ©ç”¨Reflectè¿”å›æ‰€èµ‹å€¼çš„å†…å®¹ï¼Œå…·ä½“å¯æŸ¥çœ‹ï¼ˆ</span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/set" data-href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/set" target="_blank" class="ne-link"><span class="ne-text">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/set</span></a><span class="ne-text">ï¼‰</span></li></ul><h2 id="u59PG"><span class="ne-text">trigger</span></h2><p id="u6db26817" class="ne-p"><span class="ne-text">è¿›å…¥triggerå†…éƒ¨</span></p><p id="u5bebbe2e" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1724394939956-4ccb1953-3f06-4352-9f31-104e5c849267.png" width="1230" id="u60c1a4a4" class="ne-image"></p><ul class="ne-ul"><li id="uab2f9e33" data-lake-index-type="0"><span class="ne-text">targetå®é™…ä¸Šæ˜¯é€‰é¡¹å¼ä¸­çš„data</span></li><li id="u97783b7d" data-lake-index-type="0"><strong><span class="ne-text">targetMapæ˜¯ä»ä¸€å¼€å§‹æ³¨å†Œå“åº”åŒ–å°±æ”¶é›†çš„å“åº”æ˜ å°„è¡¨</span></strong></li></ul><h3 id="Pcy42"><span class="ne-text">æ‰§è¡Œtrigger</span></h3><p id="u573fd450" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1724654451358-19007aae-128d-4dc4-a160-d5e9643c71de.png" width="1589" id="ue0329fe8" class="ne-image"></p><ul class="ne-ul"><li id="ubb3f36a4" data-lake-index-type="0"><code class="ne-code"><span class="ne-text" style="color: var(--md-box-samantha-normal-text-color) !important; font-size: 16px">startBatch()</span></code><span class="ne-text" style="color: var(--md-box-samantha-normal-text-color) !important; font-size: 16px">å’Œ</span><code class="ne-code"><span class="ne-text" style="color: var(--md-box-samantha-normal-text-color) !important; font-size: 16px">endBatch()</span></code><span class="ne-text" style="color: var(--md-box-samantha-normal-text-color) !important; font-size: 16px">ï¼š</span></li></ul><ul class="ne-list-wrap"><ul ne-level="1" class="ne-ul"><li id="uc720a402" data-lake-index-type="0"><code class="ne-code"><span class="ne-text" style="color: initial; font-size: 14px">startBatch()</span></code><span class="ne-text" style="color: initial; font-size: 16px">ç”¨äºå¼€å¯ä¸€ä¸ªæ‰¹é‡æ›´æ–°çš„é˜¶æ®µã€‚åœ¨è¿™ä¸ªé˜¶æ®µä¸­ï¼Œå“åº”å¼æ•°æ®çš„å˜åŒ–ä¸ä¼šç«‹å³è§¦å‘ä¾èµ–çš„æ›´æ–°ï¼Œè€Œæ˜¯ä¼šè¢«æ”¶é›†èµ·æ¥ï¼Œç­‰åˆ°</span><code class="ne-code"><span class="ne-text" style="color: initial; font-size: 14px">endBatch()</span></code><span class="ne-text" style="color: initial; font-size: 16px">è¢«è°ƒç”¨åå†ç»Ÿä¸€è¿›è¡Œå¤„ç†ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯å¯ä»¥é¿å…åœ¨çŸ­æ—¶é—´å†…é¢‘ç¹åœ°è§¦å‘æ›´æ–°ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªå¾ªç¯ä¸­å¤šæ¬¡ä¿®æ”¹å“åº”å¼æ•°æ®æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ‰¹é‡æ›´æ–°æ¥å‡å°‘ä¸å¿…è¦çš„é‡å¤æ›´æ–°æ“ä½œã€‚</span></li></ul></ul><ul class="ne-ul"><li id="u9896a69c" data-lake-index-type="0"><span class="ne-text" style="color: initial; font-size: 16px">__DEV__ï¼šå¼€å‘ç¯å¢ƒä¸‹ä¼ å…¥æ•°æ®ä¿¡æ¯ä¾¿äºè°ƒè¯•</span></li><li id="ue5b0e614" data-lake-index-type="0"><span class="ne-text" style="color: initial; font-size: 16px">dep.trigger()ï¼šè§¦å‘ä¾èµ–æ›´æ–°</span></li></ul><p id="u28a61200" class="ne-p"><span class="ne-text">triggerä¸‹åˆæ‰§è¡Œnotify</span></p><p id="ue0a473e3" class="ne-p"><span class="ne-text" style="color: initial; font-size: 16px">å°è£…åœ¨</span><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1724654522704-0d8ab60d-c703-44b0-a40f-73b74855a77e.png" width="587" id="ua57f0646" class="ne-image"></p><h3 id="tNols"><span class="ne-text">notify</span></h3><p id="ud301b71d" class="ne-p"><span class="ne-text">é€šè¿‡éå†è®¢é˜…é“¾è¡¨ï¼ˆsubsHeadï¼‰ï¼Œæ‰§è¡Œè®¢é˜…äº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯â€œå‰¯ä½œç”¨â€ï¼Œç®€è€Œè¨€ä¹‹çš„ç†è§£å°±æ˜¯é€šçŸ¥è®¢é˜…è€…æ›´æ–°</span></p><p id="ub142d2fd" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1724395543939-5231eb2e-a79e-457d-a68d-d02ed08a559d.png" width="837" id="ud0255935" class="ne-image"></p><ul class="ne-ul"><li id="udb977797" data-lake-index-type="0"><code class="ne-code"><span class="ne-text">link.sub.notify()</span></code></li></ul><ul class="ne-list-wrap"><ul ne-level="1" class="ne-ul"><li id="u9df9804e" data-lake-index-type="0"><strong><span class="ne-text">ä½œç”¨</span></strong><span class="ne-text">ï¼šé€šçŸ¥æ¯ä¸ªè®¢é˜…è€…æ‰§è¡Œå…¶å‰¯ä½œç”¨ã€‚</span></li><li id="u3da83814" data-lake-index-type="0"><strong><span class="ne-text">è§£é‡Š</span></strong><span class="ne-text">ï¼šæ¯ä¸ªè®¢é˜…è€…éƒ½æœ‰ä¸€ä¸ª </span><code class="ne-code"><span class="ne-text">notify</span></code><span class="ne-text"> æ–¹æ³•ï¼Œè°ƒç”¨å®ƒä¼šè§¦å‘è¯¥è®¢é˜…è€…çš„å‰¯ä½œç”¨æ‰§è¡Œã€‚å› ä¸ºæ˜¯ä»å°¾åˆ°å¤´é€šçŸ¥ï¼Œæ‰€ä»¥ç¡®ä¿äº†æ‰€æœ‰çš„ä¾èµ–åœ¨æ‰¹å¤„ç†å†…æŒ‰é¡ºåºæ‰§è¡Œã€‚</span></li></ul></ul><p id="u70883d6e" class="ne-p"><span class="ne-text">å½“triggeræ‰§è¡Œå®Œï¼ŒåŒæ—¶Proxyçš„setæµç¨‹ä¹Ÿç»“æŸã€‚</span></p><p id="u14d6430c" class="ne-p"><span class="ne-text">ä¸‹ä¸€æ­¥æ‰§è¡Œåˆ°PublicInstanceProxyHandlers</span></p><h2 id="pZ0kG"><span class="ne-text">PublicInstanceProxyHandlers</span></h2><p id="u092fb73f" class="ne-p"><span class="ne-text">è¿™ä¸ªæ˜¯ç»„ä»¶å®ä¾‹è¡Œä¸ºçš„å°è£…ï¼Œä¸Šè¿°å“åº”å¼å˜é‡èµ‹å€¼å®Œæˆï¼Œç„¶åè¿›å…¥å½“å‰çš„ç»„ä»¶å®ä¾‹å±æ€§è®¾ç½®</span></p><p id="u3458adca" class="ne-p"><code class="ne-code"><span class="ne-text">set</span></code><span class="ne-text"> æ–¹æ³•ç”¨äºæ‹¦æˆªå’Œå¤„ç†å¯¹ç»„ä»¶å®ä¾‹å±æ€§çš„ä¿®æ”¹æ“ä½œ  </span></p><p id="u8f60a1be" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1724396098652-00faed94-469d-4b61-9f77-a20ec73049c7.png" width="800" id="u784063f1" class="ne-image"></p><h2 id="s8RBZ"><span class="ne-text">ä¸»çº¿ç¨‹å·¥ä½œç»“æŸ</span></h2><p id="u42bf9e38" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1724396266488-fe4d1ae9-870a-4f43-87d8-3fe03c34c37b.png" width="523" id="u15c91d7a" class="ne-image"></p><h2 id="zp4dR"><span class="ne-text">å¾®ä»»åŠ¡flushJobs</span></h2><p id="u23a81d85" class="ne-p"><span class="ne-text">æ‰§è¡Œå¼‚æ­¥çš„flushJobs</span></p><p id="u929d3f95" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1724403602240-595eb2a9-013f-4f9c-8192-15bb17223709.png" width="933" id="u62df03f8" class="ne-image"></p><p id="ufd4b2823" class="ne-p"><code class="ne-code"><span class="ne-text">flushJobs</span></code><span class="ne-text"> æ˜¯ä¸€ä¸ªç”¨äºåˆ·æ–°è°ƒåº¦é˜Ÿåˆ—çš„å‡½æ•°ï¼Œå®ƒä¼šæ‰§è¡Œæ‰€æœ‰è¢«è°ƒåº¦çš„ä»»åŠ¡ï¼ˆå¦‚ç»„ä»¶æ›´æ–°ã€è®¡ç®—å±æ€§çš„é‡æ–°è®¡ç®—ç­‰ï¼‰  </span></p><ul class="ne-ul"><li id="udd02e48e" data-lake-index-type="0"><strong><span class="ne-text">è°ƒåº¦å™¨è°ƒåº¦ä»»åŠ¡</span></strong><span class="ne-text">ï¼š</span></li><li id="ubac44c6c" data-lake-index-type="0"><span class="ne-text">Vue 3 çš„è°ƒåº¦å™¨ä¼šè´Ÿè´£ç®¡ç†è¿™ä¸ªè°ƒåº¦é˜Ÿåˆ—ã€‚è°ƒåº¦å™¨ä¼šå°è¯•åˆå¹¶é‡å¤çš„ä»»åŠ¡ï¼Œç¡®ä¿æ¯ä¸ªä»»åŠ¡åªæ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶ä¸”æŒ‰ç…§ä¸€å®šçš„é¡ºåºï¼ˆå¦‚çˆ¶ç»„ä»¶å…ˆäºå­ç»„ä»¶ï¼Œå…ˆæ›´æ–°è®¡ç®—å±æ€§å†æ›´æ–°æ¸²æŸ“å‡½æ•°ï¼‰è¿›è¡Œè°ƒåº¦ã€‚</span></li><li id="uc9a965da" data-lake-index-type="0"><code class="ne-code"><strong><span class="ne-text">queueFlush</span></strong></code><strong><span class="ne-text"> è§¦å‘</span></strong><span class="ne-text">ï¼š</span></li><li id="u1571470d" data-lake-index-type="0"><span class="ne-text">å½“æœ‰æ–°çš„ä»»åŠ¡è¢«æ·»åŠ åˆ°è°ƒåº¦é˜Ÿåˆ—æ—¶ï¼Œè°ƒåº¦å™¨ä¼šè°ƒç”¨ </span><code class="ne-code"><span class="ne-text">queueFlush</span></code><span class="ne-text"> å‡½æ•°ï¼Œå°†åˆ·æ–°ä»»åŠ¡å®‰æ’åˆ°ä¸‹ä¸€ä¸ªå¾®ä»»åŠ¡ï¼ˆmicrotaskï¼‰ä¸­æ‰§è¡Œã€‚</span></li><li id="uebda4fcc" data-lake-index-type="0"><span class="ne-text">è¿™é€šå¸¸æ˜¯é€šè¿‡ </span><code class="ne-code"><span class="ne-text">Promise.resolve().then(flushJobs)</span></code><span class="ne-text"> æ¥å®ç°çš„ã€‚</span><code class="ne-code"><span class="ne-text">Promise.resolve().then(...)</span></code><span class="ne-text"> ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¾®ä»»åŠ¡ï¼Œåœ¨å½“å‰åŒæ­¥ä»»åŠ¡ç»“æŸåç«‹å³æ‰§è¡Œã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ä¿è¯æ‰€æœ‰çš„åŒæ­¥ä»»åŠ¡ï¼ˆå¦‚å¤šä¸ªå“åº”å¼æ•°æ®çš„ </span><code class="ne-code"><span class="ne-text">set</span></code><span class="ne-text"> æ“ä½œï¼‰éƒ½å®Œæˆä¹‹åï¼Œå†ä¸€æ¬¡æ€§æ‰§è¡Œæ‰¹é‡æ›´æ–°æ“ä½œã€‚</span></li><li id="u114b0ad0" data-lake-index-type="0"><strong><span class="ne-text">æ‰§è¡Œ </span></strong><code class="ne-code"><strong><span class="ne-text">flushJobs</span></strong></code><span class="ne-text">ï¼š</span></li><li id="u1e9084d3" data-lake-index-type="0"><span class="ne-text">ä¸€æ—¦æ‰€æœ‰çš„åŒæ­¥æ“ä½œå®Œæˆï¼Œäº‹ä»¶å¾ªç¯è¿›å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œ</span><code class="ne-code"><span class="ne-text">flushJobs</span></code><span class="ne-text"> å‡½æ•°è¢«è°ƒç”¨ã€‚</span><code class="ne-code"><span class="ne-text">flushJobs</span></code><span class="ne-text"> ä¼šéå†è°ƒåº¦é˜Ÿåˆ—ï¼Œå¹¶ä¾æ¬¡æ‰§è¡Œæ¯ä¸ªè°ƒåº¦ä»»åŠ¡ï¼ˆå¦‚é‡æ–°æ¸²æŸ“ç»„ä»¶ã€é‡æ–°è®¡ç®—è®¡ç®—å±æ€§ç­‰ï¼‰ã€‚</span></li><li id="u17a6f212" data-lake-index-type="0"><span class="ne-text">åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæ‰€æœ‰çš„ </span><code class="ne-code"><span class="ne-text">effect</span></code><span class="ne-text"> è¢«é‡æ–°æ‰§è¡Œï¼Œæ›´æ–°è§†å›¾ã€è®¡ç®—æ–°çš„å€¼ç­‰ç­‰ã€‚</span></li></ul></div>]]></content>
    
    
      
      
        
        
    <summary type="html">

&lt;div class=&quot;lake-content&quot; typography=&quot;classic&quot;&gt;&lt;h2 id=&quot;ZInLD&quot;&gt;&lt;span class=&quot;ne-text&quot;&gt;å“åº”å¼å˜é‡èµ‹å€¼&lt;/span&gt;&lt;/h2&gt;&lt;p id=&quot;u0dd506fb&quot;</summary>
        
      
    
    
    
    <category term="Webå¼€å‘" scheme="https://www.wztlink1013.com/categories/Web%E5%BC%80%E5%8F%91/"/>
    
    <category term="Vue" scheme="https://www.wztlink1013.com/categories/Web%E5%BC%80%E5%8F%91/Vue/"/>
    
    
  </entry>
  
</feed>
