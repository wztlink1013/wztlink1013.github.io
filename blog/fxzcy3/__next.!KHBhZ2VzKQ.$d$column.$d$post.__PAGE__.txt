1:"$Sreact.fragment"
2:I[99897,["/_next/static/chunks/4eaa70fe861e9598.js","/_next/static/chunks/fa1a8f8830b9bf3a.js","/_next/static/chunks/6dd6809ee42e252f.js","/_next/static/chunks/f2b800ca7ae14e96.js","/_next/static/chunks/e121db38c98deeb4.js","/_next/static/chunks/6d971f5a9c16d0c2.js","/_next/static/chunks/b397c2fd2abb1207.js","/_next/static/chunks/11dff99839ab5ba0.js"],"MotionPreset"]
3:I[22016,["/_next/static/chunks/4eaa70fe861e9598.js","/_next/static/chunks/fa1a8f8830b9bf3a.js","/_next/static/chunks/6dd6809ee42e252f.js","/_next/static/chunks/f2b800ca7ae14e96.js","/_next/static/chunks/e121db38c98deeb4.js","/_next/static/chunks/6d971f5a9c16d0c2.js","/_next/static/chunks/b397c2fd2abb1207.js","/_next/static/chunks/11dff99839ab5ba0.js"],""]
4:I[85437,["/_next/static/chunks/4eaa70fe861e9598.js","/_next/static/chunks/fa1a8f8830b9bf3a.js","/_next/static/chunks/6dd6809ee42e252f.js","/_next/static/chunks/f2b800ca7ae14e96.js","/_next/static/chunks/e121db38c98deeb4.js","/_next/static/chunks/6d971f5a9c16d0c2.js","/_next/static/chunks/b397c2fd2abb1207.js","/_next/static/chunks/11dff99839ab5ba0.js"],"Image"]
5:I[48347,["/_next/static/chunks/4eaa70fe861e9598.js","/_next/static/chunks/fa1a8f8830b9bf3a.js","/_next/static/chunks/6dd6809ee42e252f.js","/_next/static/chunks/f2b800ca7ae14e96.js","/_next/static/chunks/e121db38c98deeb4.js","/_next/static/chunks/6d971f5a9c16d0c2.js","/_next/static/chunks/b397c2fd2abb1207.js","/_next/static/chunks/11dff99839ab5ba0.js"],"default"]
6:I[72436,["/_next/static/chunks/4eaa70fe861e9598.js","/_next/static/chunks/fa1a8f8830b9bf3a.js","/_next/static/chunks/6dd6809ee42e252f.js","/_next/static/chunks/f2b800ca7ae14e96.js","/_next/static/chunks/e121db38c98deeb4.js","/_next/static/chunks/6d971f5a9c16d0c2.js","/_next/static/chunks/b397c2fd2abb1207.js","/_next/static/chunks/11dff99839ab5ba0.js"],"Separator"]
d:I[97367,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/7340adf74ff47ec0.js"],"OutletBoundary"]
e:"$Sreact.suspense"
7:T2b02,<!doctype html><div class="lake-content" typography="classic"><h2 id="xlZLV"><span class="ne-text">CDN回源</span></h2><p id="8147a44fca09bde09c02881a9e4a1a5e" class="ne-p"><span class="ne-text">CDN回源是什么意思？CDN回源包括回源地址和加速</span><a href="https://www.west.cn/services/domain/" data-href="https://www.west.cn/services/domain/" target="_blank" class="ne-link"><span class="ne-text">域名</span></a><span class="ne-text">。常规的CDN都是回源的。即：当有用户访问某一个URL的时候，如果被解析到的那个CDN节点没有缓存响应的内容，或者是缓存已经到期，就会回源站去获取。如果没有人访问，那么CDN节点不会主动去源站拿的。</span></p><p id="u7abfd12f" class="ne-p"><span class="ne-text"></span></p><ol class="ne-ol"><li id="ub9c641ae" data-lake-index-type="0"><span class="ne-text">回源地址：可以使回源域名，也可以是回源IP，主要作用是CDN加速节点同步更新的一个地址；</span></li><li id="u20547183" data-lake-index-type="0"><span class="ne-text">加速域名：使用CDN</span><a href="https://www.west.cn/cloudhost/" data-href="https://www.west.cn/cloudhost/" target="_blank" class="ne-link"><span class="ne-text">服务器</span></a><span class="ne-text">需要加速的一个域名，一般会将加速域名做别名解析为CDN运营商提供的域名，来做CDN加速访问。</span></li></ol><p id="e4ad4f76e9862f7c014be679163f923c" class="ne-p"><a href="https://www.west.cn/docs/wp-content/uploads/2018/05/n-40.jpg" target="_blank" id="YP5GO" class="ne-image-link"><img src="https://cdn.nlark.com/yuque/0/2021/jpeg/1484158/1612941062375-753094ca-dc39-494d-abaf-022708a631a3.jpeg" width="581" class="ne-image"></a></p><p id="f7c0ae2f7d8a5fc7accc3f59767fdd1f" class="ne-p"><span class="ne-text">回源域名一般是cdn领域的专业术语，通常情况下，是直接用ip进行回源的，但是如果客户源站有多个ip，并且ip地址会经常变化，对于cdn厂商来说，为了避免经常更改配置（回源ip），会采用回源域名方式进行回源，这样即使源站的ip变化了，也不影响原有的配置。</span></p><p id="a1694293675c8addd427bbbd8335c381" class="ne-p"><span class="ne-text">CDN本来是给网站加速的，但是有时会因为不合适的回源策略给服务器带来负担，只有选择正确的策略才能给自己的网站带来更高的访问效率。</span></p><h2 id="7wDA9"><span class="ne-text">网站优化</span></h2><h3 id="Ubg6y"><span class="ne-text">Gzip智能压缩</span></h3><p id="7c9bb2201a947bd86254630fa6addae7" class="ne-p"><span class="ne-text" style="color: #121212">gzip是GNUzip的缩写，最早用于UNIX系统的文件压缩</span></p><p id="8c09cd046b5ff4dc7da82b45d1fdd90e" class="ne-p"><span class="ne-text" style="color: #121212"></span></p><p id="61809721e669f5ea235636ee92be6f5b" class="ne-p"><span class="ne-text" style="color: #121212">HTTP协议上的gzip编码是一种用来改进web应用程序性能的技术，web服务器和客户端（浏览器）必须共同支持gzip</span></p><p id="750bf35fb9c8308bb9a206b4bd7dd707" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2021/png/1484158/1612939525023-772b71d1-11ea-4f13-8629-500d71865e16.png" width="545.5" id="l3xba" class="ne-image" style="color: #121212"></p><h3 id="GDGzg"><span class="ne-text">Brotli智能压缩</span></h3><p id="6e26adf45fc4e624dc1405056096cb66" class="ne-p"><span class="ne-text">也是一种静态资源压缩算法，并且也支持HTTPS</span></p><h3 id="q5q0o"><span class="ne-text">页面压缩</span></h3><p id="70523bee88418a138db5cb3d37e4024e" class="ne-p"><span class="ne-text">去除掉页面的注释或空格提高传输效率</span></p><h3 id="9w5Jh"><span class="ne-text">302调度</span></h3><p id="b3547cf5b8a9c590c713f6b57548489b" class="ne-p"><a href="https://cloud.tencent.com/developer/article/1445728" data-href="https://cloud.tencent.com/developer/article/1445728" target="_blank" class="ne-link"><span class="ne-text">CDN系列学习文章（三）——302调度</span></a></p><p id="c9cb1ade36b8107051bae0d28240f11d" class="ne-p"><br></p><p id="6941b6b7a0204626b2a326d0ad41802b" class="ne-p"><span class="ne-text">作者：深蓝加菲</span></p><p id="5bd143e7b27c49eda394f7555cedb0f0" class="ne-p"><span class="ne-text">链接：</span><a href="https://www.zhihu.com/question/32148047/answer/70920110" data-href="https://www.zhihu.com/question/32148047/answer/70920110" target="_blank" class="ne-link"><span class="ne-text">https://www.zhihu.com/question/32148047/answer/70920110</span></a></p><p id="bfa1566da694ef475a631cd2598b60bc" class="ne-p"><span class="ne-text">来源：知乎</span></p><p id="c92cab146699c2df5ea88d3e06861438" class="ne-p"><span class="ne-text">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span></p><p id="a8281bee7ae2b52b851e477eaa32cf96" class="ne-p"><br></p><p id="cf26933da576dbb1eba35c829f32e15c" class="ne-p"><span class="ne-text">一般是两者结合，DNS做省市级别和跨运营商的调度， 302做基于内容和精确IP的精确调度</span></p><p id="fb0e0da0e3970b343d165b23e095e412" class="ne-p"><span class="ne-text">DNS的优点：</span></p><p id="d0b49b103e5f250e6a4bec72eae41d7e" class="ne-p"><span class="ne-text">DNS系统是天然的分布式结构</span></p><p id="b83a034b7310f32d30140c28ee3fa30b" class="ne-p"><span class="ne-text">客户端本机，LDNS都可以实现cache，</span><strong><span class="ne-text">架构本身就能实现高的伸缩性和性能</span></strong></p><p id="2586f057c40a0bd7abbac121d52fe068" class="ne-p"><span class="ne-text">---------------------------------------------------------</span></p><p id="ba693bbcb4b7216e40dbb2eeac28994a" class="ne-p"><span class="ne-text">DNS的缺点：</span></p><p id="2afde6a094044f4aaccef5c0605dd1c9" class="ne-p"><span class="ne-text">DNS并不是为GSLB设计的</span></p><p id="4f40287c6dbbd10959137b825b4ca1ec" class="ne-p"><span class="ne-text">GSLB 基于 local DNS的地址判断，</span><strong><span class="ne-text">粒度较粗</span></strong><span class="ne-text">。而且LDNS可能和end user网络距离很远。</span></p><p id="808be923fa1dfdb78812b4f98e078aeb" class="ne-p"><span class="ne-text">用户可能会设置错误的Local DNS，该服务器和用户实际距离较远，比如8.8.8.8等(edns-client-subnet可以部分解决该问题)</span></p><p id="905db8f74bc30c9b5fef1b8e39bc768e" class="ne-p"><span class="ne-text">DNS请求里面</span><strong><span class="ne-text">不会带有内容信息</span></strong><span class="ne-text">，GSLB只能拥有LDNS ip信息，无法针对内容作出更加灵活的判断</span></p><p id="8f50b8be270d59a468c3ec6211309502" class="ne-p"><span class="ne-text">因为DNS reply TTL，所以某个用户一段时间内的请求都会导向同一个site (解决：趋向于较短的TTL) </span></p><p id="a3de8afbfd0e83eeb65fbc0f14646c6c" class="ne-p"><span class="ne-text">因为local dns缓存和TTL的存在，你很难判断某次的返回会对负载有多大影响</span></p><p id="b90a5cd8a8edb7a3df0c934854817480" class="ne-p"><span class="ne-text">某些Local DNS会忽略DNS TTL信息，而采用固定的TTL时间，对此我们无能为力</span></p><p id="1cf01151d692257ffd9a946029e4b7e2" class="ne-p"><span class="ne-text">电信系统倾向于直接使用ip地址访问，不使用域名</span></p><p id="ba0552461696b82cf73b73a1e0fe4c86" class="ne-p"><span class="ne-text">---------------------------------------------------------</span></p><p id="d763e5bff7ef8971cdaf3872c1970a3d" class="ne-p"><span class="ne-text">302的优点：</span></p><p id="f98286666e0a731230bfb6f431b6f40f" class="ne-p"><span class="ne-text">可以直接得到end user ip和内容的地址，可以</span><strong><span class="ne-text">做出精确的redirect</span></strong></p><p id="606abac10ad4266cd78798880aa13184" class="ne-p"><span class="ne-text">每个请求都需要访问GSLB,可以做出单独的处理</span></p><p id="fc7abb017f2c035fbdd1d57eae77dee7" class="ne-p"><span class="ne-text">可以在一个点方便的作出统计和认证</span></p><p id="e109ce7deb66847d7fd65745ca76a6b7" class="ne-p"><span class="ne-text">---------------------------------------------------------</span></p><p id="3045bd660fa83e43212a891d669cf4d3" class="ne-p"><span class="ne-text">302的缺点：</span></p><p id="8c9b3af29d6721b73477a4f77215503e" class="ne-p"><span class="ne-text">需要应用层协议支持(http / rtsp)</span></p><p id="0121d9e5215eb45a43d19857d5c823eb" class="ne-p"><span class="ne-text">一般有重定向次数限制</span></p><p id="7fea09c798deac6017f299ef161346e1" class="ne-p"><span class="ne-text">GSLB需要处理较多的请求，却没有LDNS作为cache</span></p><p id="474e649138cf8c6a1278cf134882100e" class="ne-p"><span class="ne-text">GSLB暴露给end user ， 容易遭受攻击</span></p><p id="b2777f5e0342b77e9da69dc14ebe60a7" class="ne-p"><span class="ne-text">用户访问GSLB本身就会带来时延，可能深圳的用户需要访问北京的GSLB</span></p><p id="d86afd889f24785f359500623fc2af61" class="ne-p"><span class="ne-text">单点故障(可以通过GSLB服务群集解决)</span></p><p id="eaea7a0c6c9b41d669ef7f0a154f1618" class="ne-p"><span class="ne-text">某些应用对URL变化敏感，比如WEB</span></p><p id="3e3362b77e87f0fabcc20d9ec12fc727" class="ne-p"><span class="ne-text">某些客户端支持不好(中文字符集等问题)</span></p><h3 id="gK3Zg"><span class="ne-text">TLS1.3</span></h3><p id="b6fb70efc58af69baf04ab89bbc3b72e" class="ne-p"><span class="ne-text">TLS 1.3 是一种全新的加密协议，它既能提高终端用户的访问速度，又能增强安全性</span></p><p id="373bd96eee79913463315d2257b944f0" class="ne-p"><br></p><div id="0dxvR" class="ne-bookmark"><a href="https://zhuanlan.zhihu.com/p/44980381" target="_blank">https://zhuanlan.zhihu.com/p/44980381</a></div><h3 id="nQNaE"><span class="ne-text">HTTP/2 + Server Push</span></h3><div id="RLYjg" class="ne-bookmark"><a href="https://www.ruanyifeng.com/blog/2018/03/http2_server_push.html" target="_blank">https://www.ruanyifeng.com/blog/2018/03/http2_server_push.html</a></div><h3 id="7fZkP"><span class="ne-text">WebP 自适应</span></h3><p id="f2ed59db935ef176eb39c41b4a558f42" class="ne-p"><span class="ne-text">WebP 自适应功能是 CDN 平台智能判断客户端浏览器是否支持 WebP 解码，如支持则返回 WebP 格式图片，否则返回原图，客户端以及源站无需任何改动。开启该特性，可以有效节省 CDN 传输带宽，加速图片渲染速度。</span></p><p id="b75cf7af42d73f151d4527a77372a282" class="ne-p"><br></p><h2 id="TJ0xN"><span class="ne-text">网站防攻击</span></h2><h3 id="RhH3k"><span class="ne-text">IP限制访问</span></h3><h3 id="mJNT8"><span class="ne-text">CC防护</span></h3></div>0:{"buildId":"f0cdySSxBr_ZaI2KML5of","rsc":["$","$1","c",{"children":[["$","section",null,{"className":"relative","children":["$","$L2",null,{"fade":true,"blur":true,"transition":{"duration":0.5},"delay":0.1,"className":"relative overflow-hidden border-y xl:flex","children":[["$","div",null,{"className":"m-6 w-full flex-1 bg-[radial-gradient(circle_at_center,color-mix(in_oklab,var(--primary)_15%,transparent)_2px,transparent_2px)] bg-size-[18px_18px] max-xl:hidden"}],["$","div",null,{"className":"mx-auto w-full max-w-6xl flex-none space-y-8 px-4 py-8 min-[1158px]:border-x sm:px-6 sm:py-12 lg:px-8","children":[["$","$L2",null,{"fade":true,"blur":true,"slide":{"direction":"down","offset":30},"transition":{"duration":0.4},"children":["$","$L3",null,{"href":"/blog","className":"text-muted-foreground hover:text-foreground inline-flex items-center gap-2 text-sm transition-colors","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-arrow-left h-4 w-4","aria-hidden":"true","children":[["$","path","1l729n",{"d":"m12 19-7-7 7-7"}],["$","path","x3x0zl",{"d":"M19 12H5"}],"$undefined"]}],"返回","技术博客"]}]}],["$","article",null,{"className":"mx-auto max-w-4xl","children":[["$","header",null,{"className":"mb-8 space-y-6","children":[["$","$L2",null,{"fade":true,"blur":true,"slide":{"direction":"up","offset":50},"delay":0.2,"transition":{"duration":0.6},"children":["$","div",null,{"className":"relative aspect-video overflow-hidden rounded-xl","children":["$","$L4",null,{"src":"https://cdn.nlark.com/yuque/0/2021/png/1484158/1612939525023-772b71d1-11ea-4f13-8629-500d71865e16.png","alt":"关于CDN的一些概念","fill":true,"className":"object-cover","unoptimized":true}]}]}],["$","$L2",null,{"delay":0.3,"transition":{"duration":0.5},"children":["$","h1",null,{"className":"text-2xl font-bold tracking-tight sm:text-3xl md:text-4xl","children":["$","$L5",null,{"text":"关于CDN的一些概念","delay":30,"animateBy":"words","direction":"bottom"}]}]}],["$","$L2",null,{"fade":true,"blur":true,"slide":{"direction":"down","offset":30},"delay":0.4,"transition":{"duration":0.5},"children":["$","p",null,{"className":"text-muted-foreground text-lg","children":"CDN回源CDN回源是什么意思？CDN回源包括回源地址和加速域名。常规的CDN都是回源的。即：当有用户访问某一个URL的时候，如果被解析到的那个CDN节点没有缓存响应的内容，或者是缓存已经到期，就会回源站去获取。如果没有人访问，那么CDN节点不会主动去源站拿的。回源地址：可以使回源域名，也可以..."}]}],["$","$L2",null,{"fade":true,"blur":true,"slide":{"direction":"down","offset":30},"delay":0.5,"transition":{"duration":0.5},"children":["$","div",null,{"className":"text-muted-foreground flex flex-wrap items-center gap-4 text-sm","children":[["$","div",null,{"className":"flex items-center gap-1","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-calendar h-4 w-4","aria-hidden":"true","children":[["$","path","1cmpym",{"d":"M8 2v4"}],["$","path","4m81vk",{"d":"M16 2v4"}],["$","rect","1hopcy",{"width":"18","height":"18","x":"3","y":"4","rx":"2"}],["$","path","8toen8",{"d":"M3 10h18"}],"$undefined"]}],["$","span",null,{"children":"2021年2月10日"}]]}],["$","div",null,{"className":"flex items-center gap-1","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-clock h-4 w-4","aria-hidden":"true","children":[["$","path","mmk7yg",{"d":"M12 6v6l4 2"}],["$","circle","1mglay",{"cx":"12","cy":"12","r":"10"}],"$undefined"]}],["$","span",null,{"children":"1.3千字"}]]}],["$","div",null,{"className":"flex items-center gap-1","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-eye h-4 w-4","aria-hidden":"true","children":[["$","path","1nclc0",{"d":"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}],["$","circle","1v7zrd",{"cx":"12","cy":"12","r":"3"}],"$undefined"]}],["$","span",null,{"children":[11," 阅读"]}]]}],false,false]}]}],false]}],["$","$L2",null,{"delay":0.6,"fade":true,"blur":true,"transition":{"duration":0.6},"className":"-mx-4 sm:-mx-6 lg:-mx-8","children":["$","$L6",null,{}]}],["$","$L2",null,{"fade":true,"blur":true,"slide":{"direction":"up","offset":50},"delay":0.7,"transition":{"duration":0.6},"children":["$","div",null,{"className":"prose prose-neutral dark:prose-invert mt-8 max-w-none","dangerouslySetInnerHTML":{"__html":"$7"}}]}],"$L8","$L9"]}]]}],"$La"]}]}],["$Lb"],"$Lc"]}],"loading":null,"isPartial":false}
8:["$","$L2",null,{"delay":0.8,"fade":true,"blur":true,"transition":{"duration":0.6},"className":"-mx-4 mt-12 sm:-mx-6 lg:-mx-8","children":["$","$L6",null,{}]}]
9:["$","$L2",null,{"fade":true,"blur":true,"slide":{"direction":"up","offset":30},"delay":0.9,"transition":{"duration":0.5},"children":["$","nav",null,{"className":"mt-8 grid gap-4 md:grid-cols-2","children":[["$","$L3",null,{"href":"/blog/pl8gro","className":"hover:bg-muted group flex flex-col rounded-lg border p-4 transition-colors","children":[["$","span",null,{"className":"text-muted-foreground mb-2 text-sm","children":"上一篇"}],["$","span",null,{"className":"group-hover:text-primary line-clamp-2 font-medium transition-colors","children":"HTTPS较HTTP安全在哪？"}]]}],["$","$L3",null,{"href":"/blog/auczes","className":"hover:bg-muted group flex flex-col rounded-lg border p-4 text-right transition-colors md:text-right","children":[["$","span",null,{"className":"text-muted-foreground mb-2 text-sm","children":"下一篇"}],["$","span",null,{"className":"group-hover:text-primary line-clamp-2 font-medium transition-colors","children":"Nodejs包管理工具以及NPM的包发布"}]]}]]}]}]
a:["$","div",null,{"className":"m-6 w-full flex-1 bg-[radial-gradient(circle_at_center,color-mix(in_oklab,var(--primary)_15%,transparent)_2px,transparent_2px)] bg-size-[18px_18px] max-xl:hidden"}]
b:["$","script","script-0",{"src":"/_next/static/chunks/11dff99839ab5ba0.js","async":true}]
c:["$","$Ld",null,{"children":["$","$e",null,{"name":"Next.MetadataOutlet","children":"$@f"}]}]
f:null
