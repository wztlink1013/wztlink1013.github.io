1:"$Sreact.fragment"
2:I[99897,["/_next/static/chunks/4eaa70fe861e9598.js","/_next/static/chunks/fa1a8f8830b9bf3a.js","/_next/static/chunks/6dd6809ee42e252f.js","/_next/static/chunks/f2b800ca7ae14e96.js","/_next/static/chunks/e121db38c98deeb4.js","/_next/static/chunks/6d971f5a9c16d0c2.js","/_next/static/chunks/b397c2fd2abb1207.js","/_next/static/chunks/11dff99839ab5ba0.js"],"MotionPreset"]
3:I[22016,["/_next/static/chunks/4eaa70fe861e9598.js","/_next/static/chunks/fa1a8f8830b9bf3a.js","/_next/static/chunks/6dd6809ee42e252f.js","/_next/static/chunks/f2b800ca7ae14e96.js","/_next/static/chunks/e121db38c98deeb4.js","/_next/static/chunks/6d971f5a9c16d0c2.js","/_next/static/chunks/b397c2fd2abb1207.js","/_next/static/chunks/11dff99839ab5ba0.js"],""]
4:I[85437,["/_next/static/chunks/4eaa70fe861e9598.js","/_next/static/chunks/fa1a8f8830b9bf3a.js","/_next/static/chunks/6dd6809ee42e252f.js","/_next/static/chunks/f2b800ca7ae14e96.js","/_next/static/chunks/e121db38c98deeb4.js","/_next/static/chunks/6d971f5a9c16d0c2.js","/_next/static/chunks/b397c2fd2abb1207.js","/_next/static/chunks/11dff99839ab5ba0.js"],"Image"]
5:I[48347,["/_next/static/chunks/4eaa70fe861e9598.js","/_next/static/chunks/fa1a8f8830b9bf3a.js","/_next/static/chunks/6dd6809ee42e252f.js","/_next/static/chunks/f2b800ca7ae14e96.js","/_next/static/chunks/e121db38c98deeb4.js","/_next/static/chunks/6d971f5a9c16d0c2.js","/_next/static/chunks/b397c2fd2abb1207.js","/_next/static/chunks/11dff99839ab5ba0.js"],"default"]
6:I[72436,["/_next/static/chunks/4eaa70fe861e9598.js","/_next/static/chunks/fa1a8f8830b9bf3a.js","/_next/static/chunks/6dd6809ee42e252f.js","/_next/static/chunks/f2b800ca7ae14e96.js","/_next/static/chunks/e121db38c98deeb4.js","/_next/static/chunks/6d971f5a9c16d0c2.js","/_next/static/chunks/b397c2fd2abb1207.js","/_next/static/chunks/11dff99839ab5ba0.js"],"Separator"]
d:I[97367,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/7340adf74ff47ec0.js"],"OutletBoundary"]
e:"$Sreact.suspense"
7:T863d,<!doctype html><div class="lake-content" typography="classic"><p id="uf79f4f49" class="ne-p"><span class="ne-text">前言：本文是大三web技术课程中使用的uni-app技术的学习记录，uni-app实现一套代码多端使用。代码多和vue类似，但是有一些变动，本文内容部分继承自 </span><a href="https://ask.dcloud.net.cn/article/35657" data-href="https://ask.dcloud.net.cn/article/35657" target="_blank" class="ne-link"><span class="ne-text">白话uni-app </span></a><span class="ne-text"> 做出二次修改与记录。</span></p><p id="u275ed4ff" class="ne-p"><span class="ne-text"></span></p><ul class="ne-ul"><li id="u0c347a75"><span class="ne-text">课程大作业：</span><a href="https://github.com/wztlink1013/uniapp-harrypotter-visualize" data-href="https://github.com/wztlink1013/uniapp-harrypotter-visualize" target="_blank" class="ne-link"><span class="ne-text">https://github.com/wztlink1013/uniapp-harrypotter-visualize</span></a></li></ul><h2 id="Mccdr"><span class="ne-text">uni-app相对传统web的变化</span></h2><p id="u69f0996a" class="ne-p"><span class="ne-text">代码结构上继承vue的 </span><a href="https://cn.vuejs.org/v2/guide/single-file-components.html" data-href="https://cn.vuejs.org/v2/guide/single-file-components.html" target="_blank" class="ne-link"><span class="ne-text">Vue 单文件组件</span></a><span class="ne-text"> ，连文件后缀也都是</span><code class="ne-code"><span class="ne-text">.vue</span></code><span class="ne-text">，都是将vue文件编译成js文件，但是uni-app在此基础上还做了HTML上标签的变动以及移动端标签的增加，具体如下：</span></p><h3 id="HlgtE"><span class="ne-text">标签上的变化</span></h3><p id="3a207791db86c2086991f5cd57eebbe3" class="ne-p"><span class="ne-text">下为html标签和uni-app内置组件的映射表：</span></p><p id="632cb615a76108baf949c94c9af7eefa" class="ne-p"><span class="ne-text">（其实老的HTML标签也可以在uni-app里使用，uni-app编译器会在编译时把老标签转为新标签，比如把div编译成view。但不推荐这种用法，调试H5端时容易混乱。）</span></p><ul class="ne-ul"><li id="4e255ed4753d8fbf252b643167f65f1b"><span class="ne-text">div 改成 </span><a href="https://uniapp.dcloud.io/component/view" data-href="https://uniapp.dcloud.io/component/view" target="_blank" class="ne-link"><span class="ne-text">view</span></a></li><li id="24409615974d7473d6ac953aca34c2a7"><span class="ne-text">span、font 改成 </span><a href="https://uniapp.dcloud.io/component/text" data-href="https://uniapp.dcloud.io/component/text" target="_blank" class="ne-link"><span class="ne-text">text</span></a></li><li id="aed2e12170278288ede1ba61bdd062e9"><span class="ne-text">a 改成 </span><a href="https://uniapp.dcloud.io/component/navigator" data-href="https://uniapp.dcloud.io/component/navigator" target="_blank" class="ne-link"><span class="ne-text">navigator</span></a></li><li id="5da7ace80da533ed5de82da531ff0c9f"><span class="ne-text">img 改成 </span><a href="https://uniapp.dcloud.io/component/image" data-href="https://uniapp.dcloud.io/component/image" target="_blank" class="ne-link"><span class="ne-text">image</span></a></li><li id="bfa4385359d666425f13bb5cfdb7d32d"><a href="https://uniapp.dcloud.io/component/input" data-href="https://uniapp.dcloud.io/component/input" target="_blank" class="ne-link"><span class="ne-text">input</span></a><span class="ne-text"> 还在，但type属性改成了confirmtype</span></li><li id="a1160e6db31323e6661ccf094a56a478"><a href="https://uniapp.dcloud.io/component/form" data-href="https://uniapp.dcloud.io/component/form" target="_blank" class="ne-link"><span class="ne-text">form</span></a><span class="ne-text">、</span><a href="https://uniapp.dcloud.io/component/button" data-href="https://uniapp.dcloud.io/component/button" target="_blank" class="ne-link"><span class="ne-text">button</span></a><span class="ne-text">、</span><a href="https://uniapp.dcloud.io/component/checkbox" data-href="https://uniapp.dcloud.io/component/checkbox" target="_blank" class="ne-link"><span class="ne-text">checkbox</span></a><span class="ne-text">、</span><a href="https://uniapp.dcloud.io/component/radio" data-href="https://uniapp.dcloud.io/component/radio" target="_blank" class="ne-link"><span class="ne-text">radio</span></a><span class="ne-text">、</span><a href="https://uniapp.dcloud.io/component/label" data-href="https://uniapp.dcloud.io/component/label" target="_blank" class="ne-link"><span class="ne-text">label</span></a><span class="ne-text">、</span><a href="https://uniapp.dcloud.io/component/textarea" data-href="https://uniapp.dcloud.io/component/textarea" target="_blank" class="ne-link"><span class="ne-text">textarea</span></a><span class="ne-text">、</span><a href="https://uniapp.dcloud.io/component/canvas" data-href="https://uniapp.dcloud.io/component/canvas" target="_blank" class="ne-link"><span class="ne-text">canvas</span></a><span class="ne-text">、</span><a href="https://uniapp.dcloud.io/component/video" data-href="https://uniapp.dcloud.io/component/video" target="_blank" class="ne-link"><span class="ne-text">video</span></a><span class="ne-text"> 这些还在。</span></li><li id="bd7ad6f991ca58f5f706aff94e2dedf8"><span class="ne-text">select 改成 </span><a href="https://uniapp.dcloud.io/component/picker" data-href="https://uniapp.dcloud.io/component/picker" target="_blank" class="ne-link"><span class="ne-text">picker</span></a></li><li id="9cc82dc3f7dc7254643314418fcf795e"><span class="ne-text">iframe 改成 </span><a href="https://uniapp.dcloud.io/component/web-view" data-href="https://uniapp.dcloud.io/component/web-view" target="_blank" class="ne-link"><span class="ne-text">web-view</span></a></li><li id="01fff985aaa0340be3a027b5e2016ad8"><span class="ne-text">ul、li没有了，都用view替代</span></li><li id="d7bc5fd904fb0dadea5bafe2db17d6ac"><span class="ne-text">audio 不再推荐使用，改成api方式，</span><a href="https://uniapp.dcloud.io/api/media/background-audio-manager?id=getbackgroundaudiomanager" data-href="https://uniapp.dcloud.io/api/media/background-audio-manager?id=getbackgroundaudiomanager" target="_blank" class="ne-link"><span class="ne-text">背景音频api文档</span></a></li></ul><h3 id="RmiNR"><span class="ne-text">组件上的增加</span></h3><p id="u61f14a3a" class="ne-p"><span class="ne-text">除了上述html标签改动外，新增了一批手机端常用的新组件</span></p><ul class="ne-ul"><li id="e87028913fffc43b8fbd1b093d0c89bd"><span class="ne-text">scroll-view </span><a href="https://uniapp.dcloud.io/component/scroll-view" data-href="https://uniapp.dcloud.io/component/scroll-view" target="_blank" class="ne-link"><span class="ne-text">可区域滚动视图容器</span></a></li><li id="2ee2254baacc1c9a9b9dfe8409990592"><span class="ne-text">swiper </span><a href="https://uniapp.dcloud.io/component/swiper" data-href="https://uniapp.dcloud.io/component/swiper" target="_blank" class="ne-link"><span class="ne-text">可滑动区域视图容器</span></a></li><li id="59baaf5b3da38aea050c43584321e50c"><span class="ne-text">icon </span><a href="https://uniapp.dcloud.io/component/icon" data-href="https://uniapp.dcloud.io/component/icon" target="_blank" class="ne-link"><span class="ne-text">图标</span></a></li><li id="45b709aa13192ccfbd0f45e19d4bd93a"><span class="ne-text">rich-text </span><a href="https://uniapp.dcloud.io/component/rich-text" data-href="https://uniapp.dcloud.io/component/rich-text" target="_blank" class="ne-link"><span class="ne-text">富文本（不可执行js，但可渲染各种文字格式和图片）</span></a></li><li id="601dfac3262ef5d1e07dde1ddf1085ca"><span class="ne-text">progress </span><a href="https://uniapp.dcloud.io/component/progress" data-href="https://uniapp.dcloud.io/component/progress" target="_blank" class="ne-link"><span class="ne-text">进度条</span></a></li><li id="96914b255c8c1c5025228991554561da"><span class="ne-text">slider </span><a href="https://uniapp.dcloud.io/component/slider" data-href="https://uniapp.dcloud.io/component/slider" target="_blank" class="ne-link"><span class="ne-text">滑块指示器</span></a></li><li id="d47efbdb64345227dec5f582c298da55"><span class="ne-text">switch </span><a href="https://uniapp.dcloud.io/component/switch" data-href="https://uniapp.dcloud.io/component/switch" target="_blank" class="ne-link"><span class="ne-text">开关选择器</span></a></li><li id="6bdf801a7c402d35e3bfca4b9b085efb"><span class="ne-text">camera </span><a href="https://uniapp.dcloud.io/component/camera" data-href="https://uniapp.dcloud.io/component/camera" target="_blank" class="ne-link"><span class="ne-text">相机</span></a></li><li id="59f95112502b75095d91e671e97acb4a"><span class="ne-text">live-player </span><a href="https://uniapp.dcloud.io/component/live-player" data-href="https://uniapp.dcloud.io/component/live-player" target="_blank" class="ne-link"><span class="ne-text">直播</span></a></li><li id="2f6b7fb99bf9fef8babf652765b3c625"><span class="ne-text">map </span><a href="https://uniapp.dcloud.io/component/map" data-href="https://uniapp.dcloud.io/component/map" target="_blank" class="ne-link"><span class="ne-text">地图</span></a></li><li id="cb05de41bb30535b85cfaa1e9d1c1d3d"><span class="ne-text">cover-view </span><a href="https://uniapp.dcloud.io/component/cover-view?id=cover-view" data-href="https://uniapp.dcloud.io/component/cover-view?id=cover-view" target="_blank" class="ne-link"><span class="ne-text">可覆盖原生组件的视图容器</span></a><span class="ne-text"> <br /></span><span class="ne-text">cover-view需要多强调几句，uni-app的非h5端的video、map、canvas、textarea是原生组件，层级高于其他组件。如需覆盖原生组件，则需要使用cover-view组件。详见</span><a href="https://uniapp.dcloud.net.cn/component/native-component" data-href="https://uniapp.dcloud.net.cn/component/native-component" target="_blank" class="ne-link"><span class="ne-text">层级介绍</span></a></li></ul><hr id="lqUAg" class="ne-hr"><p id="5bbeba8f366e6d98e1225bc30528dfdb" class="ne-p"><span class="ne-text">除了内置组件，还有很多开源的扩展组件，把常用操作都进行封装，DCloud建立了插件市场收录这些扩展组件，详见</span><a href="https://ext.dcloud.net.cn/" data-href="https://ext.dcloud.net.cn/" target="_blank" class="ne-link"><span class="ne-text">插件市场</span></a><span class="ne-text">。</span></p><h3 id="WAbDY"><span class="ne-text">工程结构和页面管理</span></h3><p id="ca51688a7f2333de0f6af8af2b824520" class="ne-p"><span class="ne-text">uni-app的工程结构有单独的要求，</span><a href="https://uniapp.dcloud.io/frame?id=%e7%9b%ae%e5%bd%95%e7%bb%93%e6%9e%84" data-href="https://uniapp.dcloud.io/frame?id=%e7%9b%ae%e5%bd%95%e7%bb%93%e6%9e%84" target="_blank" class="ne-link"><span class="ne-text">详见</span></a></p><p id="97cbbfefc56ed306276570ed088e7782" class="ne-p"><br></p><p id="64f439da9672f579681ec2e5eb5202e1" class="ne-p"><span class="ne-text">每个可显示的页面，都必须在 </span><a href="https://uniapp.dcloud.io/collocation/pages" data-href="https://uniapp.dcloud.io/collocation/pages" target="_blank" class="ne-link"><span class="ne-text">pages.json</span></a><span class="ne-text"> 中注册。如果你开发过小程序，那么pages.json类似app.json。如果你熟悉vue，这里没有vue的路由，都是在pages.json里管理。</span></p><p id="66a228827511e0ec374498be516de0e1" class="ne-p"><br></p><p id="74cce9d094f35fb68a981a712a407a49" class="ne-p"><span class="ne-text">原来工程的首页一般是index.html或default.html，是在web server里配的。而uni-app的首页，是在pages.json里配的，page节点下第一个页面就是首页。一般在/pages/xx的目录下。</span></p><p id="cb34a01c22f471615ff8401d995599e7" class="ne-p"><br></p><p id="571a4cad666921419fbf536155daa95f" class="ne-p"><span class="ne-text">app和小程序中，为了提升体验，页面提供了原生的导航栏和底部tabbar，注意这些配置是在pages.json中做，而不是在vue页面里创建，但点击事件的监听在显示的vue页面中做。</span></p><p id="38afb0fdf574c0ca8d62b5d749ff85b6" class="ne-p"><br></p><p id="d351237eccf285ccc5ed8f7193d00697" class="ne-p"><span class="ne-text">如果你熟悉小程序开发的话，对比变化如下：</span></p><ul class="ne-ul"><li id="f587ced0e0e1f88c0cdafb49730028ae"><span class="ne-text">原来app.json被一拆为二。页面管理，被挪入了uni-app的pages.json；非页面管理，挪入了manifest.json</span></li><li id="552eeda22b7a35141566e09fcf34e86e"><span class="ne-text">原来的app.js和app.wxss被合并到了app.vue中</span></li></ul><h2 id="QSNTK"><span class="ne-text">文件导入方式变化</span></h2><h3 id="d11or"><span class="ne-text">js引入方式</span></h3><p id="727be6b205b2dd52ff98ba32d4019414" class="ne-p"><span class="ne-text">以前通过</span><code class="ne-code"><span class="ne-text">script </span></code><code class="ne-code"><span class="ne-text">src</span></code><span class="ne-text">、</span><code class="ne-code"><span class="ne-text">link </span></code><code class="ne-code"><span class="ne-text">href</span></code><span class="ne-text">引入外部的js和css；</span></p><p id="d8e08a9e55c321dd0b2bf76aa9bad3ce" class="ne-p"><span class="ne-text">现在是</span><strong><span class="ne-text">es6</span></strong><span class="ne-text">的写法，</span><code class="ne-code"><span class="ne-text">import</span></code><span class="ne-text">引入外部的js模块(注意不是文件)或css</span></p><ul class="ne-ul"><li id="u3f44eddb"><span class="ne-text">以前</span></li></ul><pre data-language="javascript" id="0FHD6" class="ne-codeblock language-javascript">&lt;script src=&quot;js/jquery-1.10.2.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;  
&lt;link href=&quot;css/bootstrap.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;/&gt;</pre><ul class="ne-ul"><li id="ubc70e53e"><span class="ne-text">现在 js要require进来，变成了对象。</span></li></ul><p id="dab91d38ea911e4d17e5bc4d2c5218bb" class="ne-p"><span class="ne-text">在hello uni-app项目的common目录有一个工具类</span><code class="ne-code"><span class="ne-text">util.js</span></code><span class="ne-text">，可以在hello uni-app中搜索这个例子查看。</span></p><pre data-language="javascript" id="FSQJP" class="ne-codeblock language-javascript">&lt;script&gt;  
var util = require('../../../common/util.js');  //require这个js模块  
var formatedPlayTime = util.formatTime(playTime); //调用js模块的方法  
&lt;/script&gt;</pre><p id="aa83aeddd4d086d2fb198078cee14f60" class="ne-p"><span class="ne-text">而在这个</span><code class="ne-code"><span class="ne-text">util.js</span></code><span class="ne-text">里，要把之前的function封装为对象的方法</span></p><p id="21d9e2e89f696d89c68fc2aaa6373473" class="ne-p" style="text-align: center"><img src="https://cdn.nlark.com/yuque/0/2020/png/1484158/1604048264989-b4591bb0-e4bc-4581-aae5-bf7615f268b4.png" width="508" id="wkQ3w" class="ne-image"></p><pre data-language="javascript" id="bQ79h" class="ne-codeblock language-javascript">var dateUtils = require('../../../common/util.js').dateUtils; //直接使用js模块的属性。在hello uni-app有示例  
import * as echarts from '/components/echarts/echarts.simple.min.js'; //将js导入并重命名为echarts，然后使用echarts.来继续执行方法。</pre><h3 id="72581a45"><span class="ne-text">CSS引入方式</span></h3><pre data-language="css" id="38pUO" class="ne-codeblock language-css">&lt;style&gt;  
    @import &quot;./common/uni.css&quot;;  
    .uni-hello-text{  
        color:#7A7E83;  
    }  
&lt;/style&gt;</pre><p id="f25884384b253fed473bd0514a0bf3c9" class="ne-p"><strong><span class="ne-text">改全局样式：</span></strong><span class="ne-text">在根目录下的app.vue里写入，每个页面都会加载app.vue里的样式。</span></p><h3 id="0WsT0"><span class="ne-text">组件导入</span></h3><p id="3bd6451b4bff23deea29d99719401c43" class="ne-p"><span class="ne-text">类似hexo博客主题设计一样，能以组件的形式模块化导入。</span></p><p id="31e6ffa0a70c54a96c1c76b3efd249bb" class="ne-p"><span class="ne-text">如下是导入一个角标的组件库，在页面上显示一个abc并且右上角有个数字角标1，</span><a href="http://ext.dcloud.net.cn/plugin?id=21" data-href="http://ext.dcloud.net.cn/plugin?id=21" target="_blank" class="ne-link"><span class="ne-text">详见</span></a></p><pre data-language="vue" id="nzQUj" class="ne-codeblock language-vue">&lt;template&gt;  
    &lt;view&gt;  
        &lt;uni-badge text=&quot;abc&quot; :inverted=&quot;true&quot;&gt;&lt;/uni-badge&gt;&lt;!--3.使用组件--&gt;  
    &lt;/view&gt;  
&lt;/template&gt;  
&lt;script&gt;  
    import uniBadge from &quot;../../../components/uni-badge.vue&quot;;//1.导入组件（这步属于传统vue规范，但在uni-app的easycom下可以省略这步）  
    export default {  
        data() {  
            return {  
            }  
        },  
        components: {  
            uniBadge //2.注册组件（这步属于传统vue规范，但在uni-app的easycom下可以省略这步）  
        }  
    }  
&lt;/script&gt;</pre><p id="fdc34858dcff96b87f6e1cf2c9d745fc" class="ne-p"><span class="ne-text">如需要全局导入vue组件，即每个页面都可以直接使用而不用引用和注册的话，在项目根目录下的main.js里处理。如下是hello uni-app里的例子。</span></p><pre data-language="javascript" id="MhTPa" class="ne-codeblock language-javascript">//main.js  
import pageHead from './components/page-head.vue' //导入  
Vue.component('page-head', pageHead) //注册。注册后在每个vue的page页面里可以直接使用&lt;page-head&gt;&lt;/page-head&gt;组件。</pre><p id="758d2e3e83f6519710750264cacbf690" class="ne-p"><span class="ne-text">上述的组件使用方式属于传统vue的概念。uni-app 2.7以后推出了更简单的组件使用技术</span><a href="https://uniapp.dcloud.net.cn/collocation/pages?id=easycom" data-href="https://uniapp.dcloud.net.cn/collocation/pages?id=easycom" target="_blank" class="ne-link"><span class="ne-text">easycom</span></a><span class="ne-text">，无需引用和注册组件，直接在template区域使用组件即可。</span></p><p id="b7443f7afae36687f40ef92e4cf4ea11" class="ne-p"><br></p><h2 id="72505980"><span class="ne-text">js的变化</span></h2><p id="61d502f5529ded98c379a721660f839b" class="ne-p"><span class="ne-text">js的变化，分为</span><strong><span class="ne-text">运行环境变化</span></strong><span class="ne-text">、</span><strong><span class="ne-text">数据绑定模式变化</span></strong><span class="ne-text">、</span><strong><span class="ne-text">api变化</span></strong><span class="ne-text">3部分。</span></p><h3 id="vNdy9"><span class="ne-text">运行环境从浏览器变成v8引擎</span></h3><p id="d27940c658c8e04b1e38b28dd72f9dd4" class="ne-p"><span class="ne-text">标准js语法和api都支持，比如if、for、settimeout、indexOf等。</span></p><p id="f7409cc3b0a94b2da6a5701d47de7f18" class="ne-p"><br></p><p id="53640e60cb3f0408c83c1ce0604faa4b" class="ne-p"><span class="ne-text">但</span><strong><span class="ne-text">浏览器专用的</span></strong><span class="ne-text">window、document、navigator、location对象，包括cookie等存储，</span><strong><span class="ne-text">只有在浏览器中才有</span></strong><span class="ne-text">，app和小程序都不支持。</span></p><p id="b3758dc607e5b8c63fb1bb9d4f411f63" class="ne-p"><br></p><div class="ne-quote"><p id="f5a153969de7c094fb6c2cb34c8246bc" class="ne-p"><span class="ne-text">可能有些人以为js等于浏览器里的js。其实js是ECMAScript组织管理的，浏览器中的js是w3c组织基于js规范补充了window、document、navigator、location等专用对象。</span></p></div><p id="c6566e32ff4d4451f3b14b4f94753bf6" class="ne-p"><span class="ne-text">在uni-app的各个端中，除了h5端，其他端的js都运行在一个独立的v8引擎下，不是在浏览器中，所以浏览器的对象无法使用。如果你做过小程序开发，对此应当很了解。</span></p><p id="2132ef2d9349284fac839a33b387b7d2" class="ne-p"><strong><span class="ne-text">这意味着依赖document的很多HTML的库，比如jqurey无法使用。</span></strong></p><p id="be8fb78e319a400ad87d2e93c547dce6" class="ne-p"><span class="ne-text">当然app和小程序支持web-view组件，里面可以加载标准HTML，这种页面仍然支持浏览器专用对象window、document、navigator、location。</span></p><h3 id="04kae"><span class="ne-text">以前的dom操作，改成vue的MVVM模式</span></h3><p id="c3f9b571fdd117cf94df539bc44d0f5a" class="ne-p"><span class="ne-text">现在前端趋势是去dom化，改用</span><strong><span class="ne-text">mvvm模式，</span></strong><span class="ne-text">更简洁的写法，大幅减少代码行数，同时差量渲染性能更好。</span></p><p id="0e876d2cadaed7ebe773db01b197dcd8" class="ne-p"><span class="ne-text">uni-app使用vue的数据绑定方式解决js和dom界面交互的问题。</span></p><p id="d829eda9aa22a42e4cb1d7bea07ed0e2" class="ne-p"><span class="ne-text">如果你想改变某个dom元素的显示内容，比如一个view的显示文字：</span></p><p id="0c5d88300f29c716b63f06777891275b" class="ne-p"><strong><span class="ne-text">以前</span></strong><span class="ne-text">是</span><span class="ne-text" style="text-decoration: underline">给view设id，然后js里通过选择器获取dom元素，进一步通过js进行赋值操作，修改dom元素的属性或值。</span></p><p id="2e023ff3890e11eef3fc3ae164bfbdfd" class="ne-p"><span class="ne-text">如下演示了一段代码，页面中有个显示的文字区和一个按钮，点击按钮后会修改文字区的值</span></p><pre data-language="html" id="or5BF" class="ne-codeblock language-html">&lt;html&gt;  
    &lt;head&gt;  
        &lt;script type=&quot;text/javascript&quot;&gt;  
            document.addEventListener(&quot;DOMContentLoaded&quot;,function () {  
                document.getElementById(&quot;spana&quot;).innerText=&quot;456&quot;  
            })  
            function changetextvalue () {  
                document.getElementById(&quot;spana&quot;).innerText=&quot;789&quot;  
            }  
        &lt;/script&gt;  
    &lt;/head&gt;  
    &lt;body&gt;  
        &lt;span id=&quot;spana&quot;&gt;123&lt;/span&gt;  
        &lt;button type=&quot;button&quot; onclick=&quot;changetextvalue()&quot;&gt;修改为789&lt;/button&gt;  
    &lt;/body&gt;  
&lt;/html&gt;</pre><p id="6e0731a9482a90ca8cfd543cac0f5a5d" class="ne-p"><span class="ne-text">现在的做法，是</span><strong><span class="ne-text">vue的绑定模式</span></strong><span class="ne-text">，给这个</span><strong><span class="ne-text">dom元素绑定一个js变量</span></strong><span class="ne-text">，在script中修改js变量的值，dom会自动变化，页面会自动更新渲染</span></p><pre data-language="vue" id="wAHoO" class="ne-codeblock language-vue">&lt;template&gt;  
    &lt;view&gt;  
        &lt;text&gt;{{textvalue}}&lt;/text&gt;&lt;!-- 这里演示了组件值的绑定 --&gt;  
        &lt;button :type=&quot;buttontype&quot; @click=&quot;changetextvalue()&quot;&gt;修改为789&lt;/button&gt;&lt;!-- 这里演示了属性和事件的绑定 --&gt;  
    &lt;/view&gt;  
&lt;/template&gt;  
&lt;script&gt;  
    export default {  
        data() {  
            return {  
                textvalue:&quot;123&quot;,  
                buttontype:&quot;primary&quot;  
            };  
        },  
        onLoad() {  
            this.textvalue=&quot;456&quot;//这里修改textvalue的值，其实123都来不及显示就变成了456  
        },  
        methods: {  
            changetextvalue() {  
                this.textvalue=&quot;789&quot;//这里修改textvalue的值，页面自动刷新为789  
            }  
        }  
    }  
&lt;/script&gt;</pre><p id="bc368c6ca5fe6f2050365c1ca6c94b50" class="ne-p"><span class="ne-text">注意上述代码中的 </span><code class="ne-code"><span class="ne-text">export default {}</span></code><span class="ne-text"> 里的 </span><code class="ne-code"><span class="ne-text">data(): {return { }}</span></code><span class="ne-text">。</span></p><p id="759ea192959475f38176b131034c1804" class="ne-p"><span class="ne-text">在vue的设计中，这里存放着页面中需要绑定的数据，写在data里，才能被界面正确的绑定和渲染。</span></p><p id="00dd11445938bf5ebda6b987b37578ab" class="ne-p"><span class="ne-text">注意：uni-app的vue页面是vue的单文件组件规范，按照vue的定义只接受 function，必须用 return 包起来。</span></p><p id="417ce279021fdf8ddf1a14640853b25c" class="ne-p"><span class="ne-text">如果你学过小程序的数据绑定，但不了解vue，要注意：</span></p><ul class="ne-ul"><li id="929bdf76b10333306717a395b4a75fa9"><span class="ne-text">小程序的数据绑定参考了vue，但自己修改了一些。在uni-app中只支持标准的vue，不支持小程序的数据绑定语法</span></li><li id="52b04def02fc0f6d1e3f7140967aab91"><span class="ne-text">小程序里的setData在uni-app里并不存在，因为vue是自动双向数据绑定的。直接通过赋值方式修改数据，如果数据绑定到界面上，界面会自动更新渲染</span></li></ul><p id="1dd93bf69cfe5d627fa00d8d4a8b39f6" class="ne-p"><span class="ne-text">从上述示例，还可看出事件的写法变化。</span></p><ul class="ne-ul"><li id="44aa4a140ad05a32b9cec86fd5852be7"><span class="ne-text">以前，元素的事件是用onxxx=&quot;&quot;，里面写一段js或引用function的name，比如上述代码中的</span><code class="ne-code"><span class="ne-text">onclick=&quot;changetextvalue()&quot;</span></code></li><li id="41867f53cd0d583070e864f28ef3d037"><span class="ne-text">现在，需要在js的</span><code class="ne-code"><span class="ne-text">export default {}</span></code><span class="ne-text"> 里的 </span><code class="ne-code"><span class="ne-text">methods: {}</span></code><span class="ne-text"> 里写一个方法，然后在组件中使用</span><code class="ne-code"><span class="ne-text">@click=&quot;changetextvalue()&quot;</span></code></li></ul><p id="18e52674a48b83551b618a7df7f6b177" class="ne-p"><span class="ne-text">在js中，与data和methods平级的，如上述示例代码中的</span><code class="ne-code"><span class="ne-text">onload()</span></code><span class="ne-text">，称为生命周期。在普通vue页面里的生命周期叫页面生命周期。在项目根目录的app.vue文件中的生命周期叫应用生命周期。</span></p><p id="319355b017d6c9bc7d7c2ab484dc551d" class="ne-p"><span class="ne-text">除了</span><code class="ne-code"><span class="ne-text">onload</span></code><span class="ne-text">，还有</span><code class="ne-code"><span class="ne-text">onready</span></code><span class="ne-text">等很多生命周期，具体见</span><a href="https://uniapp.dcloud.io/collocation/frame/lifecycle" data-href="https://uniapp.dcloud.io/collocation/frame/lifecycle" target="_blank" class="ne-link"><span class="ne-text">uni-app的生命周期</span></a></p><p id="8cb769a80e78d931024ec7839dbe5131" class="ne-p"><span class="ne-text">在高级用法里，</span><strong><span class="ne-text">vue支持给组件设ref（引用标记）</span></strong><span class="ne-text">，这类似于之前html中给一个dom元素设id，然后在js中也可以用</span><code class="ne-code"><span class="ne-text">this.$refs.xxx</span></code><span class="ne-text">来获取。如下：</span></p><pre data-language="vue" id="foJ6h" class="ne-codeblock language-vue">&lt;template&gt;  
  &lt;view&gt;  
    &lt;view ref=&quot;testview&quot;&gt;11111&lt;/view&gt;  
    &lt;button @click=&quot;getTest&quot;&gt;获取test节点&lt;/button&gt;  
  &lt;/view&gt;  
&lt;/template&gt;  
&lt;script&gt;  
export default {  
  methods: {  
    getTest() {  
      console.log(this.$refs.testview)  
    }  
  }  
};  
&lt;/script&gt;</pre><h3 id="idCpM"><span class="ne-text">js api的变化</span></h3><p id="1346ad461c78f72851d48b28cd0a04de" class="ne-p"><span class="ne-text">因为uni-app的api是</span><strong><span class="ne-text">参考小程序</span></strong><span class="ne-text">的，所以</span><strong><span class="ne-text">和浏览器的js api</span></strong><span class="ne-text">有很多不同，如</span></p><ol class="ne-ol"><li id="1a12d133b7d0017d5f9f9cbc79f49654"><span class="ne-text">alert,confirm 改成 </span><a href="https://uniapp.dcloud.io/api/ui/prompt?id=showmodal" data-href="https://uniapp.dcloud.io/api/ui/prompt?id=showmodal" target="_blank" class="ne-link"><span class="ne-text">uni.showmodel</span></a></li><li id="00389029828cdf1d3e9ee97783342e14"><span class="ne-text">ajax 改成 </span><a href="https://uniapp.dcloud.io/api/request/request" data-href="https://uniapp.dcloud.io/api/request/request" target="_blank" class="ne-link"><span class="ne-text">uni.request</span></a></li><li id="7716c7c0e7a527c6882fc62a1a1774e4"><span class="ne-text">cookie、session 没有了，local.storage 改成 </span><a href="https://uniapp.dcloud.io/api/storage/storage?id=setstorage" data-href="https://uniapp.dcloud.io/api/storage/storage?id=setstorage" target="_blank" class="ne-link"><span class="ne-text">uni.storage</span></a></li></ol><p id="3fa69db8130011eb01a2a82448359762" class="ne-p"><span class="ne-text">uni-app的js api还有很多，但基本就是小程序的api，把wx.xxx改为uni.xxx即可。</span><a href="https://uniapp.dcloud.io/api/README" data-href="https://uniapp.dcloud.io/api/README" target="_blank" class="ne-link"><span class="ne-text">详见</span></a></p><p id="2acdbf6612454e9d34d591577351d275" class="ne-p"><span class="ne-text">uni-app在不同的端，支持条件编译，无限制的使用各端独有的api，</span><a href="https://uniapp.dcloud.io/platform" data-href="https://uniapp.dcloud.io/platform" target="_blank" class="ne-link"><span class="ne-text">详见条件编译</span></a></p><p id="9dc2e2b51cdc23e965e30caef7c0a9c8" class="ne-p"><br></p><h2 id="61f2d4d5"><span class="ne-text">css的变化</span></h2><p id="4595b3949443db62e1fa2a13906f83c9" class="ne-p"><strong><span class="ne-text">标准的css基本都是支持的。</span></strong></p><h3 id="lfkJR"><span class="ne-text">选择器方面</span></h3><div class="ne-quote"><p id="bc0842daf7756f35541ac204b3449f8e" class="ne-p"><span class="ne-text">有2个变化：</span></p></div><ol class="ne-ol"><li id="f935ec358a77e119b405f3a2af015580"><span class="ne-text">*选择器不支持；</span></li><li id="c3504e842b2d83c37b53e0faf325053f"><span class="ne-text">元素选择器里没有body，改为了page。微信小程序即是如此。</span></li></ol><pre data-language="css" id="IEVRv" class="ne-codeblock language-css">page{  
}</pre><ul class="ne-ul"><li id="d839e1a36d35735a80f49e1cd5f6d213"><strong><span class="ne-text">单位方面：</span></strong><span class="ne-text">px无法动态适应不同宽度的屏幕，rem无法用于nvue/weex。如果想使用根据屏幕宽度自适应的单位，推荐使用rpx，全端支持。 </span><a href="https://uniapp.dcloud.io/frame?id=%e5%b0%ba%e5%af%b8%e5%8d%95%e4%bd%8d" data-href="https://uniapp.dcloud.io/frame?id=%e5%b0%ba%e5%af%b8%e5%8d%95%e4%bd%8d" target="_blank" class="ne-link"><span class="ne-text">尺寸单位文档</span></a></li><li id="724ea670a147ba2bf3236d8670b2464a"><strong><span class="ne-text">布局方面：</span></strong><span class="ne-text">uni-app推荐使用flex布局，这个布局思路和传统流式布局有点区别。但flex的特色在于，不管是什么技术都支持这种排版，web、小程序/快应用、weex/rn、原生的iOS、Android开发，全都支持flex。它是通吃所有端的新一代布局方案。相关教程请自行百度学习。</span></li></ul><h3 id="wIidY"><span class="ne-text">flex</span></h3><p id="c33ad76392bd8d676d2e1dc676c2676f" class="ne-p"><span class="ne-text">uni-app的vue文件里支持所有web排版方式，不管是流式还是flex。但nvue里，只支持flex，因为它在app端是使用原生排版引擎渲染的。</span></p><p id="6863d421ba7589a46b08bf2e1aad31c7" class="ne-p"><strong><span class="ne-text">注意css里背景图和字体文件，尽量不要大于40k，因为会影响性能。在小程序端，如果要大于40k，需放到服务器侧远程引用或base64后引入，不能放到本地作为独立文件引用。</span></strong></p><h2 id="7zUoo"><span class="ne-text">参考资料</span></h2><ul class="ne-ul"><li id="7675e633752c3528a0c07510e6739b8a"><a href="https://uniapp.dcloud.net.cn/" data-href="https://uniapp.dcloud.net.cn/" target="_blank" class="ne-link"><span class="ne-text">https://uniapp.dcloud.net.cn/</span></a></li><li id="9e83bf2b1195a1d5c3d28c534686e7a1"><a href="https://cn.vuejs.org/index.html" data-href="https://cn.vuejs.org/index.html" target="_blank" class="ne-link"><span class="ne-text">https://cn.vuejs.org/index.html</span></a></li><li id="3955ce6848c09d752bea9078f714ef0f"><span class="ne-text">官方教程：</span><a href="https://ke.qq.com/course/343370" data-href="https://ke.qq.com/course/343370" target="_blank" class="ne-link"><span class="ne-text">uni-app跨平台框架官方教程</span></a></li><li id="985d82d6017ab65b2945babdad6ea901"><a href="https://ask.dcloud.net.cn/article/35657" data-href="https://ask.dcloud.net.cn/article/35657" target="_blank" class="ne-link"><span class="ne-text">白话uni-app </span></a></li><li id="e196c8a3b3fba790d9311e27e46ace8a"><span class="ne-text">微信官方文档：</span><a href="https://developers.weixin.qq.com/doc/" data-href="https://developers.weixin.qq.com/doc/" target="_blank" class="ne-link"><span class="ne-text">https://developers.weixin.qq.com/doc/</span></a></li></ul></div>0:{"buildId":"ojCF045NjSCdIX953ggig","rsc":["$","$1","c",{"children":[["$","section",null,{"className":"relative","children":["$","$L2",null,{"fade":true,"blur":true,"transition":{"duration":0.5},"delay":0.1,"className":"relative overflow-hidden border-y xl:flex","children":[["$","div",null,{"className":"m-6 w-full flex-1 bg-[radial-gradient(circle_at_center,color-mix(in_oklab,var(--primary)_15%,transparent)_2px,transparent_2px)] bg-size-[18px_18px] max-xl:hidden"}],["$","div",null,{"className":"mx-auto w-full max-w-6xl flex-none space-y-8 px-4 py-8 min-[1158px]:border-x sm:px-6 sm:py-12 lg:px-8","children":[["$","$L2",null,{"fade":true,"blur":true,"slide":{"direction":"down","offset":30},"transition":{"duration":0.4},"children":["$","$L3",null,{"href":"/blog","className":"text-muted-foreground hover:text-foreground inline-flex items-center gap-2 text-sm transition-colors","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-arrow-left h-4 w-4","aria-hidden":"true","children":[["$","path","1l729n",{"d":"m12 19-7-7 7-7"}],["$","path","x3x0zl",{"d":"M19 12H5"}],"$undefined"]}],"返回","技术博客"]}]}],["$","article",null,{"className":"mx-auto max-w-4xl","children":[["$","header",null,{"className":"mb-8 space-y-6","children":[["$","$L2",null,{"fade":true,"blur":true,"slide":{"direction":"up","offset":50},"delay":0.2,"transition":{"duration":0.6},"children":["$","div",null,{"className":"relative aspect-video overflow-hidden rounded-xl","children":["$","$L4",null,{"src":"https://cdn.nlark.com/yuque/0/2020/png/1484158/1604048264989-b4591bb0-e4bc-4581-aae5-bf7615f268b4.png","alt":"uni-app实现一套代码多端使用","fill":true,"className":"object-cover","unoptimized":true}]}]}],["$","$L2",null,{"delay":0.3,"transition":{"duration":0.5},"children":["$","h1",null,{"className":"text-2xl font-bold tracking-tight sm:text-3xl md:text-4xl","children":["$","$L5",null,{"text":"uni-app实现一套代码多端使用","delay":30,"animateBy":"words","direction":"bottom"}]}]}],["$","$L2",null,{"fade":true,"blur":true,"slide":{"direction":"down","offset":30},"delay":0.4,"transition":{"duration":0.5},"children":["$","p",null,{"className":"text-muted-foreground text-lg","children":"前言：本文是大三web技术课程中使用的uni-app技术的学习记录，uni-app实现一套代码多端使用。代码多和vue类似，但是有一些变动，本文内容部分继承自 白话uni-app  做出二次修改与记录。课程大作业：https://github.com/wztlink1013/uniapp-ha..."}]}],["$","$L2",null,{"fade":true,"blur":true,"slide":{"direction":"down","offset":30},"delay":0.5,"transition":{"duration":0.5},"children":["$","div",null,{"className":"text-muted-foreground flex flex-wrap items-center gap-4 text-sm","children":[["$","div",null,{"className":"flex items-center gap-1","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-calendar h-4 w-4","aria-hidden":"true","children":[["$","path","1cmpym",{"d":"M8 2v4"}],["$","path","4m81vk",{"d":"M16 2v4"}],["$","rect","1hopcy",{"width":"18","height":"18","x":"3","y":"4","rx":"2"}],["$","path","8toen8",{"d":"M3 10h18"}],"$undefined"]}],["$","span",null,{"children":"2020年10月29日"}]]}],["$","div",null,{"className":"flex items-center gap-1","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-clock h-4 w-4","aria-hidden":"true","children":[["$","path","mmk7yg",{"d":"M12 6v6l4 2"}],["$","circle","1mglay",{"cx":"12","cy":"12","r":"10"}],"$undefined"]}],["$","span",null,{"children":"3.1千字"}]]}],["$","div",null,{"className":"flex items-center gap-1","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-eye h-4 w-4","aria-hidden":"true","children":[["$","path","1nclc0",{"d":"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}],["$","circle","1v7zrd",{"cx":"12","cy":"12","r":"3"}],"$undefined"]}],["$","span",null,{"children":[20," 阅读"]}]]}],false,false]}]}],false]}],["$","$L2",null,{"delay":0.6,"fade":true,"blur":true,"transition":{"duration":0.6},"className":"-mx-4 sm:-mx-6 lg:-mx-8","children":["$","$L6",null,{}]}],["$","$L2",null,{"fade":true,"blur":true,"slide":{"direction":"up","offset":50},"delay":0.7,"transition":{"duration":0.6},"children":["$","div",null,{"className":"prose prose-neutral dark:prose-invert mt-8 max-w-none","dangerouslySetInnerHTML":{"__html":"$7"}}]}],"$L8","$L9"]}]]}],"$La"]}]}],["$Lb"],"$Lc"]}],"loading":null,"isPartial":false}
8:["$","$L2",null,{"delay":0.8,"fade":true,"blur":true,"transition":{"duration":0.6},"className":"-mx-4 mt-12 sm:-mx-6 lg:-mx-8","children":["$","$L6",null,{}]}]
9:["$","$L2",null,{"fade":true,"blur":true,"slide":{"direction":"up","offset":30},"delay":0.9,"transition":{"duration":0.5},"children":["$","nav",null,{"className":"mt-8 grid gap-4 md:grid-cols-2","children":[["$","$L3",null,{"href":"/blog/xnh83z","className":"hover:bg-muted group flex flex-col rounded-lg border p-4 transition-colors","children":[["$","span",null,{"className":"text-muted-foreground mb-2 text-sm","children":"上一篇"}],["$","span",null,{"className":"group-hover:text-primary line-clamp-2 font-medium transition-colors","children":"搭建Windows子系统Linux及其相关命令"}]]}],["$","$L3",null,{"href":"/blog/im0an1","className":"hover:bg-muted group flex flex-col rounded-lg border p-4 text-right transition-colors md:text-right","children":[["$","span",null,{"className":"text-muted-foreground mb-2 text-sm","children":"下一篇"}],["$","span",null,{"className":"group-hover:text-primary line-clamp-2 font-medium transition-colors","children":"Android平台与开发技术"}]]}]]}]}]
a:["$","div",null,{"className":"m-6 w-full flex-1 bg-[radial-gradient(circle_at_center,color-mix(in_oklab,var(--primary)_15%,transparent)_2px,transparent_2px)] bg-size-[18px_18px] max-xl:hidden"}]
b:["$","script","script-0",{"src":"/_next/static/chunks/11dff99839ab5ba0.js","async":true}]
c:["$","$Ld",null,{"children":["$","$e",null,{"name":"Next.MetadataOutlet","children":"$@f"}]}]
f:null
