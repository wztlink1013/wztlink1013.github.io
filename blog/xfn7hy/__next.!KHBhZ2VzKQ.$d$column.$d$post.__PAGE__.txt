1:"$Sreact.fragment"
2:I[99897,["/_next/static/chunks/4eaa70fe861e9598.js","/_next/static/chunks/fa1a8f8830b9bf3a.js","/_next/static/chunks/6dd6809ee42e252f.js","/_next/static/chunks/f2b800ca7ae14e96.js","/_next/static/chunks/e121db38c98deeb4.js","/_next/static/chunks/6d971f5a9c16d0c2.js","/_next/static/chunks/b397c2fd2abb1207.js","/_next/static/chunks/11dff99839ab5ba0.js"],"MotionPreset"]
3:I[22016,["/_next/static/chunks/4eaa70fe861e9598.js","/_next/static/chunks/fa1a8f8830b9bf3a.js","/_next/static/chunks/6dd6809ee42e252f.js","/_next/static/chunks/f2b800ca7ae14e96.js","/_next/static/chunks/e121db38c98deeb4.js","/_next/static/chunks/6d971f5a9c16d0c2.js","/_next/static/chunks/b397c2fd2abb1207.js","/_next/static/chunks/11dff99839ab5ba0.js"],""]
4:I[85437,["/_next/static/chunks/4eaa70fe861e9598.js","/_next/static/chunks/fa1a8f8830b9bf3a.js","/_next/static/chunks/6dd6809ee42e252f.js","/_next/static/chunks/f2b800ca7ae14e96.js","/_next/static/chunks/e121db38c98deeb4.js","/_next/static/chunks/6d971f5a9c16d0c2.js","/_next/static/chunks/b397c2fd2abb1207.js","/_next/static/chunks/11dff99839ab5ba0.js"],"Image"]
5:I[48347,["/_next/static/chunks/4eaa70fe861e9598.js","/_next/static/chunks/fa1a8f8830b9bf3a.js","/_next/static/chunks/6dd6809ee42e252f.js","/_next/static/chunks/f2b800ca7ae14e96.js","/_next/static/chunks/e121db38c98deeb4.js","/_next/static/chunks/6d971f5a9c16d0c2.js","/_next/static/chunks/b397c2fd2abb1207.js","/_next/static/chunks/11dff99839ab5ba0.js"],"default"]
6:I[72436,["/_next/static/chunks/4eaa70fe861e9598.js","/_next/static/chunks/fa1a8f8830b9bf3a.js","/_next/static/chunks/6dd6809ee42e252f.js","/_next/static/chunks/f2b800ca7ae14e96.js","/_next/static/chunks/e121db38c98deeb4.js","/_next/static/chunks/6d971f5a9c16d0c2.js","/_next/static/chunks/b397c2fd2abb1207.js","/_next/static/chunks/11dff99839ab5ba0.js"],"Separator"]
e:I[97367,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/7340adf74ff47ec0.js"],"OutletBoundary"]
f:"$Sreact.suspense"
0:{"buildId":"hLfS34bpTuYWmElZMPic-","rsc":["$","$1","c",{"children":[["$","section",null,{"className":"relative","children":["$","$L2",null,{"fade":true,"blur":true,"transition":{"duration":0.5},"delay":0.1,"className":"relative overflow-hidden border-y xl:flex","children":[["$","div",null,{"className":"m-6 w-full flex-1 bg-[radial-gradient(circle_at_center,color-mix(in_oklab,var(--primary)_15%,transparent)_2px,transparent_2px)] bg-size-[18px_18px] max-xl:hidden"}],["$","div",null,{"className":"mx-auto w-full max-w-6xl flex-none space-y-8 px-4 py-8 min-[1158px]:border-x sm:px-6 sm:py-12 lg:px-8","children":[["$","$L2",null,{"fade":true,"blur":true,"slide":{"direction":"down","offset":30},"transition":{"duration":0.4},"children":["$","$L3",null,{"href":"/blog","className":"text-muted-foreground hover:text-foreground inline-flex items-center gap-2 text-sm transition-colors","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-arrow-left h-4 w-4","aria-hidden":"true","children":[["$","path","1l729n",{"d":"m12 19-7-7 7-7"}],["$","path","x3x0zl",{"d":"M19 12H5"}],"$undefined"]}],"返回","技术博客"]}]}],["$","article",null,{"className":"mx-auto max-w-4xl","children":[["$","header",null,{"className":"mb-8 space-y-6","children":[["$","$L2",null,{"fade":true,"blur":true,"slide":{"direction":"up","offset":50},"delay":0.2,"transition":{"duration":0.6},"children":["$","div",null,{"className":"relative aspect-video overflow-hidden rounded-xl","children":["$","$L4",null,{"src":"https://cdn.nlark.com/yuque/0/2022/png/1484158/1641879796743-f8670ed9-0562-4e6d-ab68-79418d34424f.png","alt":"mongoose操作MongoDB数据库","fill":true,"className":"object-cover","unoptimized":true}]}]}],["$","$L2",null,{"delay":0.3,"transition":{"duration":0.5},"children":["$","h1",null,{"className":"text-2xl font-bold tracking-tight sm:text-3xl md:text-4xl","children":["$","$L5",null,{"text":"mongoose操作MongoDB数据库","delay":30,"animateBy":"words","direction":"bottom"}]}]}],["$","$L2",null,{"fade":true,"blur":true,"slide":{"direction":"down","offset":30},"delay":0.4,"transition":{"duration":0.5},"children":["$","p",null,{"className":"text-muted-foreground text-lg","children":"GitHub：https://github.com/Automattic/mongoose英文文档：https://mongoosejs.com/docs/guide.html中文文档：http://www.mongoosejs.net/docs/guide.html如何使用nodejs写一个..."}]}],["$","$L2",null,{"fade":true,"blur":true,"slide":{"direction":"down","offset":30},"delay":0.5,"transition":{"duration":0.5},"children":["$","div",null,{"className":"text-muted-foreground flex flex-wrap items-center gap-4 text-sm","children":[["$","div",null,{"className":"flex items-center gap-1","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-calendar h-4 w-4","aria-hidden":"true","children":[["$","path","1cmpym",{"d":"M8 2v4"}],["$","path","4m81vk",{"d":"M16 2v4"}],["$","rect","1hopcy",{"width":"18","height":"18","x":"3","y":"4","rx":"2"}],["$","path","8toen8",{"d":"M3 10h18"}],"$undefined"]}],["$","span",null,{"children":"2022年3月1日"}]]}],["$","div",null,{"className":"flex items-center gap-1","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-clock h-4 w-4","aria-hidden":"true","children":[["$","path","mmk7yg",{"d":"M12 6v6l4 2"}],["$","circle","1mglay",{"cx":"12","cy":"12","r":"10"}],"$undefined"]}],["$","span",null,{"children":"1.6千字"}]]}],["$","div",null,{"className":"flex items-center gap-1","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-eye h-4 w-4","aria-hidden":"true","children":[["$","path","1nclc0",{"d":"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}],["$","circle","1v7zrd",{"cx":"12","cy":"12","r":"3"}],"$undefined"]}],["$","span",null,{"children":[15," 阅读"]}]]}],false,false]}]}],false]}],["$","$L2",null,{"delay":0.6,"fade":true,"blur":true,"transition":{"duration":0.6},"className":"-mx-4 sm:-mx-6 lg:-mx-8","children":["$","$L6",null,{}]}],["$","$L2",null,{"fade":true,"blur":true,"slide":{"direction":"up","offset":50},"delay":0.7,"transition":{"duration":0.6},"children":"$L7"}],"$L8","$L9"]}]]}],"$La"]}]}],["$Lb"],"$Lc"]}],"loading":null,"isPartial":false}
d:T402f,<!doctype html><div class="lake-content" typography="classic"><ul class="ne-ul"><li id="ud43c3a98"><span class="ne-text">GitHub：</span><a href="https://github.com/Automattic/mongoose" data-href="https://github.com/Automattic/mongoose" target="_blank" class="ne-link"><span class="ne-text">https://github.com/Automattic/mongoose</span></a></li><li id="ud396ccb4"><span class="ne-text">英文文档：</span><a href="https://mongoosejs.com/docs/guide.html" data-href="https://mongoosejs.com/docs/guide.html" target="_blank" class="ne-link"><span class="ne-text">https://mongoosejs.com/docs/guide.html</span></a></li><li id="ucd4684f0"><span class="ne-text">中文文档：</span><a href="http://www.mongoosejs.net/docs/guide.html" data-href="http://www.mongoosejs.net/docs/guide.html" target="_blank" class="ne-link"><span class="ne-text">http://www.mongoosejs.net/docs/guide.html</span></a></li><li id="uea71dde7"><a href="https://zhuanlan.zhihu.com/p/56030432" data-href="https://zhuanlan.zhihu.com/p/56030432" target="_blank" class="ne-link"><span class="ne-text">如何使用nodejs写一个接口 - MySQL版</span></a></li></ul><p id="ue53bab1a" class="ne-p"><span class="ne-text"></span></p><p id="u2a1cce22" class="ne-p"><span class="ne-text">shardb-mongodb模块操作数据库不好去使用，比如查询，新建等，所以这个模块只用作ot服务那边；</span></p><p id="ue31486e0" class="ne-p"><span class="ne-text">另外使用mongoose去操作数据库方便写接口</span></p><ul class="ne-ul"><li id="ud603d93e"><a href="https://github.com/share/sharedb-mongo" data-href="https://github.com/share/sharedb-mongo" target="_blank" class="ne-link"><span class="ne-text">https://github.com/share/sharedb-mongo</span></a></li><li id="u387c569c"><a href="https://www.jianshu.com/p/46f06896c9cd" data-href="https://www.jianshu.com/p/46f06896c9cd" target="_blank" class="ne-link"><span class="ne-text">Mongoose 查询结果为空</span></a></li></ul><p id="u59f5e9b2" class="ne-p"><span class="ne-text">schema的相关配置为connection</span></p><ul class="ne-ul"><li id="uc952063f"><span class="ne-text">之前的增删改查笔记：</span><a href="https://github.com/wztlink1013/web-learn-notes/blob/gh-pages/learn-nodejs/express/model/connect.js" data-href="https://github.com/wztlink1013/web-learn-notes/blob/gh-pages/learn-nodejs/express/model/connect.js" target="_blank" class="ne-link"><span class="ne-text">https://github.com/wztlink1013/web-learn-notes/blob/gh-pages/learn-nodejs/express/model/connect.js</span></a></li><li id="u8ee35e52"><a href="https://segmentfault.com/a/1190000019201081" data-href="https://segmentfault.com/a/1190000019201081" target="_blank" class="ne-link"><span class="ne-text">mongoose踩坑笔记： Cannot overwrite `` model once compiled.</span></a></li></ul><h2 id="UocgJ"><span class="ne-text">安装</span></h2><h3 id="VZPAG"><span class="ne-text">MongoDB以及可视化工具Navicat</span></h3><p id="u9f7c554d" class="ne-p"><span class="ne-text">参考之前写的文章：</span><a href="https://www.yuque.com/wztlink1013/blog/nwt63v" data-href="https://www.yuque.com/wztlink1013/blog/nwt63v" target="_blank" class="ne-link"><span class="ne-text">MongoDB下载及使用+Navicat使用+服务器上的配置</span></a></p><h3 id="uwCTa"><span class="ne-text">安装mongoose</span></h3><pre data-language="bash" id="hDgU8" class="ne-codeblock language-bash">cnpm install mongoose -S</pre><h2 id="YR98P"><span class="ne-text">使用</span></h2><h3 id="CuLRf"><span class="ne-text">连接数据库语句</span></h3><pre data-language="javascript" id="wKCav" class="ne-codeblock language-javascript">// 连接数据库
mongoose
  .connect('mongodb://127.0.0.1:27017/test-mongoose', {
    useNewUrlParser: true,
    useUnifiedTopology: true,
  })
  .then(() =&gt; {
    console.log('数据库连接成功')
  })
  .catch(() =&gt; {
    console.log('数据库连接失败')
  })</pre><p id="c9c95a662d6bdc8dfc56fe5b2a44cf39" class="ne-p"><span class="ne-text">然后再将这个js文件require到app.js里面使用</span></p><pre data-language="javascript" id="kCAt4" class="ne-codeblock language-javascript">// 数据库连接
require('./model/connect')</pre><h3 id="q5hLU"><span class="ne-text">创建集合</span></h3><ul class="ne-ul"><li id="7d037472da9784ef7d33551a40fc00d8"><span class="ne-text">先利用函数mongoose的schema函数构建一个规则</span></li><li id="30e3a9d06838927e8d7b6185651b5f25"><span class="ne-text">然后利用model函数创建一个集合并且用上这个规则</span></li></ul><pre data-language="javascript" id="ywJb9" class="ne-codeblock language-javascript">// Schema：数据库集合的结构对象。
// 创建一个集合(相当于sql里面的设定一个表)规则
let TestSchema = new mongoose.Schema({
  name: { type: String },
  age: { type: Number, default: 0 },
  email: { type: String },
  time: { type: Date, default: Date.now },
})

// Model ：由Schema构造而成，可操作数据库。
// 创建一个集合(并且应用上面的规则)
let TestModel = mongoose.model('schema', TestSchema)</pre><h3 id="lC5j4"><span class="ne-text">增加文档</span></h3><ul class="ne-ul"><li id="c1ebd2524e4df9a8bc19d7366ca3792c"><span class="ne-text">第一个参数：create函数</span></li><li id="399e7ec053484186a0799b2639092da0"><span class="ne-text">第二个参数：可以打印相关信息（doc和err）</span></li></ul><pre data-language="javascript" id="YoyaU" class="ne-codeblock language-javascript">// 创建（创建完执行以便之后就注释掉，不然会一直重复创建）
TestModel.create(
  [
    { name: 'test-1', age: 8 },
    { name: 'test-2', age: 18 },
    { name: 'test-3', age: 28 },
    { name: 'test-4', age: 38 },
    { name: 'test-5', age: 48 },
    { name: 'test-6', age: 58, email: 'tttt@qq.com' },
    { name: 'test-7', age: 68, email: 'ssss@qq.com' },
    { name: 'test-8', age: 18 },
    { name: 'test-9', age: 18, email: 'rrrr@qq.com' },
    { name: 'test-10', age: 18 },
  ],
  (error, docs){
    if (error) {
      console.log(error)
    } else {
      console.log('save ok')
      console.log(docs)
    }
  }
)</pre><ul class="ne-ul"><li id="a41addd210d7686d49f6ebcc93cf8e30"><span class="ne-text">也可以创建一个对象赋值给一个变量，然后该变量利用函数save即可保存到数据库</span></li></ul><div data-type="danger" class="ne-alert"><p id="u59cd1a38" class="ne-p"><span class="ne-text">创建完执行以便之后就注释掉，不然会一直重复创建</span></p></div><h3 id="vvKaw"><span class="ne-text">查询文档</span></h3><ul class="ne-ul"><li id="u47e0fb62"><span class="ne-text">查询函数</span><code class="ne-code"><span class="ne-text">findOne</span></code><span class="ne-text">：返回第一条数据</span></li><li id="u7c9bc1e0"><span class="ne-text">查询函数</span><code class="ne-code"><span class="ne-text">find</span></code><span class="ne-text">：查询所有包含条件的数据</span></li></ul><pre data-language="javascript" id="XXoWO" class="ne-codeblock language-javascript">// 查询
TestModel.find(
  // 28&lt;= age &lt;48
  { age: { $gte: 28, $lt: 48 } },
  // 1为指定字段，0为排除字段
  { name: 1, age: 1, _id: 0 },
  function (err, docs) {
    if (err) {
      console.log('查询出错: ' + err)
    } else {
      console.log('$gte,$lte查询结果为: ')
      console.log(docs)
    }
  }
)</pre><h3 id="xa1jM"><span class="ne-text">mongoose条件查询</span></h3><p id="u5d586ab7" class="ne-p"><span class="ne-text">键为变量时用</span></p><p id="u520d896c" class="ne-p"><span class="ne-text">中括号括起来就行了</span></p><pre data-language="javascript" id="T2hyC" class="ne-codeblock language-javascript">checkStr(data.type_id, 'email')
    ? (type_str = 'email')
    : (type_str = 'user_id')
Model_user.find({ [type_str]: data.type_id }, {}, (err, docs) =&gt; {}</pre><p id="u847b6a58" class="ne-p"><span class="ne-text"></span></p><p id="ub924cbe9" class="ne-p"><span class="ne-text">逻辑查询</span></p><p id="uaded3def" class="ne-p"><span class="ne-text">参考：</span></p><ul class="ne-ul"><li id="u60000458"><span class="ne-text">文档：</span><a href="http://mongoosejs.net/docs/queries.html" data-href="http://mongoosejs.net/docs/queries.html" target="_blank" class="ne-link"><span class="ne-text">http://mongoosejs.net/docs/queries.html</span></a></li><li id="u8661ef16"><a href="https://segmentfault.com/a/1190000021010300" data-href="https://segmentfault.com/a/1190000021010300" target="_blank" class="ne-link"><span class="ne-text">mongoose 系列之一 find 查询</span></a></li></ul><pre data-language="javascript" id="EFyWT" class="ne-codeblock language-javascript">Model_user.find(
  { $or: [{ email: obj.email }, { user_id: obj.user_id }] },
  {},
  (err, docs) =&gt; {}
)</pre><h3 id="lVQsg"><span class="ne-text">更新文档</span></h3><p id="ue3e09cc1" class="ne-p"><code class="ne-code"><span class="ne-text">User.updateOne({查询条件}, {要修改的值}).then(result =&gt; console.log(result))</span></code></p><ul class="ne-ul"><li id="ua77d93c9"><span class="ne-text">updateOne：更新单个</span></li><li id="ua869ce75"><span class="ne-text">updateMany：更新多个</span></li></ul><pre data-language="javascript" id="kbyTO" class="ne-codeblock language-javascript">// 更新
let conditions_1 = { name: 'test-3' }
let update = { $set: { age: 11 } }
TestModel.updateOne(conditions_1, update, function (error) {
  if (error) {
    console.log(error)
  } else {
    console.log('Update success!')
    TestModel.find(
      { name: 'test-3' },
      { name: 1, age: 1, _id: 0 },
      function (err, docs) {
        if (err) {
          console.log('查询出错: ' + err)
        } else {
          console.log('更新test-3后的查询结果为: ')
          console.log(docs)
        }
      }
    )
  }
})</pre><h3 id="juiBb"><span class="ne-text">删除文档</span></h3><ul class="ne-ul"><li id="uf64adeb5"><span class="ne-text">删除单个：</span><code class="ne-code"><span class="ne-text">User.findOneAndDelete({})then(result =&gt; console.log(result))</span></code></li><li id="u3ecf60ad"><span class="ne-text">删除多个：</span><code class="ne-code"><span class="ne-text">User.deleteMany({}).then(result =&gt; console.log(result))</span></code></li><li id="u2a8122d7"><span class="ne-text">deleteOne：删除单个</span></li></ul><pre data-language="javascript" id="gvlH0" class="ne-codeblock language-javascript">// 删除
let conditions_2 = { name: 'test-2' }
TestModel.deleteOne(conditions_2, function (error) {
  if (error) {
    console.log(error)
  } else {
    console.log('Delete success!')
    TestModel.find(
      { name: 'test-2' },
      { name: 1, age: 1, _id: 0 },
      function (err, docs) {
        if (err) {
          console.log('查询出错: ' + err)
        } else {
          console.log('删除test-2后的查询结果为: ')
          console.log(docs)
        }
      }
    )
  }
})
</pre><h3 id="NvcCP"><span class="ne-text">mongoose验证</span></h3><p id="6768b794faaf2f60036a6c1c2be309ab" class="ne-p"><br></p><p id="8ab6701f4a72f8e0af41382696760cfa" class="ne-p"><span class="ne-text">required: true 必传字段</span></p><p id="90378084bf4da9d8b82c9cd3712c60a5" class="ne-p"><span class="ne-text">minlength：3 字符串最小长度</span></p><p id="a97cb1cb66346a2d92bcd163175b37da" class="ne-p"><span class="ne-text">maxlength: 20 字符串最大长度</span></p><p id="8ec377a0a479a76429e2dd9201a85ac0" class="ne-p"><span class="ne-text">min: 2 数值最小为2</span></p><p id="7407fc8f50616d578f6683c6eca44f5a" class="ne-p"><span class="ne-text">max: 100 数值最大为100</span></p><p id="6a0c063a60a1416474477e1ef7fd4917" class="ne-p"><span class="ne-text">enum: ['html', 'css', 'javascript', 'node.js']</span></p><p id="dbdb49fa5f9fdc7cd81252f2533703c5" class="ne-p"><span class="ne-text">trim: true 去除字符串两边的空格</span></p><p id="4ad5cb8f78d2a95c5e3991b01f3519e6" class="ne-p"><span class="ne-text">validate: 自定义验证器</span></p><p id="fa2c27ed12d7ac7ad1b48f59c2f5a599" class="ne-p"><span class="ne-text">default: 默认值</span></p><p id="9ae5494a2609fbfaf10e59aa78fbd07a" class="ne-p"><br></p><p id="a018ee404ec903f0043c1b7fa65017d9" class="ne-p"><span class="ne-text">获取错误信息：error.errors['字段名称'].message</span></p><h3 id="Fa0Tc"><span class="ne-text">整体代码</span></h3><pre data-language="javascript" id="CAWaK" class="ne-codeblock language-javascript">/*
 * @Author: wztlink1013
 * @Date: 2022-01-11 12:43:02
 * @LastEditTime: 2022-01-11 16:44:13
 * @Description:
 */
const mongoose = require('mongoose')

// 连接数据库
mongoose
  .connect('mongodb://127.0.0.1:27017/test-mongoose', {
    useNewUrlParser: true,
    useUnifiedTopology: true,
  })
  .then(() =&gt; {
    console.log('数据库连接成功')
  })
  .catch(() =&gt; {
    console.log('数据库连接失败')
  })

// Schema：数据库集合的结构对象。
let TestSchema = new mongoose.Schema({
  name: { type: String },
  age: { type: Number, default: 0 },
  email: { type: String },
  time: { type: Date, default: Date.now },
})

// Model ：由Schema构造而成，可操作数据库。
let TestModel = mongoose.model('schema', TestSchema)

// Entity：由Model创建的实体，可操作数据库。
// let TestEntity = new TestModel({
//   name: 'helloworld',
//   age: 28,
//   email: 'helloworld@qq.com',
// })
// console.log(TestEntity)

// 创建（创建完执行以便之后就注释掉，不然会一直重复创建）
// TestModel.create(
//   [
//     { name: 'test-1', age: 8 },
//     { name: 'test-2', age: 18 },
//     { name: 'test-3', age: 28 },
//     { name: 'test-4', age: 38 },
//     { name: 'test-5', age: 48 },
//     { name: 'test-6', age: 58, email: 'tttt@qq.com' },
//     { name: 'test-7', age: 68, email: 'ssss@qq.com' },
//     { name: 'test-8', age: 18 },
//     { name: 'test-9', age: 18, email: 'rrrr@qq.com' },
//     { name: 'test-10', age: 18 },
//   ],
//   function (error, docs) {
//     if (error) {
//       console.log(error)
//     } else {
//       // console.log('save ok')
//       // console.log(docs)
//     }
//   }
// )

// 查询
TestModel.find(
  // 28&lt;= age &lt;48
  { age: { $gte: 28, $lt: 48 } },
  // 1为指定字段，0为排除字段
  { name: 1, age: 1, _id: 0 },
  function (err, docs) {
    if (err) {
      console.log('查询出错: ' + err)
    } else {
      console.log('$gte,$lte查询结果为: ')
      console.log(docs)
    }
  }
)
// 更新
let conditions_1 = { name: 'test-3' }
let update = { $set: { age: 11 } }
TestModel.updateOne(conditions_1, update, function (error) {
  if (error) {
    console.log(error)
  } else {
    console.log('Update success!')
    TestModel.find(
      { name: 'test-3' },
      { name: 1, age: 1, _id: 0 },
      function (err, docs) {
        if (err) {
          console.log('查询出错: ' + err)
        } else {
          console.log('更新test-3后的查询结果为: ')
          console.log(docs)
        }
      }
    )
  }
})
// 删除
let conditions_2 = { name: 'test-2' }
TestModel.deleteOne(conditions_2, function (error) {
  if (error) {
    console.log(error)
  } else {
    console.log('Delete success!')
    TestModel.find(
      { name: 'test-2' },
      { name: 1, age: 1, _id: 0 },
      function (err, docs) {
        if (err) {
          console.log('查询出错: ' + err)
        } else {
          console.log('删除test-2后的查询结果为: ')
          console.log(docs)
        }
      }
    )
  }
})</pre><p id="ube00435c" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2022/png/1484158/1641879796743-f8670ed9-0562-4e6d-ab68-79418d34424f.png" width="373.49537658691406" id="ddiif" class="ne-image"></p><p id="ub82dbb10" class="ne-p"><br></p><p id="u29316754" class="ne-p"><br></p><p id="ud4ff2363" class="ne-p"><br></p><h3 id="Uz4XW"><span class="ne-text">其他</span></h3><ul class="ne-ul"><li id="u362fd903"><a href="https://blog.csdn.net/youhebuke225/article/details/106872122" data-href="https://blog.csdn.net/youhebuke225/article/details/106872122" target="_blank" class="ne-link"><span class="ne-text">mongoose查询到的对象无法读取问题</span></a></li></ul><h3 id="k5mRE"><span class="ne-text">mongodb创建集合</span></h3><p id="u50abd338" class="ne-p"><br></p></div>7:["$","div",null,{"className":"prose prose-neutral dark:prose-invert mt-8 max-w-none","dangerouslySetInnerHTML":{"__html":"$d"}}]
8:["$","$L2",null,{"delay":0.8,"fade":true,"blur":true,"transition":{"duration":0.6},"className":"-mx-4 mt-12 sm:-mx-6 lg:-mx-8","children":["$","$L6",null,{}]}]
9:["$","$L2",null,{"fade":true,"blur":true,"slide":{"direction":"up","offset":30},"delay":0.9,"transition":{"duration":0.5},"children":["$","nav",null,{"className":"mt-8 grid gap-4 md:grid-cols-2","children":[["$","$L3",null,{"href":"/blog/tdgoby","className":"hover:bg-muted group flex flex-col rounded-lg border p-4 transition-colors","children":[["$","span",null,{"className":"text-muted-foreground mb-2 text-sm","children":"上一篇"}],["$","span",null,{"className":"group-hover:text-primary line-clamp-2 font-medium transition-colors","children":"Express框架及其使用"}]]}],["$","$L3",null,{"href":"/blog/orml31","className":"hover:bg-muted group flex flex-col rounded-lg border p-4 text-right transition-colors md:text-right","children":[["$","span",null,{"className":"text-muted-foreground mb-2 text-sm","children":"下一篇"}],["$","span",null,{"className":"group-hover:text-primary line-clamp-2 font-medium transition-colors","children":"nvm管理node版本"}]]}]]}]}]
a:["$","div",null,{"className":"m-6 w-full flex-1 bg-[radial-gradient(circle_at_center,color-mix(in_oklab,var(--primary)_15%,transparent)_2px,transparent_2px)] bg-size-[18px_18px] max-xl:hidden"}]
b:["$","script","script-0",{"src":"/_next/static/chunks/11dff99839ab5ba0.js","async":true}]
c:["$","$Le",null,{"children":["$","$f",null,{"name":"Next.MetadataOutlet","children":"$@10"}]}]
10:null
