1:"$Sreact.fragment"
2:I[99897,["/_next/static/chunks/4eaa70fe861e9598.js","/_next/static/chunks/946bdd2e6c9b7c49.js","/_next/static/chunks/6dd6809ee42e252f.js","/_next/static/chunks/f2b800ca7ae14e96.js","/_next/static/chunks/e121db38c98deeb4.js","/_next/static/chunks/0973dd923ca2781d.js","/_next/static/chunks/b397c2fd2abb1207.js","/_next/static/chunks/11dff99839ab5ba0.js"],"MotionPreset"]
3:I[22016,["/_next/static/chunks/4eaa70fe861e9598.js","/_next/static/chunks/946bdd2e6c9b7c49.js","/_next/static/chunks/6dd6809ee42e252f.js","/_next/static/chunks/f2b800ca7ae14e96.js","/_next/static/chunks/e121db38c98deeb4.js","/_next/static/chunks/0973dd923ca2781d.js","/_next/static/chunks/b397c2fd2abb1207.js","/_next/static/chunks/11dff99839ab5ba0.js"],""]
4:I[85437,["/_next/static/chunks/4eaa70fe861e9598.js","/_next/static/chunks/946bdd2e6c9b7c49.js","/_next/static/chunks/6dd6809ee42e252f.js","/_next/static/chunks/f2b800ca7ae14e96.js","/_next/static/chunks/e121db38c98deeb4.js","/_next/static/chunks/0973dd923ca2781d.js","/_next/static/chunks/b397c2fd2abb1207.js","/_next/static/chunks/11dff99839ab5ba0.js"],"Image"]
5:I[48347,["/_next/static/chunks/4eaa70fe861e9598.js","/_next/static/chunks/946bdd2e6c9b7c49.js","/_next/static/chunks/6dd6809ee42e252f.js","/_next/static/chunks/f2b800ca7ae14e96.js","/_next/static/chunks/e121db38c98deeb4.js","/_next/static/chunks/0973dd923ca2781d.js","/_next/static/chunks/b397c2fd2abb1207.js","/_next/static/chunks/11dff99839ab5ba0.js"],"default"]
6:I[72436,["/_next/static/chunks/4eaa70fe861e9598.js","/_next/static/chunks/946bdd2e6c9b7c49.js","/_next/static/chunks/6dd6809ee42e252f.js","/_next/static/chunks/f2b800ca7ae14e96.js","/_next/static/chunks/e121db38c98deeb4.js","/_next/static/chunks/0973dd923ca2781d.js","/_next/static/chunks/b397c2fd2abb1207.js","/_next/static/chunks/11dff99839ab5ba0.js"],"Separator"]
d:I[97367,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/7340adf74ff47ec0.js"],"OutletBoundary"]
e:"$Sreact.suspense"
7:Tb51b,<!doctype html><div class="lake-content" typography="classic"><div data-type="info" class="ne-alert"><p id="u09f32c06" class="ne-p"><span class="ne-text">å®˜æ–¹æ–‡æ¡£ï¼š</span><a href="https://react.docschina.org/" data-href="https://react.docschina.org/" class="ne-link"><span class="ne-text">React å®˜æ–¹ä¸­æ–‡æ–‡æ¡£</span></a></p></div><h1 id="v0J3H"><span class="ne-text">ğŸ“Œ</span><span class="ne-text">æœ€å¸¸ç”¨hook</span></h1><h2 id="uOWYu"><span class="ne-text">1ï¸âƒ£</span><span class="ne-text">çŠ¶æ€ç›¸å…³</span></h2><h3 id="oCcis"><span class="ne-text">useState</span></h3><p id="u6d0a5e75" class="ne-p"><span class="ne-text">æ™®é€šå®šä¹‰çš„å˜é‡æ¯æ¬¡ç»„ä»¶æ¸²æŸ“éƒ½æ˜¯æ‰€å®šä¹‰çš„å€¼ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦åœ¨æ¯æ¬¡re-renderéƒ½</span><strong><span class="ne-text">è®°ä½ä¸€ä¸ªçŠ¶æ€çš„æœ€æ–°å€¼</span></strong><span class="ne-text">ï¼Œé‚£å°±éœ€è¦ä½¿ç”¨useState hook</span></p><pre data-language="tsx" id="wHRGw" class="ne-codeblock language-tsx"><code>import { useState } from 'React'
const A = () =&gt; {
  const [a, setA] = useState('a')
  return &lt;div&gt;a value: {a}&lt;/div&gt;
}</code></pre><h4 id="Nnt2G"><span class="ne-text">åˆå§‹çŠ¶æ€</span></h4><ol class="ne-ol"><li id="ue3b27c3a" data-lake-index-type="0"><span class="ne-text">åˆå§‹å€¼å¯ä»¥æ˜¯å¸¦æœ‰è¿”å›å€¼çš„å‡½æ•°ï¼Œè¿™ç§æƒ…å†µåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼›ä½†ä¸èƒ½æ˜¯å‡½æ•°è®¡ç®—å¦åˆ™æ¯æ¬¡æ”¹å˜éƒ½ä¼šé‡æ–°æ‰§è¡Œä¸€éè¯¥å‡½æ•°ï¼Œå½±å“æ€§èƒ½ã€‚å¦‚ä¸‹ä¾‹å­</span></li></ol><pre data-language="tsx" id="OAx4j" class="ne-codeblock language-tsx"><code>import { Button } from 'antd';

export default () =&gt; {
  const [count, setCount] = useState(
    [1, 2, 3].reduce((curr, prev) =&gt; {
      // eslint-disable-next-line no-param-reassign
      curr += prev;
      console.info('&gt;&gt;&gt; init run &gt;&gt;&gt;');
      return curr;
    }, 0),
  );
  const addCount = () =&gt; {
    setCount(count + 1);
    setCount(count + 1);
    setCount(count + 1);
  };

  return (
    &lt;div className=&quot;p-14&quot;&gt;
      &lt;Button onClick={addCount}&gt;count: {count}&lt;/Button&gt;
    &lt;/div&gt;
  );
};
</code></pre><p id="u0b9fc139" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2025/gif/1484158/1736991471369-4fdd6080-01df-456f-a202-4561585c2030.gif" width="720" title="" crop="0,0,1,1" id="u69a5ee6b" class="ne-image"></p><p id="ua09006d3" class="ne-p"><span class="ne-text">æ”¹æˆå¦‚ä½•å³å¯</span></p><details class="lake-collapse"><summary id="u46c51354"><span class="ne-text">å‡ ç§ä¿®æ”¹æ–¹æ³•</span></summary><ol class="ne-ol"><li id="ucbab1854" data-lake-index-type="0"><span class="ne-text">ä¼ é€’ä¸€ä¸ªå¸¦æœ‰è¿”å›å€¼çš„å‡½æ•°</span></li></ol><pre data-language="javascript" id="ahBNW" class="ne-codeblock language-javascript"><code>const [count, setCount] = useState(() =&gt;
  [1, 2, 3].reduce((curr, prev) =&gt; {
    console.info('&gt;&gt;&gt; caled &gt;&gt;&gt;');
    curr += prev;
    return curr;
  }, 0));</code></pre><ol start="2" class="ne-ol"><li id="ub056e02a" data-lake-index-type="0"><span class="ne-text">ä½¿ç”¨useMemoä¼˜åŒ–</span></li></ol><pre data-language="javascript" id="na0df" class="ne-codeblock language-javascript"><code>const initValue = useMemo(
  () =&gt;
    [1, 2, 3].reduce((curr, prev) =&gt; {
      console.info('&gt;&gt;&gt; caled &gt;&gt;&gt;');
      curr += prev;
      return curr;
    }, 0),
  []
);
const [count, setCount] = useState(initValue);</code></pre><ol start="3" class="ne-ol"><li id="u6761150a" data-lake-index-type="0"><span class="ne-text">å°†åˆå§‹å€¼æå–åˆ°ç»„ä»¶å¤–éƒ¨</span></li></ol><pre data-language="javascript" id="C0Jkz" class="ne-codeblock language-javascript"><code>import { Button } from 'antd';
import { useMemo, useState } from 'react';

const initValue = [1, 2, 3].reduce((curr, prev) =&gt; {
  console.info('&gt;&gt;&gt; caled &gt;&gt;&gt;');
  curr += prev;
  return curr;
}, 0);
export default () =&gt; {
  console.info('[rendered]');

  const [count, setCount] = useState(initValue);
  const addCount = () =&gt; {
    setCount(count + 1);
    setCount(count + 1);
    setCount(count + 1);
  };

  return (
    &lt;div className=&quot;p-14&quot;&gt;
      &lt;Button onClick={addCount}&gt;count: {count}&lt;/Button&gt;
    &lt;/div&gt;
  );
};</code></pre></details><h4 id="cTAWy"><span class="ne-text">æ›´æ–°çŠ¶æ€</span></h4><ol class="ne-ol"><li id="u904ae029" data-lake-index-type="0"><span class="ne-text">ä¼ å…¥å€¼æ˜¯è¦†ç›–ï¼Œè€Œä¸ä¼šåˆå¹¶ï¼Œå¦‚ä¸‹é¢æˆªå›¾ä¾‹å­</span></li><li id="ubf97f0c2" data-lake-index-type="0"><span class="ne-text">å­˜åœ¨</span><span class="ne-text" style="color: #E4495B">æ‰¹å¤„ç†</span><span class="ne-text">ï¼Œå¦‚ä¸‹é¢æˆªå›¾ä¾‹å­</span></li></ol><p id="uea8f40f7" class="ne-p"><span class="ne-text">ã€useStateè¿”å›çš„setå‡½æ•°å¹¶ä¸ä¼šç«‹åˆ»æ›´æ–°çŠ¶æ€å€¼ï¼Œè€Œæ˜¯ä¼šæ‰¹é‡æ›´æ–°ï¼Œæ‰€ä»¥åœ¨setå‡½æ•°æ‰§è¡Œåï¼ŒçŠ¶æ€å¯èƒ½è¿˜æ˜¯åŸå§‹å€¼ï¼Œéœ€è¦ç­‰åˆ°ä¸‹æ¬¡renderå€¼æ‰ä¼šæ›´æ–°ï¼ŒaddAç»“æœè¿˜æ˜¯+1ã€‘</span></p><pre data-language="tsx" id="NvrAB" class="ne-codeblock language-tsx"><code>import { Button } from 'antd';

export default () =&gt; {
  const [count, setCount] = useState(0);
  const addCount = () =&gt; {
    setCount(count + 1);
    setCount(count + 1);
    setCount(count + 1);
  };
  return (
    &lt;div className=&quot;p-14&quot;&gt;
      &lt;Button onClick={addCount}&gt;count: {count}&lt;/Button&gt;
    &lt;/div&gt;
  );
};
</code></pre><p id="ua30641ec" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/gif/1484158/1722952555120-5cf64dda-d4b5-4d93-89cb-fb970a40b91a.gif" width="502" title="" crop="0,0,1,1" id="u459444e4" class="ne-image"></p><ol start="3" class="ne-ol"><li id="u832252b4" data-lake-index-type="0"><span class="ne-text">ä¼ å…¥çš„æ˜¯å€¼ï¼Œæ¸²æŸ“å‰ä¼šå­˜åœ¨è¦†ç›–æƒ…å†µï¼Œå¦‚æœä¼ å…¥çš„æ˜¯å‡½æ•°ï¼Œåˆ™ä¼šä¿ç•™ä¸Šä¸€æ¬¡çš„çŠ¶æ€å€¼è®¡ç®—</span></li></ol><pre data-language="tsx" id="IEUTD" class="ne-codeblock language-tsx"><code>import { Button } from 'antd';

export default () =&gt; {
  const [count, setCount] = useState(0);
  const addCount = () =&gt; {
    setCount(count =&gt; count + 1);
    setCount(count =&gt; count + 1);
    setCount(count =&gt; count + 1);
  };
  return (
    &lt;div className=&quot;p-14&quot;&gt;
      &lt;Button onClick={addCount}&gt;count: {count}&lt;/Button&gt;
    &lt;/div&gt;
  );
};</code></pre><p id="u1bb563d3" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/gif/1484158/1722953158493-00240227-da21-4d58-b84f-29005d53a940.gif" width="502" title="" crop="0,0,1,1" id="u453f8617" class="ne-image"></p><h3 id="FkFb5"><span class="ne-text">useRefå’ŒforwardRef</span></h3><p id="u9b795523" class="ne-p"><span class="ne-text">æ–‡æ¡£ï¼š</span><a href="https://zh-hans.react.dev/learn/escape-hatches" data-href="https://zh-hans.react.dev/learn/escape-hatches" class="ne-link"><span class="ne-text">è„±å›´æœºåˆ¶ â€“ React ä¸­æ–‡æ–‡æ¡£</span></a></p><h4 id="U3X7l"><span class="ne-text">æ¨¡æ‹Ÿç”Ÿå‘½å‘¨æœŸ/ç¼“å­˜å˜é‡</span></h4><p id="u7d672ec7" class="ne-p"><span class="ne-text">åˆ©ç”¨useRefåˆ›å»ºçš„æ™®é€šå˜é‡ï¼Œå¯ä»¥å…·å¤‡â€œ</span><strong><span class="ne-text">è®°å¿†</span></strong><span class="ne-text">â€åŠŸèƒ½ï¼Œç±»ä¼¼äºç±»çš„å®ä¾‹å±æ€§ã€‚åˆ©ç”¨è¿™ä¸€ç‚¹å¯ä»¥è®¾ç½®ä¸€ä¸ªflagæ¥å®ç°ç»„ä»¶</span><span class="ne-text" style="color: #DF2A3F">ä»…æ›´æ–°æ—¶è§¦å‘çš„ä»£ç æ‰§è¡Œæ—¶æœºï¼ˆæ‰€å®šä¹‰çš„å˜é‡ä¸UIæ— å…³ï¼‰</span></p><pre data-language="tsx" id="DDbbD" class="ne-codeblock language-tsx"><code>import { Button } from 'antd';

export default () =&gt; {
  const [count, setCount] = useState(0);
  const flag = useRef(false);
  useEffect(() =&gt; {
    if (flag.current) {
      console.info('&gt;&gt;&gt; only update &gt;&gt;&gt;');
    }
  }, [count]);
  const addCount = () =&gt; {
    setCount(count =&gt; count + 1);
    setCount(count =&gt; count + 1);
    setCount(count =&gt; count + 1);
    flag.current = true;
  };
  return (
    &lt;div className=&quot;p-14 text-right&quot;&gt;
      &lt;Button onClick={addCount}&gt;count: {count}&lt;/Button&gt;
    &lt;/div&gt;
  );
};
</code></pre><p id="u8159526a" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/gif/1484158/1722953544781-cbbe70d4-990d-4eef-8baf-dab93a0d6c82.gif" width="606" title="" crop="0,0,1,1" id="sRmeX" class="ne-image"></p><h4 id="qeIFW"><span class="ne-text">ä½œç”¨åœ¨DOMä¸Š</span></h4><p id="ua4b76358" class="ne-p"><span class="ne-text">ä¸”ä¸ºuseRefå‡½æ•°ï¼Œåˆ™ä¸ºå¸¦æœ‰é”®ä¸ºcurrentå€¼ä¸ºDOMæœ¬èº«çš„å¯¹è±¡</span></p><div class="ne-quote"><p id="u8bdc72f1" class="ne-p"><span class="ne-text">ä¹Ÿå¯ä»¥ä½œç”¨åœ¨DOMä¸Šçš„ä¸€ä¸ªå‡½æ•°</span></p></div><pre data-language="tsx" id="B7fJl" class="ne-codeblock language-tsx"><code>import { Button } from 'antd';

export default () =&gt; {
  const btn = useRef(null);
  return (
    &lt;div className=&quot;p-14 text-right&quot;&gt;
      &lt;Button
        onClick={() =&gt; {
          console.log(btn);
        }}
      &gt;
        &lt;button ref={btn}&gt;+++&lt;/button&gt;
      &lt;/Button&gt;
    &lt;/div&gt;
  );
};
</code></pre><p id="u9bc2f0f3" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/gif/1484158/1722953901046-07727d18-605a-439f-8013-c3e9a145206a.gif" width="606" title="" crop="0,0,1,1" id="ud5fcd269" class="ne-image"></p><h4 id="NsV5T"><span class="ne-text">ä½œç”¨åœ¨ç»„ä»¶ä¸Š</span></h4><p id="u7d6cdc8c" class="ne-p"><span class="ne-text">useRefä¸å¯ä»¥ä½œç”¨åœ¨ç»„ä»¶ä¸Šï¼Œä½†æ˜¯å­ç»„ä»¶æœ‰React.forwardRefï¼ˆç»„ä»¶è½¬å‘ï¼‰å¯ä»¥</span></p><div class="ne-quote"><p id="u74205b6f" class="ne-p"><a href="https://zh-hans.react.dev/learn/manipulating-the-dom-with-refs#accessing-another-components-dom-nodes" data-href="https://zh-hans.react.dev/learn/manipulating-the-dom-with-refs#accessing-another-components-dom-nodes" class="ne-link"><span class="ne-text">ä½¿ç”¨ ref æ“ä½œ DOM â€“ React ä¸­æ–‡æ–‡æ¡£</span></a></p></div><pre data-language="tsx" id="ACuZT" class="ne-codeblock language-tsx"><code>import { useRef } from 'React'
const Son = React.forwardRef((props, ref) =&gt; {
  return &lt;div&gt;&lt;input type=&quot;text&quot; ref={ref} /&gt;&lt;/div&gt;
})
const A = () =&gt; {
  const obj = useRef()
  // obj =&gt; { current: inputDOM }
  return &lt;Son ref={obj} /&gt;
}</code></pre><h4 id="fze30"><span class="ne-text">useImperativeHandle</span></h4><div data-type="info" class="ne-alert"><p id="u95428e1b" class="ne-p"><span class="ne-text">ä¼ é€’å¤šä¸ªrefå¯ä»¥ä½¿ç”¨useImperativeHandle</span></p></div><p id="u8a9a358e" class="ne-p"><strong><span class="ne-text">çˆ¶ç»„ä»¶ï¼š</span></strong></p><p id="ub86ad3f5" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1728359332696-d91f61e4-679d-49a4-ae46-d2091cc590af.png" width="315" title="" crop="0,0,1,1" id="ub9408f4c" class="ne-image"></p><p id="uf7663504" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1728359286923-4942332f-562b-4536-b122-9241e0f88457.png" width="809" title="" crop="0,0,1,1" id="ue1dcb0e5" class="ne-image"></p><p id="u054e7213" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1728359313668-6b32e40e-29ea-4c90-9693-bc7c084d4e90.png" width="448" title="" crop="0,0,1,1" id="u747e696b" class="ne-image"></p><p id="u790cdb3d" class="ne-p"><strong><span class="ne-text">å­ç»„ä»¶ï¼š</span></strong></p><p id="ubfd2e2bc" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/png/1484158/1728359321316-f443c580-71f2-4b85-ab41-2a610173ab61.png" width="447" title="" crop="0,0,1,1" id="u263334cf" class="ne-image"></p><h2 id="a8K2t"><span class="ne-text">2ï¸âƒ£</span><span class="ne-text">å‰¯ä½œç”¨ç›¸å…³</span></h2><h3 id="Vitaw"><span class="ne-text">useEffect</span></h3><p id="uc0c75b9d" class="ne-p"><span class="ne-text">æ¸²æŸ“å®Œæˆå†æ‰§è¡Œ</span></p><ol class="ne-ol"><li id="u28b6342c" data-lake-index-type="0"><span class="ne-text">æ¨¡æ‹Ÿå„ä¸ªç”Ÿå‘½å‘¨æœŸçš„æ‰§è¡Œæ—¶æœº</span></li></ol><pre data-language="tsx" id="kODBQ" class="ne-codeblock language-tsx"><code>import { Button } from 'antd';

export default () =&gt; {
  const [count, setCount] = useState(0);
  useEffect(() =&gt; {
    console.log('&gt;&gt;&gt; mount or update &gt;&gt;&gt;');
    return () =&gt; {
      console.log('&gt;&gt;&gt; unmount or before update &gt;&gt;&gt;');
    };
  }, [count]);
  const addCount = () =&gt; {
    setCount(count =&gt; count + 1);
    setCount(count =&gt; count + 1);
    setCount(count =&gt; count + 1);
  };
  return (
    &lt;div className=&quot;p-14 text-right&quot;&gt;
      &lt;Button onClick={addCount}&gt;count: {count}&lt;/Button&gt;
    &lt;/div&gt;
  );
};
</code></pre><p id="u3521ec46" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/gif/1484158/1722954439473-5fa2ff19-ec35-423c-a971-9770fa0c3630.gif" width="606" title="" crop="0,0,1,1" id="u2299f624" class="ne-image"></p><ol start="2" class="ne-ol"><li id="u8886765a" data-lake-index-type="0"><span class="ne-text">å…³äºç¬¬äºŒä¸ªæ•°ç»„å‚æ•°</span></li></ol><ol class="ne-list-wrap"><ol ne-level="1" class="ne-ol"><li id="u29eccab1" data-lake-index-type="0"><span class="ne-text" style="text-decoration: underline">å¦‚æœä¸è®¾ç½®ï¼Œé‚£ä¹ˆåœ¨updateæ—¶æœŸéƒ½ä¼šæ‰§è¡Œ</span></li><li id="uaa101652" data-lake-index-type="0"><span class="ne-text" style="text-decoration: underline">å¦‚æœè®¾ç½®ç©ºæ•°ç»„ï¼ˆä¸”å›è°ƒå‡½æ•°ä¸­æ²¡æœ‰å“åº”å¼å˜é‡ï¼‰ï¼Œåˆ™åªåœ¨mountæ—¶æœŸæ‰§è¡Œä¸€æ¬¡</span></li><li id="u54d7662f" data-lake-index-type="0"><span class="ne-text">ç¼–å†™ä»£ç è¿‡ç¨‹ä¸­ï¼Œå¦‚æœuseEffectå›è°ƒå‡½æ•°ä¸­å­˜åœ¨å“åº”å¼å˜é‡ï¼Œé‚£ä¹ˆç¬¬äºŒä¸ªå‚æ•°æ•°ç»„ä¸­åº”å½“æœ‰è¯¥å“åº”å¼å˜é‡ï¼Œç¬¦åˆé€»è¾‘</span></li></ol></ol><h3 id="tIaOs"><span class="ne-text">useLayoutEffect</span></h3><ul class="ne-ul"><li id="uced42dc0" data-lake-index-type="0"><span class="ne-text">useEffectï¼šæ¸²æŸ“å¹¶ç»˜åˆ¶åˆ°å±å¹•ä¹‹åæ‰§è¡Œï¼Œå¼‚æ­¥</span></li><li id="uec771d52" data-lake-index-type="0"><span class="ne-text">useLayoutEffectï¼š</span><span class="ne-text" style="color: #DF2A3F">æ¸²æŸ“ä¹‹åï¼Œä½†ç»˜åˆ¶åˆ°å±å¹•ä¹‹å‰æ‰§è¡Œï¼ŒåŒæ­¥</span></li><li id="u35d81fb4" data-lake-index-type="0"><span class="ne-text" style="color: #DF2A3F">ä¸€èˆ¬å¦‚æœå›è°ƒå‡½æ•°ä¸­æœ‰DOMçš„ç›¸å…³æ“ä½œå¹¶ä¸”ä¼šæ”¹å˜æ ·å¼ï¼Œç”¨åè€…ï¼Œé¿å…DOMæ¸²æŸ“é—ªå±/ç™½å±ï¼Œä½†å‰è€…æ€§èƒ½æ–¹é¢æ›´å¥½</span></li></ul><h1 id="civf8"><span class="ne-text">âœ¨</span><span class="ne-text">æ¸²æŸ“ä¼˜åŒ–</span></h1><p id="u55cea460" class="ne-p"><span class="ne-text">é¦–å…ˆæ˜ç¡®reactç»„ä»¶é‡æ¸²æŸ“çš„è§¦å‘æ¡ä»¶ï¼š</span></p><ol class="ne-ol"><li id="u6632789a" data-lake-index-type="0"><span class="ne-text">propsæˆ–è€…stateå‘ç”Ÿæ”¹å˜è§¦å‘ç»„ä»¶é‡æ¸²æŸ“</span></li></ol><ol class="ne-list-wrap"><ol ne-level="1" class="ne-ol"><li id="ucc700a9f" data-lake-index-type="0"><span class="ne-text" style="text-decoration: underline">çŠ¶æ€æ›´æ–°ä¼šå¯¼è‡´ï¼Œç»„ä»¶çš„å˜é‡å£°æ˜ã€å‡½æ•°å£°æ˜ã€è¡¨è¾¾å¼è®¡ç®—é‡æ–°æ‰§è¡Œ</span></li></ol></ol><ol start="2" class="ne-ol"><li id="udd834e06" data-lake-index-type="0"><span class="ne-text">çˆ¶ç»„ä»¶çš„é‡æ¸²æŸ“è§¦å‘å­ç»„ä»¶çš„é‡æ¸²æŸ“</span></li></ol><p id="u81cee48c" class="ne-p"><span class="ne-text">å‚è€ƒï¼š</span></p><ul class="ne-ul"><li id="u4f49a05e" data-lake-index-type="0"><a href="https://fe.azhubaby.com/React/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html" data-href="https://fe.azhubaby.com/React/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html" class="ne-link"><span class="ne-text">äº”å¹´å‰ç«¯ä¸‰å¹´é¢è¯• - Johnny çš„å‰ç«¯çŸ¥è¯†åœ°å›¾</span></a></li><li id="u30beddec" data-lake-index-type="0"><a href="https://juejin.cn/post/6935584878071119885" data-href="https://juejin.cn/post/6935584878071119885" class="ne-link"><span class="ne-text">React æ€§èƒ½ä¼˜åŒ– | åŒ…æ‹¬åŸç†ã€æŠ€å·§ã€Demoã€å·¥å…·ä½¿ç”¨</span></a></li></ul><h2 id="y0AhM"><span class="ne-text">1ï¸âƒ£</span><span class="ne-text">ã€éæ¸²æŸ“å±‚é¢ã€‘ ç»„ä»¶ç»“æ„è®¾è®¡</span></h2><h3 id="OOZwL"><span class="ne-text">åˆ†ç¦»ç»„ä»¶å’ŒçŠ¶æ€</span></h3><ul class="ne-ul"><li id="u24265b51" data-lake-index-type="0"><strong><span class="ne-text">æ‹†åˆ†ç»„ä»¶</span></strong><span class="ne-text">ï¼šå°†å¤§ç»„ä»¶æ‹†åˆ†æˆå¤šä¸ªå°ç»„ä»¶ï¼Œæ¯ä¸ªå°ç»„ä»¶åªå…³æ³¨è‡ªå·±éœ€è¦çš„çŠ¶æ€ã€‚è¿™å¯ä»¥å‡å°‘çŠ¶æ€å˜åŒ–æ—¶å½±å“çš„èŒƒå›´ï¼Œé¿å…æ•´ä¸ªå¤§ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚</span></li><li id="ub346b3e2" data-lake-index-type="0"><strong><span class="ne-text">æå‡çŠ¶æ€</span></strong><span class="ne-text">ï¼šå¦‚æœå¤šä¸ªç»„ä»¶å…±äº«åŒä¸€ä»½çŠ¶æ€ï¼Œå¯ä»¥è€ƒè™‘å°†çŠ¶æ€æå‡åˆ°å®ƒä»¬çš„å…±åŒç¥–å…ˆç»„ä»¶ï¼Œç„¶åé€šè¿‡ props ä¼ é€’çŠ¶æ€ã€‚</span></li></ul><h3 id="BdJyp"><span class="ne-text">lazyï¼ˆAPIï¼‰Suspenseï¼ˆAPIï¼‰</span></h3><p id="u97d3662a" class="ne-p"><span class="ne-text">å½“æ¨¡å—åŒ–å¼•å…¥ï¼ˆimportï¼‰ç»„ä»¶ï¼Œä½†åœ¨å®é™…ä»£ç ä¸­æœªä½¿ç”¨åˆ°ï¼Œä»£ç å†…éƒ¨é€»è¾‘ä»ä¼šæ‰§è¡Œï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥åˆ©ç”¨lazyä½¿ç»„ä»¶å¼‚æ­¥åŒ–åŠ è½½ï¼Œä»è€Œè¾¾åˆ°æ€§èƒ½ä¼˜åŒ–æ•ˆæœ</span></p><pre data-language="tsx" id="SPcmc" class="ne-codeblock language-tsx"><code>import { lazy } from 'react';

const AuthRoute = lazy(() =&gt; import('./AuthRoute'));
const ErrorPage = lazy(() =&gt; import('@/components/ErrorBoundary'));
const NotFound = lazy(() =&gt; import('@/pages/404'));</code></pre><p id="u58cf40e3" class="ne-p"><span class="ne-text">Suspenseåˆ™ä½œä¸ºä¸­é—´è¿‡æ¸¡æ€</span></p><h3 id="fzXsa"><span class="ne-text">ä½¿ç”¨æ¡ä»¶æ¸²æŸ“</span></h3><p id="u362a592d" class="ne-p"><code class="ne-code"><span class="ne-text">{msg &amp;&amp; (&lt;Child msg={msg} onClick={onChildClick} /&gt;)}</span></code></p><h3 id="u9hP9"><span class="ne-text">ä½¿ç”¨ Fragment å‡å°‘ä¸å¿…è¦çš„ DOM èŠ‚ç‚¹</span></h3><h3 id="LaG9J"><span class="ne-text">å¼€å‘è€…å·¥å…·åˆ†æ</span></h3><h4 id="nvqMf"><span class="ne-text">Logger</span></h4><p id="u6b8c29bd" class="ne-p"><span class="ne-text">é€šè¿‡è‡ªå®šä¹‰ç»„ä»¶æ¸²æŸ“æ‰“å°å¯¹è±¡ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­å°±å¯ä»¥çŸ¥é“ç»„ä»¶æ¸²æŸ“æƒ…å†µ</span></p><h4 id="o1klT"><span class="ne-text">Profiler</span></h4><p id="uc1cc323d" class="ne-p"><span class="ne-text">Profileræ ‡ç­¾</span></p><ul class="ne-ul"><li id="u096a476a" data-lake-index-type="0"><span class="ne-text">ä½¿ç”¨ React å¼€å‘è€…å·¥å…·çš„ â€œProfilerâ€ æ ‡ç­¾æ¥åˆ†æç»„ä»¶çš„æ¸²æŸ“æ¬¡æ•°å’Œæ€§èƒ½ç“¶é¢ˆï¼Œè¿›è€Œä¼˜åŒ–ä»£ç ã€‚</span></li></ul><pre data-language="typescript" id="JHXqX" class="ne-codeblock language-typescript"><code>const onRenderCallback = (
  id: string,
  phase: string,
  actualDuration: number,
  baseDuration: number,
  startTime: number,
  commitTime: number,
) =&gt; {
  console.log({ id, phase, actualDuration, baseDuration, startTime, commitTime });
};</code></pre><pre data-language="tsx" id="UaeTD" class="ne-codeblock language-tsx"><code>&lt;Profiler id=&quot;App&quot; onRender={onRenderCallback}&gt;
  &lt;div style={{
  marginTop: '200px',
  textAlign: 'right'
}}&gt;
    &lt;button onClick={onAppClick}&gt;
      count is {count}
    &lt;/button&gt;
    {msg &amp;&amp; (
  &lt;Suspense fallback={&lt;div&gt;Loading...&lt;/div&gt;}&gt;
    &lt;Child msg={msg} onClick={onChildClick} /&gt;
  &lt;/Suspense&gt;
)}
  &lt;/div&gt;
&lt;/Profiler&gt;</code></pre><h2 id="j8Zrq"><span class="ne-text">2ï¸âƒ£</span><span class="ne-text">ã€renderé˜¶æ®µã€‘ è·³è¿‡ä¸å¿…è¦çš„ç»„ä»¶æ›´æ–°</span></h2><h3 id="mP7zV"><span class="ne-text">memoä¼˜åŒ–å­ç»„ä»¶</span></h3><p id="u37eebeeb" class="ne-p"><span class="ne-text">æœªä½¿ç”¨memoçš„æ¸²æŸ“, å½“çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œå³ä½¿å­ç»„ä»¶æœªå‘ç”Ÿå˜åŒ–, å­ç»„ä»¶ä¹Ÿä¼šé‡æ–°æ¸²æŸ“</span></p><pre data-language="tsx" id="Uol8q" class="ne-codeblock language-tsx"><code>import { Button } from 'antd';

const Child = () =&gt; {
  console.log('&gt;&gt;&gt; child component render &gt;&gt;&gt;');
  return &lt;div&gt;child component&lt;/div&gt;;
};

export default () =&gt; {
  const [count, setCount] = useState(0);
  const addCount = () =&gt; {
    setCount(count =&gt; count + 1);
    setCount(count =&gt; count + 1);
    setCount(count =&gt; count + 1);
  };
  return (
    &lt;div className=&quot;p-14 text-right&quot;&gt;
      &lt;Button onClick={addCount}&gt;count: {count}&lt;/Button&gt;
      &lt;Child /&gt;
    &lt;/div&gt;
  );
};
</code></pre><p id="u6e4b1ff5" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/gif/1484158/1722955261333-678efd2a-dc1d-453f-b284-c449cdefaa3c.gif" width="606" title="" crop="0,0,1,1" id="u1aeb3c6d" class="ne-image"></p><p id="u8f7f8983" class="ne-p"><span class="ne-text">memoç±»ä¼¼ç±»ç»„ä»¶ä¸­çš„</span><code class="ne-code"><span class="ne-text">PureComponent</span></code><span class="ne-text">æ€§èƒ½ä¼˜åŒ–ç»„ä»¶</span></p><ol class="ne-ol"><li id="u69dda7d6" data-lake-index-type="0"><span class="ne-text" style="color: #DF2A3F">å¯¹ä¼ å…¥çš„ props è¿›è¡Œæµ…æ¯”è¾ƒï¼Œå¦‚æœ props æ²¡æœ‰å˜åŒ–ï¼Œåˆ™ä¸ä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶</span></li><li id="u993d2be2" data-lake-index-type="0"><span class="ne-text">å‡½æ•°ç»„ä»¶ä¸­å½“å“åº”å˜é‡çš„å€¼æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œä¸ä¼šé‡æ–°æ¸²æŸ“ï¼Œå’Œç±»ç»„ä»¶ä¸ä¸€æ ·</span></li><li id="u110c7560" data-lake-index-type="0"><span class="ne-text">å½“ç»„ä»¶çš„å€¼å‘ç”Ÿæ”¹å˜æ‰è¿›è¡Œrenderï¼Œåä¹‹ä¸è¿›è¡Œrender</span></li></ol><pre data-language="tsx" id="QmU14" class="ne-codeblock language-tsx"><code>import { Button } from 'antd';

const Child = memo((props: any) =&gt; {
  console.log('&gt;&gt;&gt; child component render &gt;&gt;&gt;');
  return &lt;div&gt;child component {props.child}&lt;/div&gt;;
});

export default () =&gt; {
  const [count, setCount] = useState(0);
  const [child, setChild] = useState(0);
  const addCount = () =&gt; {
    setCount(count =&gt; count + 1);
    setCount(count =&gt; count + 1);
    setCount(count =&gt; count + 1);
  };
  return (
    &lt;div className=&quot;p-14 text-right&quot;&gt;
      &lt;Button onClick={addCount}&gt;not change: {count}&lt;/Button&gt;
      &lt;Button
        onClick={() =&gt; {
          setChild(child =&gt; child + 1);
        }}
      &gt;
        change: {child}
      &lt;/Button&gt;
      &lt;Child child={child} /&gt;
    &lt;/div&gt;
  );
};
</code></pre><p id="uadfcf1b0" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/gif/1484158/1722955626527-53f742ae-2a86-4f79-b54c-15b7511f4eb7.gif" width="606" title="" crop="0,0,1,1" id="u1fbd8dee" class="ne-image"></p><h3 id="j6mrP"><span class="ne-text">é¿å…åŒ¿åå‡½æ•°å’Œå¯¹è±¡çš„é‡æ–°åˆ›å»º</span></h3><pre data-language="tsx" id="evZDX" class="ne-codeblock language-tsx"><code>import React, { useState } from 'react'

const Child = React.memo((props?: {
  msg?: string
  onClick?: () =&gt; void
}) =&gt; {
  console.info('[child render]')
  return (
    &lt;div&gt;
      {props?.msg || 'child default msg value'}
    &lt;/div&gt;
  )
})

function App() {
  console.info('[App render]')
  const [count, setCount] = useState(0);
  const [msg, setMsg] = useState('hello');

  return (
      &lt;div style={{
        marginTop: '200px',
        textAlign: 'right'
      }}&gt;
        &lt;button onClick={() =&gt; setCount((count) =&gt; count + 1)}&gt;
          count is {count}
        &lt;/button&gt;
        &lt;Child msg={msg} onClick={() =&gt; console.log('test lambda function rerender too.')} /&gt;
      &lt;/div&gt;
  )
}

export default App
</code></pre><p id="ua34a7728" class="ne-p"><span class="ne-text">ä¸Šé¢çš„ä¾‹å­å¦‚æœç‚¹å‡»æŒ‰é’®ï¼Œä¼šå‡ºç°ä¸‹é¢çš„æ‰“å°ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯è¯´å³ä¾¿Childç»„ä»¶ç”¨äº†memoï¼Œä½†æ˜¯æ¯æ¬¡Appé‡æ–°æ¸²æŸ“ï¼ŒChildä¹Ÿä¼šè·Ÿç€é‡æ–°æ¸²æŸ“ã€‚åŸå› æ˜¯åŒ¿åå‡½æ•°çš„å¼•ç”¨å‘ç”Ÿäº†å˜åŒ–</span></p><pre data-language="plain" id="DMc9t" class="ne-codeblock language-plain"><code>[App render]
[child render]</code></pre><h4 id="KdxTg"><span class="ne-text">ä¸ºä»€ä¹ˆè¦é¿å…åŒ¿åå‡½æ•°å’Œå¯¹è±¡ï¼Ÿ</span></h4><p id="u0886cb58" class="ne-p"><span class="ne-text">æ¯æ¬¡ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œ</span><span class="ne-text" style="text-decoration: underline">JavaScript ä¼šé‡æ–°åˆ›å»ºè¿™äº›åŒ¿åå‡½æ•°å’Œå¯¹è±¡</span><span class="ne-text">ã€‚è¿™äº›æ–°åˆ›å»ºçš„å‡½æ•°å’Œå¯¹è±¡åœ¨å†…å­˜ä¸­æ˜¯ä¸åŒçš„ï¼Œå³ä½¿å®ƒä»¬çš„å†…å®¹ç›¸åŒã€‚è¿™ä¼šå¯¼è‡´ä»¥ä¸‹é—®é¢˜ï¼š</span></p><ol class="ne-ol"><li id="u15bbe06f" data-lake-index-type="0"><strong><span class="ne-text">å¯¼è‡´å­ç»„ä»¶ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“</span></strong><span class="ne-text">ï¼š å½“å­ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„åŒ¿åå‡½æ•°æˆ–å¯¹è±¡ä½œä¸º props æ—¶ï¼Œå³ä½¿è¿™äº› props çš„å†…å®¹æ²¡æœ‰å˜åŒ–ï¼ŒReact ä»ç„¶è®¤ä¸ºè¿™äº› props å‘ç”Ÿäº†å˜åŒ–ï¼Œå› ä¸ºå®ƒä»¬æ˜¯æ–°çš„å¼•ç”¨ï¼Œè¿›è€Œå¯¼è‡´å­ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚</span></li><li id="u375b5b37" data-lake-index-type="0"><strong><span class="ne-text">æ€§èƒ½é—®é¢˜</span></strong><span class="ne-text">ï¼š é¢‘ç¹åˆ›å»ºæ–°çš„å‡½æ•°å’Œå¯¹è±¡ä¼šå¢åŠ å†…å­˜ä½¿ç”¨å’Œåƒåœ¾å›æ”¶çš„è´Ÿæ‹…ï¼Œå°¤å…¶æ˜¯åœ¨ç»„ä»¶é¢‘ç¹æ›´æ–°çš„æƒ…å†µä¸‹ï¼Œè¿™ä¼šå¯¹æ€§èƒ½äº§ç”Ÿè´Ÿé¢å½±å“ã€‚</span></li></ol><h3 id="Nmukg"><span class="ne-text">useMemoå’ŒuseCallback</span></h3><p id="u146035fb" class="ne-p"><span class="ne-text">Reactå‡½æ•°å¼ç»„ä»¶åœ¨é‡æ–°æ¸²æŸ“æ—¶å€™ï¼Œä»£ç æ‰§è¡Œä¼šå°†å‡½æ•°ä½“é‡æ–°æ‰§è¡Œï¼Œå³ä¾¿ç»“æœä¸æ˜¯é‡æ–°æ›´æ–°DOMã€‚å¦‚æœå‡½æ•°ä½“çš„ä»£ç é€»è¾‘å¤æ‚ä¼šå¸¦æ¥ä¸å°çš„æ€§èƒ½æŸè€—ï¼Œå¦‚æœèƒ½å¤Ÿå¯¹è¿™è¿‡ç¨‹ä¸­çš„éƒ¨åˆ†â€œé‡â€è¿›è¡Œâ€œè®°å¿†â€ï¼Œåˆ™ä¼šè¾ƒå¤§æå‡æ€§èƒ½ã€‚</span></p><p id="u89b5266b" class="ne-p"><span class="ne-text">å“åº”å¼å˜é‡å†…éƒ¨ä¼šè‡ªåŠ¨è¿›è¡Œè®°å¿†ï¼Œä½†æ˜¯å¦‚æœæ˜¯éå“åº”å¼å˜é‡ï¼Œæ¯”å¦‚ä¸€ä¸ªå¯¹è±¡æˆ–æ˜¯ä¸€ä¸ªå‡½æ•°ä¼ å…¥ç»„ä»¶ï¼Œè¿™å…¶å®ä¹Ÿæ˜¯æ”¹å˜äº†çš„ï¼ŒåŸå› æ˜¯å¯¹è±¡çš„å¼•ç”¨æ”¹å˜ï¼Œä¾ç„¶ä¼šå¼•èµ·ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ï¼Œè€Œåˆ©ç”¨useMemoæˆ–æ˜¯useCallbackåˆ›å»ºçš„å¯¹è±¡ï¼ˆå¯¹è±¡ã€æ•°ç»„ã€å‡½æ•°ï¼‰åˆ™ä¼šä¿ç•™è®°å¿†åŠŸèƒ½ã€‚</span></p><h4 id="IzAwu"><span class="ne-text" style="color: #DF2A3F">useCallback</span></h4><p id="uaccf8151" class="ne-p"><span class="ne-text">useCallback ç¼“å­˜å‡½æ•°</span></p><p id="u9f6987fa" class="ne-p"><span class="ne-text">æœªä½¿ç”¨å‰</span></p><pre data-language="tsx" id="uA0FL" class="ne-codeblock language-tsx"><code>import { Button } from 'antd';

const Child = memo((props: any) =&gt; {
  console.log('&gt;&gt;&gt; child component render &gt;&gt;&gt;');
  return &lt;div&gt;child component {props.child}&lt;/div&gt;;
});

export default () =&gt; {
  const [count, setCount] = useState(0);
  const [child, setChild] = useState(0);
  const addCount = () =&gt; {
    setCount(count =&gt; count + 1);
    setCount(count =&gt; count + 1);
    setCount(count =&gt; count + 1);
  };
  const changeChild = () =&gt; {
    setChild(child =&gt; child + 1);
  };
  return (
    &lt;div className=&quot;p-14 text-right&quot;&gt;
      &lt;Button onClick={addCount}&gt;parent count: {count}&lt;/Button&gt;
      &lt;Child child={child} click={changeChild} /&gt;
    &lt;/div&gt;
  );
};
</code></pre><p id="ud6102f84" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/gif/1484158/1722957686616-b1556796-d66a-4c53-874f-35d0fb3231ed.gif" width="606" title="" crop="0,0,1,1" id="ub823e853" class="ne-image"></p><p id="u86342f12" class="ne-p"><span class="ne-text">ä½¿ç”¨å</span></p><pre data-language="tsx" id="MD10Y" class="ne-codeblock language-tsx"><code>import { Button } from 'antd';

const Child = memo((props: any) =&gt; {
  console.log('&gt;&gt;&gt; child component render &gt;&gt;&gt;');
  return &lt;div&gt;child component {props.child}&lt;/div&gt;;
});

export default () =&gt; {
  const [count, setCount] = useState(0);
  const [child, setChild] = useState(0);
  const addCount = () =&gt; {
    setCount(count =&gt; count + 1);
    setCount(count =&gt; count + 1);
    setCount(count =&gt; count + 1);
  };
  const changeChild = useCallback(() =&gt; {
    setChild(child =&gt; child + 1);
  }, []);
  return (
    &lt;div className=&quot;p-14 text-right&quot;&gt;
      &lt;Button onClick={addCount}&gt;parent count: {count}&lt;/Button&gt;
      &lt;Child child={child} click={changeChild} /&gt;
    &lt;/div&gt;
  );
};
</code></pre><p id="u88a27b39" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/gif/1484158/1722957793630-76dbba53-8e2e-47bc-be4e-e6b43747c67f.gif" width="606" title="" crop="0,0,1,1" id="u416d0989" class="ne-image"></p><h4 id="p7jw0"><span class="ne-text" style="color: #DF2A3F">useMemo</span></h4><p id="u6522a270" class="ne-p"><span class="ne-text">useMemo ç¼“å­˜ï¼ˆå¤æ‚ï¼‰å€¼</span></p><p id="ua8e6cbf9" class="ne-p"><span class="ne-text">ä¼ å…¥ä¸€ä¸ªå¿…é¡»å¸¦æœ‰è¿”å›å€¼çš„å‡½æ•°</span></p><pre data-language="tsx" id="vxFRC" class="ne-codeblock language-tsx"><code>import { Button } from 'antd';

const Child = memo((props: any) =&gt; {
  const sum = useMemo(
    () =&gt;
      [1, 2, 3, 4, 5, 6, 7, 8, 9, 10].reduce((acc, cur) =&gt; {
        // eslint-disable-next-line no-param-reassign
        acc += cur;
        console.info('&gt;&gt;&gt; calculate sum &gt;&gt;&gt;');
        return acc;
      }, 0),
    [],
  );
  console.log('&gt;&gt;&gt; child component render &gt;&gt;&gt;', sum);
  return &lt;div&gt;child component {props.child}&lt;/div&gt;;
});

export default () =&gt; {
  const [count, setCount] = useState(0);
  const [child, setChild] = useState(0);
  const addCount = () =&gt; {
    setCount(count =&gt; count + 1);
    setCount(count =&gt; count + 1);
    setCount(count =&gt; count + 1);
  };
  return (
    &lt;div className=&quot;p-14 text-right&quot;&gt;
      &lt;Button onClick={addCount}&gt;not change: {count}&lt;/Button&gt;
      &lt;Button
        onClick={() =&gt; {
          setChild(child =&gt; child + 1);
        }}
      &gt;
        change: {child}
      &lt;/Button&gt;
      &lt;Child child={child} /&gt;
    &lt;/div&gt;
  );
};
</code></pre><p id="u12e02f70" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/gif/1484158/1722957265079-bfac1074-653e-45de-b1d1-515e844a8fa3.gif" width="606" title="" crop="0,0,1,1" id="uc653f80f" class="ne-image"></p><p id="u759c1e0d" class="ne-p"><span class="ne-text">å¦‚æœä¸ä½¿ç”¨useMemoï¼Œé‚£ä¹ˆæ¯æ¬¡childæ¸²æŸ“éƒ½ä¼šæ‰§è¡Œä¸€ésumçš„è®¡ç®—å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯å¤šäº†åæ¬¡calculate sumæ‰“å°</span></p><ol class="ne-ol"><li id="u18b45d54" data-lake-index-type="0"><span class="ne-text">ä¸¤è€…çš„ç¬¬äºŒä¸ªå‚æ•°éƒ½æ˜¯ä¾èµ–æ•°ç»„ï¼ŒåŒuseEffect</span></li></ol><pre data-language="tsx" id="HiqQ8" class="ne-codeblock language-tsx"><code>import { useCallback, useMemo } from 'React'
const A = () =&gt; {
  // 1. every render -&gt; run
  const fun = () =&gt; {}
  // 2. useCallback (ignore const error...)
  const fun = useCallback(() =&gt; {}, [])
  // 3. useMemo (ignore const error...)
  const fun = useMemo(() =&gt; () =&gt; {}, [])
  const a = useMemo(() =&gt; [1, 2, 3], [])
  
  return &lt;div onClick={fun} a={a}&gt;&lt;/div&gt;
}</code></pre><h2 id="QPxQG"><span class="ne-text">3ï¸âƒ£</span><span class="ne-text">ã€commité˜¶æ®µã€‘ å‡å°‘æäº¤è€—æ—¶</span></h2><h3 id="lF7Xw"><span class="ne-text">æ‰¹é‡çŠ¶æ€æ›´æ–°</span></h3><p id="u1ad1a4d7" class="ne-p"><span class="ne-text">æ‰¹é‡æ›´æ–°æ˜¯æŒ‡ React å°†å¤šæ¬¡ state æ›´æ–°è¿›è¡Œåˆå¹¶å¤„ç†ï¼Œæœ€ç»ˆåªè¿›è¡Œä¸€æ¬¡æ¸²æŸ“ï¼Œä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚</span></p><p id="u808cbbe9" class="ne-p"><span class="ne-text">ä¾‹å¦‚ï¼Œå¦‚æœåœ¨åŒä¸€ä¸ªç‚¹å‡»äº‹ä»¶ä¸­æœ‰ä¸¤ä¸ªçŠ¶æ€æ›´æ–°ï¼ŒReact æ€»æ˜¯ä¼šæŠŠå®ƒä»¬æ‰¹é‡å¤„ç†æˆä¸€ä¸ªé‡æ–°æ¸²æŸ“ã€‚</span></p><p id="ubea297dc" class="ne-p"><span class="ne-text" style="text-decoration: underline">ä» React 18 çš„ createRoot å¼€å§‹ï¼Œä¸è®ºåœ¨å“ªé‡Œï¼Œ æ‰€æœ‰æ›´æ–°éƒ½å°†è‡ªåŠ¨è¿›è¡Œæ‰¹é‡æ›´æ–°ã€‚</span></p><p id="u0c808730" class="ne-p"><span class="ne-text">è¿™æ„å‘³ç€ setTimeoutã€promisesã€åŸç”Ÿäº‹ä»¶å¤„ç†å‡½æ•°æˆ–å…¶ä»–ä»»ä½•äº‹ä»¶çš„æ‰¹é‡æ›´æ–°éƒ½å°†ä¸ React äº‹ä»¶ä¸€æ ·ï¼Œä»¥ç›¸åŒçš„æ–¹å¼è¿›è¡Œæ‰¹é‡æ›´æ–°ã€‚</span></p><p id="uec0fa77e" class="ne-p"><span class="ne-text">æ¯”å¦‚ä¸‹é¢è¿™ä¸ªç»„ä»¶ï¼Œåœ¨React 18ä¹‹å‰ä¼šæ¸²æŸ“ä¸¤æ¬¡ï¼Œä½†æ˜¯React 18å¯ä»¥è‡ªåŠ¨æ‰¹å¤„ç†</span></p><pre data-language="tsx" id="nYvKn" class="ne-codeblock language-tsx"><code>function App() {
  console.info('[App render]')
  const [count, setCount] = useState(0);
  const [msg, setMsg] = useState('hello');
  const onChildClick = useCallback(() =&gt; {
    console.log('test lambda function rerender too.')
  }, [])
  const onAppClick = () =&gt; {
    fetch(`https://api.github.com/repos/vuejs/core/commits?per_page=3&amp;sha=main`)
    .then(res =&gt; res.json())
    .then(data =&gt; {
      console.info('&gt;&gt;&gt; fetch data &gt;&gt;&gt;', data)
      setCount((count) =&gt; count + 1)
      setMsg('hello world')
    })
  }
  return (
      &lt;div style={{
        marginTop: '200px',
        textAlign: 'right'
      }}&gt;
        &lt;button onClick={onAppClick}&gt;
          count is {count}
        &lt;/button&gt;
        {msg &amp;&amp; (&lt;Child msg={msg} onClick={onChildClick} /&gt;)}
      &lt;/div&gt;
  )
}</code></pre><p id="u9183faf6" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/gif/1484158/1724210023557-19c1854b-9368-476e-8932-c1c163e4131b.gif" width="601" title="" crop="0,0,1,1" id="ud36afdbe" class="ne-image"></p><p id="u8d014e2b" class="ne-p"><span class="ne-text" style="text-decoration: underline">å¦‚æœæƒ³å–æ¶ˆæ‰¹å¤„ç†</span></p><pre data-language="tsx" id="mwpjO" class="ne-codeblock language-tsx"><code>function App() {
  console.info('[App render]')
  const [count, setCount] = useState(0);
  const [msg, setMsg] = useState('hello');
  const onChildClick = useCallback(() =&gt; {
    console.log('test lambda function rerender too.')
  }, [])
  const onAppClick = () =&gt; {
    fetch(`https://api.github.com/repos/vuejs/core/commits?per_page=3&amp;sha=main`)
    .then(res =&gt; res.json())
    .then(data =&gt; {
      console.info('&gt;&gt;&gt; fetch data &gt;&gt;&gt;', data)
      flushSync(() =&gt; {
        setCount((count) =&gt; count + 1)
      });
      flushSync(() =&gt; {
        setMsg('hello world')
      });
    })
  }
  return (
      &lt;div style={{
        marginTop: '200px',
        textAlign: 'right'
      }}&gt;
        &lt;button onClick={onAppClick}&gt;
          count is {count}
        &lt;/button&gt;
        {msg &amp;&amp; (&lt;Child msg={msg} onClick={onChildClick} /&gt;)}
      &lt;/div&gt;
  )
}</code></pre><p id="u3fea0a7e" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2024/gif/1484158/1724210142265-f1d60b88-97ee-4dcd-91d9-47115ab86615.gif" width="601" title="" crop="0,0,1,1" id="u16daebe5" class="ne-image"></p><p id="uc949ada4" class="ne-p"><span class="ne-text">å¯ä»¥çœ‹åˆ°å¤šæ‰§è¡Œäº†ä¸€æ¬¡</span><code class="ne-code"><span class="ne-text">[App render]</span></code></p><h3 id="jMG4f"><span class="ne-text">é¿å…ä¸å¿…è¦çš„ Context é‡æ–°æ¸²æŸ“</span></h3><ul class="ne-ul"><li id="ufdd1ae4f" data-lake-index-type="0"><span class="ne-text">Context æ˜¯éå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œä½†ä¸æ…ä½¿ç”¨å¯èƒ½å¯¼è‡´ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ã€‚å°† Context æä¾›è€…å°½é‡æ‹†åˆ†æˆå¤šä¸ªå°çš„ä¸Šä¸‹æ–‡ï¼Œæˆ–è€…åœ¨å¿…è¦æ—¶ä½¿ç”¨ </span><code class="ne-code"><span class="ne-text">useMemo</span></code><span class="ne-text"> ç¼“å­˜ Context å€¼ã€‚</span></li></ul><pre data-language="tsx" id="hyKWK" class="ne-codeblock language-tsx"><code>const value = useMemo(() =&gt; ({ state, dispatch }), [state, dispatch]);

return (
  &lt;MyContext.Provider value={value}&gt;
    {children}
  &lt;/MyContext.Provider&gt;
);</code></pre><p id="ua33b3b17" class="ne-p"><br></p><h1 id="aqLAy"><span class="ne-text">ğŸˆ</span><span class="ne-text">å…¶ä»–Hooks</span></h1><h2 id="kxEYf"><span class="ne-text">useContextå’ŒcreateContextï¼ˆAPIï¼‰</span></h2><p id="u0ab2b1cf" class="ne-p"><span class="ne-text">è·¨ç»„ä»¶é€šä¿¡</span></p><pre data-language="tsx" id="WFHKk" class="ne-codeblock language-tsx"><code>import { useContext, createContext } from 'React'

// not Provider value -&gt; render default value
const C = createContext('default value...')

const GSon = () =&gt; {
  const value = useContext(C)
  // value -&gt; something...
  return &lt;div&gt;GSon template...&lt;/div&gt;
}
const Son = () =&gt; {
  return &lt;GSon /&gt;
}

const A = () =&gt; {

  return (
    &lt;C.Provider value='something...'&gt;
    	&lt;Son ref={obj} /&gt;
    &lt;/C.Provider&gt;
  )
}</code></pre><h2 id="fCqwY"><span class="ne-text">useReducer</span></h2><p id="u76ab5b03" class="ne-p"><span class="ne-text">ç®¡ç†å¤šä¸ªæœ‰å…³è”çš„å“åº”å¼å˜é‡</span></p><pre data-language="tsx" id="DGPnc" class="ne-codeblock language-tsx"><code>import { useReducer } from 'React

const loginState = { isLogin: true, isLogout: false }
const loginReducer = (state, action) =&gt; {
  switch(action.type) {
    case 'login':
      return { isLogin: true, isLogout: false }
    case 'logout':
      return { isLogin: false, isLogout: true }
    default:
      return new Error()
  }
}

const A = () =&gt; {
  const [state, LoginDispatch] = useReducer(loginReducer, loginState)
  const clickEvent = () =&gt; {
    loginDispatch({ type: state.isLogin ? 'logout' : 'login' }) 
  }

  return (
    &lt;button onClick={clickEvent}&gt;{state.isLogin ? 'login', 'logout'}&lt;/button&gt;
  )
}</code></pre><h2 id="fnHiy"><span class="ne-text">å¹¶å‘æ¨¡å¼</span></h2><ol class="ne-ol"><li id="uf47bf115" data-lake-index-type="0"><span class="ne-text">React18ä¹‹å‰ï¼Œæ¸²æŸ“æ˜¯ä¸€ä¸ªå•ä¸€çš„ã€ä¸é—´æ–­çš„ã€åŒæ­¥çš„äº‹åŠ¡ï¼Œä¸€æ—¦æ¸²æŸ“å¼€å§‹ï¼Œå°±ä¸èƒ½è¢«ä¸­æ–­</span></li><li id="ufee7a81a" data-lake-index-type="0"><span class="ne-text">React18å¼•å…¥å¹¶å‘æ¨¡å¼ï¼Œå®ƒå…è®¸ä½ å°†æ›´æ–°ä½œä¸ºä¸€ä¸ªtransitionsï¼Œè¿™ä¼šå‘Šè¯‰Reactä»–ä»¬å¯ä»¥è¢«ä¸­æ–­æ‰§è¡Œã€‚è¿™æ ·å¯ä»¥æŠŠç´§æ€¥çš„ä»»åŠ¡å…ˆæ›´æ–°ä½ ï¼Œä¸ç´§æ€¥çš„ä»»åŠ¡åæ›´æ–°</span></li></ol><h2 id="iVUqv"><span class="ne-text">startTransitionï¼ˆAPIï¼‰</span></h2><pre data-language="tsx" id="mCdB8" class="ne-codeblock language-tsx"><code>import { startTransition } from 'React'
const A = () =&gt; {
  ...
  const fun = () =&gt; {
    // ç´§æ€¥ä»»åŠ¡
    setA('')
    // ä¸ç´§æ€¥ä»»åŠ¡ï¼ˆå°†å†…éƒ¨çš„ä»»ä½•éç´§æ€¥çŠ¶æ€æ›´æ–°æ ‡è®°ä¸º Transitionï¼‰
    startTransition(() =&gt; setB(''))
  }
  return &lt;div&gt;&lt;/div&gt;
}</code></pre><h2 id="baIe2"><span class="ne-text">useTransitionå’ŒuseDeferredValue</span></h2><ol class="ne-ol"><li id="ubb651c66" data-lake-index-type="0"><span class="ne-text">useTransitionè¿”å›ä¸€ä¸ªçŠ¶æ€å€¼è¡¨ç¤ºè¿‡æ¸¡ä»»åŠ¡çš„ç­‰å¾…çŠ¶æ€ï¼Œä»¥åŠä¸€ä¸ªå¯åŠ¨è¯¥è¿‡æ¸¡ä»»åŠ¡çš„å‡½æ•°</span></li></ol><pre data-language="tsx" id="BihZN" class="ne-codeblock language-tsx"><code>import { useTransition } from 'React'
const A = () =&gt; {
  ...
  const [pending, startTransition] = useTransition()
  const fun = () =&gt; {
    // ç´§æ€¥ä»»åŠ¡
    setA('')
    // ä¸ç´§æ€¥ä»»åŠ¡ï¼ˆå°†å†…éƒ¨çš„ä»»ä½•éç´§æ€¥çŠ¶æ€æ›´æ–°æ ‡è®°ä¸º Transitionï¼‰
    startTransition(() =&gt; setB(''))
  }
  return &lt;div&gt;&lt;/div&gt;
}</code></pre><ol start="2" class="ne-ol"><li id="u279291ea" data-lake-index-type="0"><span class="ne-text">useDeferredValueæ¥å—ä¸€ä¸ªå€¼ï¼Œå¹¶è¿”å›è¯¥å€¼çš„æ–°å‰¯æœ¬ï¼Œè¯¥å‰¯æœ¬å°†æ¨è¿Ÿåˆ°æ›´ç´§æ€¥åœ°æ›´æ–°ä¹‹å</span></li></ol><pre data-language="tsx" id="wpppu" class="ne-codeblock language-tsx"><code>import { useDeferredValue, useState } from 'React'
const A = () =&gt; {
  const [a, setA] = useState('')
  // aD =&gt; ä¸ç´§æ€¥æ—¶å€™çš„å€¼ï¼ˆåŒaï¼‰ï¼Œä¹Ÿå°±æ˜¯å»¶è¿Ÿä¹‹åçš„å€¼
  const aD = useDeferredValue(a)
  ...
  return &lt;div&gt;&lt;/div&gt;
}</code></pre><h2 id="czKkK"><span class="ne-text">è‡ªå®šä¹‰hook</span></h2><ol class="ne-ol"><li id="ue75e76dd" data-lake-index-type="0"><span class="ne-text">å‘½åé€šå¸¸ä½¿ç”¨useå¼€å¤´</span></li><li id="u2bce0e3e" data-lake-index-type="0"><span class="ne-text">åªèƒ½åœ¨å‡½æ•°ç»„ä»¶çš„é¡¶å±‚ä½¿ç”¨</span></li><li id="u578f3469" data-lake-index-type="0"><span class="ne-text">å¯¹äºè¿”å›å€¼</span></li></ol><ol class="ne-list-wrap"><ol ne-level="1" class="ne-ol"><li id="uf71b0765" data-lake-index-type="0"><span class="ne-text" style="color: #DF2A3F">è™½ç„¶ä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªç»„ä»¶ï¼Œä½†æ˜¯ä¸å»ºè®®è¿™ä¹ˆåš</span></li><li id="ubf130283" data-lake-index-type="0"><span class="ne-text">çŠ¶æ€å€¼å’Œä¿®æ”¹çŠ¶æ€å€¼çš„å‡½æ•°</span></li><li id="u34c207c6" data-lake-index-type="0"><span class="ne-text">è®¡ç®—åçš„æ•°æ®</span></li><li id="u36eed360" data-lake-index-type="0"><span class="ne-text">å›è°ƒå‡½æ•°</span></li><li id="u3ed47c0e" data-lake-index-type="0"><span class="ne-text">å·¥å…·æ–¹æ³•é›†åˆ</span></li><li id="ua2c66df0" data-lake-index-type="0"><span class="ne-text">çŠ¶æ€æ ‡å¿—(loading/errorç­‰)</span></li></ol></ol><pre data-language="tsx" id="bzPAC" class="ne-codeblock language-tsx"><code>import { useState, useEffect } from 'React'

const useMouseXY = () =&gt; {
  const [x, setX] = usestate(0)
  const [y, setY] = usestate(0)

  useEffect(() =&gt; {
    function move(e) {
      setX(e.pageX)
      setY(e.pageY)
    }
    document.addEventListener('mousemove', move)
    return () =&gt; document.removeEventListener('mousemove', move)
  }, [])
  
  return { x, y }
}

// use 
const { x, y } = useMouseXY()</code></pre><h2 id="E4FME"><span class="ne-text">Suspense</span></h2><p id="ueed27788" class="ne-p"><span class="ne-text">ç»„ä»¶åŠ è½½ä¸­æˆ–æ˜¯åˆ‡æ¢è¿‡ç¨‹ä¸­çš„â€œä¸­é—´æ€â€</span></p><pre data-language="tsx" id="A9bB5" class="ne-codeblock language-tsx"><code>import { Suspense, useState } from 'react';
import { RouterProvider } from 'react-router-dom';
import router from '@/router/index';
import Loading from '@/components/Loading';

function MyApp() {
  const [show, setShow] = useState(true)
  const clickEvent = () =&gt; setShow(!show)
  return (
    &lt;&gt;
      &lt;button onClick={clickEvent}&gt;btn&lt;/button&gt;
      &lt;Suspense fallback={&lt;Loading /&gt;}&gt;
        {show ? &lt;RouterProvider router={router} /&gt; : &lt;&gt;other template&lt;/&gt;}
      &lt;/Suspense&gt;
    &lt;/&gt;
  );
}

export default MyApp;</code></pre><p id="ud8c681f0" class="ne-p"><span class="ne-text">ç»“åˆstartTransitionä½¿ç”¨ï¼š</span></p><p id="uad00f696" class="ne-p"><span class="ne-text">å¦‚æœéœ€è¦åˆ‡æ¢è¿‡ç¨‹ä¸­ä¸å±•ç¤ºloadingçš„åŠ è½½æ€ï¼Œåˆ™å°†ä¸Šè¿°ä»£ç ä¸­çš„åˆ‡æ¢é€»è¾‘è½¬ä¸ºå¹¶å‘å¼‚æ­¥å³å¯</span></p><pre data-language="tsx" id="CrYvA" class="ne-codeblock language-tsx"><code>const clickEvent = () =&gt; startTransition(() =&gt; setShow(!show))</code></pre><h2 id="Xwina"><span class="ne-text">é”™è¯¯è¾¹ç•Œæ•è·</span></h2><p id="uce23988c" class="ne-p"><span class="ne-text">å¦‚æœç¼–å†™çš„ç»„ä»¶å†…éƒ¨æŠ¥é”™ï¼Œé‚£ä¹ˆreactæ¸²æŸ“ä¼šæ¸…é™¤æ ¹èŠ‚ç‚¹DOMï¼ŒReactå®˜æ–¹æ–‡æ¡£æš‚æ—¶åªæœ‰ç±»ç»„ä»¶ç¼–å†™çš„ç¤ºä¾‹ä»£ç ã€‚å…¶æ ¸å¿ƒé€»è¾‘åœ¨ç±»ç»„ä»¶ä¸Šæ”¯æŒå…³é”®çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•getDerivedStateFromError()å’ŒcomponentDidCatch()ï¼Œæ— æ³•å°†é”™è¯¯è¾¹ç•Œç¼–å†™ä¸ºå‡½æ•°å¼ç»„ä»¶ï¼ŒåŒæ—¶ä»¥ä¸‹å‡ ç§é”™è¯¯æƒ…å†µï¼Œä¹Ÿæ•è·ä¸åˆ°ï¼š</span></p><ol class="ne-ol"><li id="u153d38e4" data-lake-index-type="0"><span class="ne-text">å¼‚æ­¥ä»£ç </span></li><li id="u5764c7ba" data-lake-index-type="0"><span class="ne-text">äº‹ä»¶å¤„ç†å‡½æ•°</span></li><li id="ubdf3f9b1" data-lake-index-type="0"><span class="ne-text">æœåŠ¡å™¨ç»„ä»¶</span></li><li id="uae94c9a5" data-lake-index-type="0"><span class="ne-text">Error Boundaryè‡ªèº«</span></li></ol><p id="u01d1627d" class="ne-p"><span class="ne-text">å…·ä½“çš„å®Œæ•´å°è£… TODO: </span></p><h1 id="MuBiq"><span class="ne-text">ğŸˆ</span><span class="ne-text">ReactDOM</span></h1><h3 id="qrou1"><span class="ne-text">createElement </span></h3><p id="u2b437258" class="ne-p"><span class="ne-text">JSXæ¨¡æ¿å¼•æ“çš„åº•å±‚å®ç°æœºåˆ¶ï¼Œä½¿ç”¨JSXç¼–å†™ä»£ç æ—¶ï¼ŒBabelä¼šå°†JSXè½¬æ¢ä¸º</span><code class="ne-code"><span class="ne-text">React.createElement</span></code><span class="ne-text">è°ƒç”¨</span></p><h3 id="SHFHy"><span class="ne-text">createPortal</span></h3><ol class="ne-ol"><li id="u729bc8ae" data-lake-index-type="0"><span class="ne-text">å¯ä»¥æŒ‡å®šèŠ‚ç‚¹æŒ‚è½½åˆ°æŒ‡å®šç›®æ ‡DOMèŠ‚ç‚¹</span></li></ol><pre data-language="tsx" id="TbQEn" class="ne-codeblock language-tsx"><code>// template
const A = () =&gt; ReactDOM.createPortal(&lt;div&gt;info&lt;/div&gt;, document.body)</code></pre><ol start="2" class="ne-ol"><li id="u21e16b5d" data-lake-index-type="0"><span class="ne-text">å¯¹äºä¸€äº›å…¨å±€ç»„ä»¶ï¼ˆmessageï¼‰ï¼ŒDOMçš„æŒ‚åœ¨å¯èƒ½ä¸åœ¨rootæ ¹èŠ‚ç‚¹å†…ï¼Œè‡ªå®šä¹‰æŒ‚åœ¨æŒ‡å®šDOMèŠ‚ç‚¹ï¼Œé™¤äº†ä¸Šè¿°createPortalæ–¹å¼ï¼Œè¿˜æœ‰reactçš„createRootæ–¹å¼</span></li></ol><h3 id="JcFgv"><span class="ne-text">flushSync</span></h3><pre data-language="tsx" id="b1wUu" class="ne-codeblock language-tsx"><code>import { useState } from 'React'
import { flushSync } from 'ReactDDOM'
const A = () =&gt; {
  const [a, setA] = useState(1)
  const [b, setB] = useState('b')
  const addA = () =&gt; {
    setA(a + 1)
    setA(a + 1)
    setA(a + 1)
  }
  flushSync(() =&gt; {
    setA(a + 1)
  })
  flushSync(() =&gt; {
    setB('bb')
  })
  return &lt;div onClick={addA}&gt;a value: {a}&lt;/div&gt;
}</code></pre><h1 id="Z7LG9"><span class="ne-text">ğŸˆ</span><span class="ne-text">Others</span></h1><h3 id="OSkL5"><span class="ne-text">hooks</span></h3><ol class="ne-ol"><li id="u788f32a8" data-lake-index-type="0"><span class="ne-text" style="background-color: #FCE75A">use</span><span class="ne-text">ï¼šreact18ä¸­çš„å¤„ç†å¼‚æ­¥èµ„æºçš„ä¸€ç§æ–¹å¼ï¼Œå¯è§£æPromiseç­‰ï¼Œä½¿ç”¨å‰æä¸ºæœåŠ¡ç«¯æ¸²æŸ“æˆ–è€…å¼€å¯å¼‚æ­¥çš„å®¢æˆ·ç«¯</span></li><li id="u36a4991a" data-lake-index-type="0"><span class="ne-text">useDebugValue</span></li><li id="u9105ac7b" data-lake-index-type="0"><span class="ne-text">useIdï¼šç”Ÿæˆå”¯ä¸€idï¼Œæ¯”å¦‚ä¸€ä¸ªé¡µé¢éœ€è¦è°ƒç”¨ä¸¤ä¸ªç›¸åŒç»„ä»¶ï¼Œå¹¶ä¸”éœ€è¦ç»™å„è‡ªç»„ä»¶ä¸€ä¸ªå”¯ä¸€idï¼ŒuseIdå°±å¾ˆé€‚ç”¨</span></li><li id="u598cfe0c" data-lake-index-type="0"><span class="ne-text">useImperativeHandle</span></li><li id="u92b53f9f" data-lake-index-type="0"><span class="ne-text">useInsertionEffectï¼šé€‚ç”¨äºCSS-in-JSç›¸å…³åœºæ™¯</span></li><li id="ufc9310f0" data-lake-index-type="0"><span class="ne-text" style="background-color: #FBDE28">useOptimistic</span><span class="ne-text">ï¼šè¿‡æ¸¡æ€ï¼Œæœ‰ç‚¹ç±»ä¼¼Vueä¸­çš„Suspense</span></li><li id="u52d3cf14" data-lake-index-type="0"><span class="ne-text">useSyncExternalStore</span></li></ol><h3 id="lMQGb"><span class="ne-text">ç»„ä»¶</span></h3><ol class="ne-ol"><li id="ue6803775" data-lake-index-type="0"><span class="ne-text">&lt;Profiler&gt;ï¼šæµ‹é‡ç»„ä»¶æ¸²æŸ“æ€§èƒ½</span></li><li id="u7fb3e3ac" data-lake-index-type="0" style="text-align: left"><span class="ne-text">&lt;StrictMode&gt;ï¼šä¸¥æ ¼æ¨¡å¼ï¼Œå¸¸ç”¨äºå¼€å‘ç¯å¢ƒå†å¼€å‘è¿‡ç¨‹ä¸­å°±å‘ç°é”™è¯¯ï¼Œä½†æ˜¯ä¼šå¤šæ‰§è¡Œç»„ä»¶æ¸²æŸ“ä¸€æ¬¡</span></li></ol></div>0:{"buildId":"mcIhXKXgSeJcHJ-IdbQok","rsc":["$","$1","c",{"children":[["$","section",null,{"className":"relative","children":["$","$L2",null,{"fade":true,"blur":true,"transition":{"duration":0.5},"delay":0.1,"className":"relative overflow-hidden border-y xl:flex","children":[["$","div",null,{"className":"m-6 w-full flex-1 bg-[radial-gradient(circle_at_center,color-mix(in_oklab,var(--primary)_15%,transparent)_2px,transparent_2px)] bg-size-[18px_18px] max-xl:hidden"}],["$","div",null,{"className":"mx-auto w-full max-w-6xl flex-none space-y-8 px-4 py-8 min-[1158px]:border-x sm:px-6 sm:py-12 lg:px-8","children":[["$","$L2",null,{"fade":true,"blur":true,"slide":{"direction":"down","offset":30},"transition":{"duration":0.4},"children":["$","$L3",null,{"href":"/blog","className":"text-muted-foreground hover:text-foreground inline-flex items-center gap-2 text-sm transition-colors","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-arrow-left h-4 w-4","aria-hidden":"true","children":[["$","path","1l729n",{"d":"m12 19-7-7 7-7"}],["$","path","x3x0zl",{"d":"M19 12H5"}],"$undefined"]}],"è¿”å›","æŠ€æœ¯åšå®¢"]}]}],["$","article",null,{"className":"mx-auto max-w-4xl","children":[["$","header",null,{"className":"mb-8 space-y-6","children":[["$","$L2",null,{"fade":true,"blur":true,"slide":{"direction":"up","offset":50},"delay":0.2,"transition":{"duration":0.6},"children":["$","div",null,{"className":"relative aspect-video overflow-hidden rounded-xl","children":["$","$L4",null,{"src":"https://cdn.nlark.com/yuque/0/2024/png/1484158/1722953034766-4c5c7561-a6fb-4398-bdde-348a9afd35bc.png","alt":"Reactå‡½æ•°ç»„ä»¶åŠå…¶ç›¸å…³hooks","fill":true,"className":"object-cover","unoptimized":true}]}]}],["$","$L2",null,{"delay":0.3,"transition":{"duration":0.5},"children":["$","h1",null,{"className":"text-2xl font-bold tracking-tight sm:text-3xl md:text-4xl","children":["$","$L5",null,{"text":"Reactå‡½æ•°ç»„ä»¶åŠå…¶ç›¸å…³hooks","delay":30,"animateBy":"words","direction":"bottom"}]}]}],["$","$L2",null,{"fade":true,"blur":true,"slide":{"direction":"down","offset":30},"delay":0.4,"transition":{"duration":0.5},"children":["$","p",null,{"className":"text-muted-foreground text-lg","children":"å®˜æ–¹æ–‡æ¡£ï¼šReact å®˜æ–¹ä¸­æ–‡æ–‡æ¡£ğŸ“Œæœ€å¸¸ç”¨hook1ï¸âƒ£çŠ¶æ€ç›¸å…³useStateæ™®é€šå®šä¹‰çš„å˜é‡æ¯æ¬¡ç»„ä»¶æ¸²æŸ“éƒ½æ˜¯æ‰€å®šä¹‰çš„å€¼ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦åœ¨æ¯æ¬¡re-renderéƒ½è®°ä½ä¸€ä¸ªçŠ¶æ€çš„æœ€æ–°å€¼ï¼Œé‚£å°±éœ€è¦ä½¿ç”¨useState hookimport { useState } from 'React' con..."}]}],["$","$L2",null,{"fade":true,"blur":true,"slide":{"direction":"down","offset":30},"delay":0.5,"transition":{"duration":0.5},"children":["$","div",null,{"className":"text-muted-foreground flex flex-wrap items-center gap-4 text-sm","children":[["$","div",null,{"className":"flex items-center gap-1","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-calendar h-4 w-4","aria-hidden":"true","children":[["$","path","1cmpym",{"d":"M8 2v4"}],["$","path","4m81vk",{"d":"M16 2v4"}],["$","rect","1hopcy",{"width":"18","height":"18","x":"3","y":"4","rx":"2"}],["$","path","8toen8",{"d":"M3 10h18"}],"$undefined"]}],["$","span",null,{"children":"2024å¹´10æœˆ8æ—¥"}]]}],["$","div",null,{"className":"flex items-center gap-1","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-clock h-4 w-4","aria-hidden":"true","children":[["$","path","mmk7yg",{"d":"M12 6v6l4 2"}],["$","circle","1mglay",{"cx":"12","cy":"12","r":"10"}],"$undefined"]}],["$","span",null,{"children":"4.9åƒå­—"}]]}],["$","div",null,{"className":"flex items-center gap-1","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-eye h-4 w-4","aria-hidden":"true","children":[["$","path","1nclc0",{"d":"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}],["$","circle","1v7zrd",{"cx":"12","cy":"12","r":"3"}],"$undefined"]}],["$","span",null,{"children":[2," é˜…è¯»"]}]]}],false,false]}]}],false]}],["$","$L2",null,{"delay":0.6,"fade":true,"blur":true,"transition":{"duration":0.6},"className":"-mx-4 sm:-mx-6 lg:-mx-8","children":["$","$L6",null,{}]}],["$","$L2",null,{"fade":true,"blur":true,"slide":{"direction":"up","offset":50},"delay":0.7,"transition":{"duration":0.6},"children":["$","div",null,{"className":"prose prose-neutral dark:prose-invert mt-8 max-w-none","dangerouslySetInnerHTML":{"__html":"$7"}}]}],"$L8","$L9"]}]]}],"$La"]}]}],["$Lb"],"$Lc"]}],"loading":null,"isPartial":false}
8:["$","$L2",null,{"delay":0.8,"fade":true,"blur":true,"transition":{"duration":0.6},"className":"-mx-4 mt-12 sm:-mx-6 lg:-mx-8","children":["$","$L6",null,{}]}]
9:["$","$L2",null,{"fade":true,"blur":true,"slide":{"direction":"up","offset":30},"delay":0.9,"transition":{"duration":0.5},"children":["$","nav",null,{"className":"mt-8 grid gap-4 md:grid-cols-2","children":[["$","$L3",null,{"href":"/blog/nibdz0pacha6v73t","className":"hover:bg-muted group flex flex-col rounded-lg border p-4 transition-colors","children":[["$","span",null,{"className":"text-muted-foreground mb-2 text-sm","children":"ä¸Šä¸€ç¯‡"}],["$","span",null,{"className":"group-hover:text-primary line-clamp-2 font-medium transition-colors","children":"Overridesâ€”â€”ä¿®æ”¹çº¿ä¸Šæ–‡ä»¶è°ƒè¯•"}]]}],["$","$L3",null,{"href":"/blog/uq766nlmm1cuh7kk","className":"hover:bg-muted group flex flex-col rounded-lg border p-4 text-right transition-colors md:text-right","children":[["$","span",null,{"className":"text-muted-foreground mb-2 text-sm","children":"ä¸‹ä¸€ç¯‡"}],["$","span",null,{"className":"group-hover:text-primary line-clamp-2 font-medium transition-colors","children":"MongoDBå¼€å¯äº‹åŠ¡"}]]}]]}]}]
a:["$","div",null,{"className":"m-6 w-full flex-1 bg-[radial-gradient(circle_at_center,color-mix(in_oklab,var(--primary)_15%,transparent)_2px,transparent_2px)] bg-size-[18px_18px] max-xl:hidden"}]
b:["$","script","script-0",{"src":"/_next/static/chunks/11dff99839ab5ba0.js","async":true}]
c:["$","$Ld",null,{"children":["$","$e",null,{"name":"Next.MetadataOutlet","children":"$@f"}]}]
f:null
